import{d as T,y as _,z as k,A as E,B as w,C as z,D as S,E as L,F as B,G as $}from"./@vue-BHA94vdH.js";const y="skeleton",v=`x-${y}`,C=`${v}-item`,I=`${C}-ref`,p=new WeakMap,b=new ResizeObserver((e,t)=>{for(let s=0;s<e.length;s++){const n=e[s],o=p.get(n.target);o?.forEach(i=>i(n,t))}});var g={observer(e,t){if(t){const s=p.get(e);s?s.add(t):p.set(e,new Set([t]))}b.observe(e)},dispose(e,t){var s;t?(s=p.get(e))===null||s===void 0||s.delete(t):(p.delete(e),b.unobserve(e))},unobserve(e){b.unobserve(e)}};const A=(e,t,s)=>{t=t.split(" "),s=s.split(" ");const n=s.filter(i=>!t.includes(i)),o=t;n.forEach(i=>i&&e.classList.remove(i)),o.forEach(i=>i&&e.classList.add(i))},x=e=>typeof e.value=="object"?e.value.loading:e.value,M=e=>e.modifiers.animated,N=e=>{if(!x(e))return"";const s=M(e);return $([v,{[`${v}-animated`]:s},e.value.loadingClass])},R=e=>$([v,`${v}-animated`,e.value.loadingClass]),P=(e,t,s)=>{const n=k({el:e,binding:t,fragment:e.appendChild(document.createElement("div")),targets:k([]),vnode:s});e=null,t=null,s=null;const o=E(()=>{var c;const{el:l,binding:r,vnode:d}=n;x(r)?(A(l,N(r),R(r)),l.style.cssText=w(z([l.style.cssText,r.value.loadingStyle]))):(l.classList.remove(...R(r).split(" ")),l.style.cssText=w((c=d.props)===null||c===void 0?void 0:c.style))}),i=E(()=>{const{binding:c,fragment:l}=n,r=n.targets,d=x(c);if(d?g.observer(n.el):g.unobserve(n.el),d?r.forEach(a=>a.el.classList.add(I)):r.forEach(a=>a.el.classList.remove(I)),d){const a=r.map(f=>{var m,h;return S("div",{class:[n.binding.value.class,(m=f.binding.value)===null||m===void 0?void 0:m.class,C],style:[n.binding.value.style,(h=f.binding.value)===null||h===void 0?void 0:h.style,f.state.style]})});L(S(B,a),l)}else L(null,l)});return n.unwatch=()=>{o(),i()},n},u=[],U={created(e,t,s){u.push(P(e,t,s))},beforeMount(e,t,s){const n=u.find(o=>o.el===e);n.binding=t,n.vnode=s},beforeUpdate(e,t,s){const n=u.find(o=>o.el===e);n.vnode=s,n.binding=t},beforeUnmount(e){const t=u.findIndex(n=>n.el===e);if(t<0)return;const s=u.splice(t,1)[0];s.unwatch(),s.fragment.parentNode.removeChild(s.fragment),g.dispose(e)}},j={mounted(e,t){const s=u.findLast(o=>o.el.contains(e));if(!s)return;const n=F(s,e,t);s.targets.push(n)},beforeUnmount(e){const t=u.findLast(o=>o.el.contains(e));if(!t)return;const s=t.targets.findIndex(o=>o.el===e);if(s<0)return;const n=t.targets[s];t.targets.splice(s,1),g.dispose(t.el,n.resizeCb)}},F=(e,t,s)=>{t.classList.add(`${C}-ref`);const{el:n}=e,o={el:t,binding:s,state:T({}),resizeCb:()=>{const i=n.getBoundingClientRect(),c=getComputedStyle(n),l=getComputedStyle(t),r=t.getBoundingClientRect(),d={position:"absolute"};["top","left"].forEach(a=>{const f=parseInt(c[_(`border-${a}-width`)]);d[a]=Math.abs(r[a]-i[a])-f+"px"}),["width","height"].forEach(a=>d[a]=Math.ceil(r[a])+"px"),d.borderRadius=l.borderRadius,d.zIndex=+l.zIndex+1,o.state.style=d}};return o.resizeCb(),g.observer(n,o.resizeCb),o};function W(e,t){t===void 0&&(t={});var s=t.insertAt;if(!(typeof document>"u")){var n=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",s==="top"&&n.firstChild?n.insertBefore(o,n.firstChild):n.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}var D=".x-skeleton{position:relative}.x-skeleton-item{background-color:#e6e6e6;box-sizing:border-box}.x-skeleton-item-ref{opacity:0;pointer-events:none;user-select:none}.x-skeleton-animated .x-skeleton-item{animation:x-skeleton-loading 1.4s ease infinite;background:linear-gradient(90deg,#f2f2f2 25%,#e6e6e6 37%,#f2f2f2 63%);background-size:400% 100%}@keyframes x-skeleton-loading{0%{background-position:100% 50%}to{background-position:0 50%}}";W(D);var O={install(e){e.directive(y,U),e.directive(`${y}-item`,j)}};export{O as i};
