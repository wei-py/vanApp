import{_ as b}from"./vBtn-B0QHeO6F.js";import{m as _,_ as T}from"./makeForm-b9Rv_zTa.js";import{m as k,a as s,b as g}from"./backfill-Knvieq5z.js";import{f as m,q,c as w,h as n,e as C,v as U}from"./index-BiU8ePZK.js";import{l}from"./lodash-C1iNKp1x.js";import{c as R}from"./callPhone-BzxCv0KQ.js";import{m as p}from"./makeDate-B6JNL--b.js";import{w as N}from"./watchItem-DBceD2Mk.js";import{x as P}from"./xe-utils-D22uZPtC.js";import{q as u}from"./queryUrl-CUkA5NKU.js";import{e as S,aX as D,al as I,N as c,u as L,F as V}from"./@vue-BHA94vdH.js";import"./vant-xiv0EFx3.js";import"./@vant-BMzV8Unt.js";import"./makeUpload-Vv_MC7yY.js";import"./axios-B6xwUs71.js";import"./class-rRG2y2aF.js";import"./pinia-BOLtM30a.js";import"./vue-demi-Dq6ymT-8.js";import"./vue-router-BQWAt7JZ.js";import"./@vueuse-BYPNFz0v.js";import"./@x-ui-vue3-DYFNhZJM.js";import"./pinia-plugin-persist-J3Q2VqHx.js";import"./vue3-menus--RpDJ8QK.js";import"./vue3-photo-preview-Byv7Qnko.js";import"./vxe-table-CbQjGgi9.js";import"./dom-zindex-GlLoxNk1.js";import"./dayjs-19KvoO9f.js";const X=[k("施工信息"),{formType:"input",label:"施工单位",required:!0,value:"",name:"organization"},{formType:"input",label:"施工负责人",value:"",required:!0,placeholder:"自动获取, 可手动修改",name:"personLiable",backfill(i){this.value=i[this.name];const e=m(),r=e.curUserCompanyVo.permissionList;l.find(r,t=>t.name=="PER_CONSTRUCT").name&&!this.value&&(this.value=e.name)}},{formType:"input",label:"施工负责人电话",type:"number",placeholder:"自动获取, 可手动修改",name:"phone",required:!0,rightIcon:"phone",clickRightIcon(){R(this.value)},backfill(i){this.value=i[this.name];const e=m(),r=e.curUserCompanyVo.permissionList;l.find(r,t=>t.name=="PER_CONSTRUCT").name&&!this.value&&(this.value=e.phone)}},{...p({name:"startTime"}),label:"开工时间",required:!0},{...p({name:"actEndTime"}),label:"完工时间",required:!0},{formType:"input",label:"施工备注(选填)",value:"",placeholder:"请输入",name:"remarks"},{formType:"input",label:"完工组件功率",required:!0,value:"",readonly:!0,placeholder:"系统抓取施工设备信息-组件数据",name:"modulePower",...s("W")},{formType:"input",label:"完工组件数量",required:!0,value:"",readonly:!0,placeholder:"系统抓取施工设备信息-组件数据",name:"moduleNumberReality",...s("块")},{formType:"input",label:"完工容量",required:!0,value:"",readonly:!0,placeholder:"系统抓取施工设备信息-组件数据",name:"installedCapacityReality",...s("W"),backfill(i){N(["modulePower","moduleNumberReality"],([e,r])=>{const o=P.multiply(e*1,r*1),t=q(o);this.value=t.value,this.realValue=o,this.makeUnit(t.unit)})}}],le={__name:"build",setup(i){const e=_({build:X}),r=w();S(()=>{o()});async function o(){const{data:a}=await n.get(u("order/get-construction",{...r}));g(e,a)}async function t(){const a=U();return await n.post("order/put-construction",a)}async function d(a){a.taskId="TASK_SGXX",await n.post(u("/approval/put-approval/bto/construction",a))}async function f(a){a.taskId="TASK_SGXX",await n.post("approval/do-approval/bto/construction",a)}return C({getData:o,saveData:t,submitData:d,approvalData:f}),(a,h)=>{const v=T,y=b;return D(),I(V,null,[c(v,{form:L(e).build,class:"pt-3","group-class":"shadowC"},null,8,["form"]),c(y)],64)}}};export{le as default};
