import{m as h,_}from"./makeForm-b9Rv_zTa.js";import{m as i,b as T}from"./backfill-Knvieq5z.js";import{C as Z,g as x,l as w,c as s,s as g,w as t,H as c,A as I,h as y}from"./index-BiU8ePZK.js";import{l as f}from"./lodash-C1iNKp1x.js";import{m as n}from"./makeUpload-Vv_MC7yY.js";import{q as u}from"./queryUrl-CUkA5NKU.js";import{a as C}from"./vant-xiv0EFx3.js";import{c as r,e as E,aX as k,al as F,N as m,u as d,F as v}from"./@vue-BHA94vdH.js";import"./class-rRG2y2aF.js";import"./pinia-BOLtM30a.js";import"./vue-demi-Dq6ymT-8.js";import"./vue-router-BQWAt7JZ.js";import"./@vueuse-BYPNFz0v.js";import"./xe-utils-D22uZPtC.js";import"./dayjs-19KvoO9f.js";import"./axios-B6xwUs71.js";import"./@x-ui-vue3-DYFNhZJM.js";import"./pinia-plugin-persist-J3Q2VqHx.js";import"./vue3-menus--RpDJ8QK.js";import"./vue3-photo-preview-Byv7Qnko.js";import"./vxe-table-CbQjGgi9.js";import"./dom-zindex-GlLoxNk1.js";import"./@vant-BMzV8Unt.js";const D=[{...i("合同签约"),hidden:r(()=>t()!="YUEXIU_ZZD")},{formType:"input",name:"leaseSigneUrl",label:"线上签约(跳转资方H5)",readonly:!0,hidden:r(()=>t()!="YUEXIU_ZZD"),realValue:"",backfill(e){this.realValue=e.leaseSigneUrl,this.value=""}},{formType:"cell",titleClass:" xCenter",hidden:r(()=>t()!="YUEXIU_ZZD"),inlineForm:[{slot:"title",formType:"button",url:"",text:"复制链接",round:!0,size:"small",type:"primary",class:" !py-1 !bg-[#fff] !text-[#ffab30] !border-0 w-[30%] ",click(){Z(x("leaseSigneUrl").realValue)}}]},{...i("电子合同下载"),hidden:r(()=>t()!="YUEXIU_ZZD_ORG")},{formType:"input",name:"leaseSigneUrl",label:"线上签约(跳转资方H5)",hidden:r(()=>t()!="YUEXIU_ZZD_ORG"),isLink:!0,realValue:"",click(){w(this.realValue)},backfill(e){this.realValue=e.leaseSigneUrl,this.realValue&&(this.value="一键下载")}},{formType:"cell",titleClass:" xCenter",hidden:r(()=>t()!="YUEXIU_ZZD_ORG"),inlineForm:[{slot:"title",formType:"button",url:"",text:"复制下载链接",round:!0,size:"small",type:"primary",class:" !py-1 !bg-[#fff] !text-[#ffab30] !border-0 w-[30%] ",click(){C("资方暂未支持此功能, 请联系博通总部商务中心, 获取合同")}}]},()=>{const e=s();return f.has(e,"online")?[i("屋顶租赁合同签约"),{formType:"input",name:"fddSignTaskId",label:"屋顶租赁合同",value:""},{formType:"input",label:"签署方式",value:"",name:"signeType",inlineForm:[{slot:"input",formType:"button",text:"短信签署",size:"mini",round:!0,class:"!mr-[10px] !text-[14px] !px-5 !py-4 !bg-[#f5f5f5] !border-0",click(){g("signeType",a=>{a.inlineForm[0].text="发送短信"})}},{slot:"extra",formType:"button",text:"App",round:!0,size:"mini",class:" !text-[14px] !px-5 !py-4 !bg-[#f5f5f5] !border-0",click(){g("signeType",a=>{a.inlineForm[0].text="开始签署"})}}]},{formType:"input",name:"",label:"已签约合同查看",value:"合同查看",readonly:!0,isLink:!0,click(){console.log(this.value)}}]:[]}],R=[{...i("屋顶方已盖章合同扫描件上传"),hidden:r(()=>t()!="YUEXIU_ZZD_ORG")},{...n(999,100,"*"),name:"orgLegalIdAuthFile",label:"法人代表/负责人身份证明书(盖公章)",hidden:r(()=>t()!="YUEXIU_ZZD_ORG"),required:!0},{...n(999,100,"*"),name:"orgSignatureChop",label:"法人组织预留印鉴",hidden:r(()=>t()!="YUEXIU_ZZD_ORG"),required:!0},{formType:"cell",value:"提示: 盖公章、法人代表名字章、财务专用章。若确无财务专用章可不盖；若无法人代表名字章可手写签名",valueClass:"text-red !text-left",hidden:r(()=>t()!="YUEXIU_ZZD_ORG")},{...n(1,100,"*"),name:"contract",label:"屋顶方已盖章合同扫描件",hidden:r(()=>t()!="YUEXIU_ZZD_ORG"),required:!0},{formType:"cell",value:"提示: 上传 “法人代表/负责人身份证明书”、“法人组织预留印鉴”、“屋顶方已盖章合同扫描件” 及签约现场系列照片成功后，项目详情里的 “合同签约” 环节右侧将显示绿色的 “已签约”",valueClass:"text-red !text-left",hidden:r(()=>t()!="YUEXIU_ZZD_ORG")}],Y=[{...i("双方已盖章合同扫描件上传"),hidden:r(()=>t()!="YUEXIU_ZZD_ORG")},{...n(1,100,"*"),name:"signPhoto",label:"现场签字照",hidden:r(()=>t()!="YUEXIU_ZZD_ORG"),required:!0},{...n(1,100,"*"),name:"stampUsedPhoto",label:"现场用印照",hidden:r(()=>t()!="YUEXIU_ZZD_ORG"),required:!0},{...n(1,100,"*"),name:"signOverPhoto",label:"签约完成照",hidden:r(()=>t()!="YUEXIU_ZZD_ORG"),required:!0},{formType:"cell",value:"提示:1, 现场签字照: 法人代表/负责人正脸、持笔或持法人代表章, 与合同签署页同框拍摄; 2, 现场用印照: 法人代表/负责人正脸、持印, 与合同签署页同框拍摄; 3, 签署完成照: 法人代表/负责人正脸, 与合同、身份证、统一社会信用代码证/组织机构代码证（村委）或营业执照（集体经济组织）同框拍摄”",valueClass:"text-red !text-left",hidden:r(()=>t()!="YUEXIU_ZZD_ORG")}],O=[{formType:"input",name:"",readonly:!0,labelClass:"!w-0",valueClass:"!bg-[#f3f3f3] !pt-0",inputAlign:"center",class:"!bg-[#f3f3f3] !pt-0",inlineForm:[{slot:"input",formType:"button",text:"屋顶租赁合同下载",round:!0,size:"small",realValue:"TENANT",type:"primary",class:" !py-1 !bg-[#ffab30] text-white !border-0 w-[70%]",click(){const e={orderId:s()?.orderId,contractType:this.realValue},a=c.prod.app,l=u(`${a}/order/leaseContract/get-pdf`,e);window.open(l)}}],backfill(e){this.inlineForm[0].disabled=!e.TENANT}},{formType:"input",name:"",readonly:!0,labelClass:"!w-0",valueClass:"!bg-[#f3f3f3] !pt-0",inputAlign:"center",class:"!bg-[#f3f3f3] !pt-0",inlineForm:[{slot:"input",formType:"button",text:"买卖合同下载",realValue:"SELLER",round:!0,size:"small",type:"primary",class:" !py-1 !bg-[#ffab30] text-white !border-0 w-[70%]",click(){const e={orderId:s()?.orderId,contractType:this.realValue},a=c.prod.app,l=u(`${a}/order/leaseContract/get-pdf`,e);window.open(l)}}],backfill(e){this.inlineForm[0].disabled=!e.SELLER}},{formType:"input",name:"",readonly:!0,labelClass:"!w-0",valueClass:"!bg-[#f3f3f3] !pt-0",inputAlign:"center",realValue:"FACTORY",class:"!bg-[#f3f3f3] !pt-0",inlineForm:[{slot:"input",formType:"button",text:"运维合同下载",round:!0,size:"small",type:"primary",class:" !py-1 !bg-[#ffab30] text-white !border-0 w-[70%]",click(){const e={orderId:s()?.orderId,contractType:this.realValue},a=c.prod.app,l=u(`${a}/order/leaseContract/get-pdf`,e);window.open(l)}}],backfill(e){this.inlineForm[0].disabled=!e.FACTORY}}],le={__name:"contractAward",setup(e){const a=h({contractAward:D,signedContractForm:R,signedSiteForm:Y,button:O}),l=s();E(()=>{U()});async function U(){let p="";f.isUndefined(l,"online")?p=l.online?"general-investor/get-online-sign-rent-contract":"general-investor/get-offline-sign-rent-contract":p=I()?"order/get-lease-contract":"order/org/get-contract";const{data:b}=await y.get(u(p,f.omit(l,"title"))),o=await y.get("leaseContract/has-get-sign-btn");T(a,{...b,...o.data})}return(p,b)=>{const o=_;return k(),F(v,null,[m(o,{form:d(a).contractAward,class:"pt-3","group-class":"shadowC"},null,8,["form"]),m(o,{form:d(a).signedContractForm,class:"pt-3","group-class":"shadowC"},null,8,["form"]),m(o,{form:d(a).signedSiteForm,class:"pt-3","group-class":"shadowC"},null,8,["form"]),m(o,{form:d(a).button,class:"pt-3","group-class":"!bg-[#f8f8f8]"},null,8,["form"])],64)}}};export{le as default};
