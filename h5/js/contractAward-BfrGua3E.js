import{m as U,_ as w}from"./makeForm-CSPZ389Q.js";import{c as a,e as v,aX as C,al as F,N as p,u as m,F as D}from"./@vue-ts87NNlE.js";import{D as T,y as r,x as R,h as f,c as d,I as y,d as O,g as _,o as I,m as G,r as A,z as S,e as V}from"./index-DoomjHTc.js";import{q as u}from"./queryUrl-BTYYWpY7.js";import{l as n}from"./lodash-DhpMPSDc.js";import{m as s,b as q}from"./backfill-Cd9AIfra.js";import{m as o,a as c}from"./makeUpload-XopPofFX.js";import{a as k,b as Z}from"./vant-BjNCsb4u.js";import"./pinia-B_HOjTBS.js";import"./vue-router-Bw4qQE88.js";import"./@vueuse-QQdVrKV8.js";import"./xe-utils-DXe260hc.js";import"./@vue-office-GFDCm3nC.js";import"./vue-demi-BEcyFcst.js";import"./vue-RHKPHaPZ.js";import"./axios-B4uVmeYG.js";import"./@x-ui-vue3-CwLx_scX.js";import"./pinia-plugin-persist-J3Q2VqHx.js";import"./vue3-menus-CnNWMJEM.js";import"./vue3-photo-preview-CkWuweRQ.js";import"./vxe-table-QgdefRjh.js";import"./dom-zindex-GlLoxNk1.js";import"./@vant-NmgEisJw.js";import"./class-COLQ8iHP.js";const E=[()=>{const e=d();return n.has(e,"online")?e.online=="true"?[s("屋顶租赁合同签约"),{formType:"input",name:"actorStatus",label:"屋顶租赁合同",value:"",backfill(t){const l={A:"甲方",B:"乙方",W:"待签约",S:"已签约","-":"-"};this.value=n.get(t,`data${this.name}`,"").split("").reduce((h,g)=>h+=l[g],"")}},{formType:"input",label:"签署方式",value:"",name:"signeType",inputAlign:"right",onMounted(){this.label=r().includes("TYZF")?"签约方式":"签署方式"},backfill(t){},inlineForm:[{slot:"input",formType:"button",text:"短信签约",size:"mini",round:!0,class:"!mr-[10px] !text-[14px] !px-5 !py-4 !bg-[#f5f5f5] !border-0",async click(){(await f.get(u("general-investor/get-actor-rent-sign-url",{signer:"A",signType:"sms",orderId:e.orderId}))).code==200&&Z("已发送")}},{slot:"extra",formType:"button",text:"App签约",round:!0,size:"mini",class:" !text-[14px] !px-5 !py-4 !bg-[#f5f5f5] !border-0",async click(){const t=await f.get(u("general-investor/get-actor-rent-sign-url",{signer:"A",signType:"app",orderId:e.orderId}));t.code==200&&G(t.data.actorSignTaskEmbedUrl)}}]},{formType:"input",name:"contractUrl",label:"已签约合同查看",value:"合同查看",realValue:"",inputAlign:"right",readonly:!0,isLink:!0,click(){if(this.realValue)A.push({path:"/previewFile",query:{url:this.realValue,title:this.label,type:"pdf"}});else{const t=_("actorStatus","value");k(t||"没有合同可以查看")}},backfill(t){this.realValue=n.get(t,`data${this.name}.0`)}}]:[s("纸质合同电子模板下载"),{formType:"input",label:"下载纸质合同电子模板",name:"",value:"一键下载",isLink:!0,readonly:!0,click(){Z(this.value)}},{formType:"input",name:"",labelClass:"hidden",inputAlign:"center",inlineForm:[{slot:"input",formType:"button",text:"复制下载链接",round:!0,size:"mini",class:" !text-[14px] !px-5 !py-2 !bg-[#ffab30] !text-white !border-0",click(){Z(this.text)}}]}]:[{...s("合同签约"),hidden:a(()=>r()!="YUEXIU_ZZD")},{formType:"input",name:"leaseSigneUrl",label:"线上签约(跳转资方H5)",readonly:!0,hidden:a(()=>r()!="YUEXIU_ZZD"),realValue:"",backfill(t){this.realValue=t.leaseSigneUrl,this.value=""}},{formType:"cell",titleClass:" xCenter",hidden:a(()=>r()!="YUEXIU_ZZD"),inlineForm:[{slot:"title",formType:"button",url:"",text:"复制链接",round:!0,size:"small",type:"primary",class:" !py-1 !bg-[#fff] !text-[#ffab30] !border-0 w-[30%] ",click(){O(_("leaseSigneUrl").realValue)}}]},{...s("电子合同下载"),hidden:a(()=>r()!="YUEXIU_ZZD_ORG")},{formType:"input",name:"leaseSigneUrl",label:"线上签约(跳转资方H5)",hidden:a(()=>r()!="YUEXIU_ZZD_ORG"),isLink:!0,realValue:"",click(){I(this.realValue)},backfill(t){this.realValue=t.leaseSigneUrl,this.realValue&&(this.value="一键下载")}},{formType:"cell",titleClass:" xCenter",hidden:a(()=>r()!="YUEXIU_ZZD_ORG"),inlineForm:[{slot:"title",formType:"button",url:"",text:"复制下载链接",round:!0,size:"small",type:"primary",class:" !py-1 !bg-[#fff] !text-[#ffab30] !border-0 w-[30%] ",click(){k("资方暂未支持此功能, 请联系博通总部商务中心, 获取合同")}}]}]}],Y=[{...s("屋顶方已盖章合同扫描件上传"),hidden:a(()=>!r().includes("ZZD_ORG"))},{...o(999,100,"*"),backfill(e){n.bind(c,this)(e)},getParam(e){e[this.name]=e[this.name].map(t=>T(t))},name:"orgLegalIdAuthFile",label:"法人代表/负责人身份证明书(盖公章)",hidden:a(()=>!r().includes("ZZD_ORG")),required:!0,onMounted(){r()=="TYZF_ZZD_ORG"?(this.required=!1,this.label="法人代表/负责人身份证明书(选填)"):(this.label="法人代表/负责人身份证明书(盖公章)",this.required=!0)}},{...o(999,100,"*"),backfill(e){n.bind(c,this)(e)},getParam(e){e[this.name]=e[this.name].map(t=>T(t))},name:"orgSignatureChop",label:"法人组织预留印鉴",hidden:a(()=>!r().includes("ZZD_ORG")),required:!0,onMounted(){r()=="TYZF_ZZD_ORG"?(this.required=!1,this.label="法人组织预留印鉴(选填)"):(this.label="法人组织预留印鉴",this.required=!0)}},{formType:"cell",value:"提示: 盖公章、法人代表名字章、财务专用章。若确无财务专用章可不盖；若无法人代表名字章可手写签名",valueClass:"text-red !text-left",hidden:a(()=>!r().includes("ZZD_ORG"))},{...o(1,100,"*"),name:"contract",label:"屋顶方已盖章合同扫描件",hidden:a(()=>!r().includes("ZZD_ORG")),required:!0},{formType:"cell",value:"提示: 上传 “法人代表/负责人身份证明书”、“法人组织预留印鉴”、“屋顶方已盖章合同扫描件” 及签约现场系列照片成功后，项目详情里的 “合同签约” 环节右侧将显示绿色的 “已签约”",valueClass:"text-red !text-left",hidden:a(()=>!r().includes("ZZD_ORG")),onMounted(){r()=="YUEXIU_ZZD_ORG"?this.value="提示: 上传 “法人代表/负责人身份证明书”、“法人组织预留印鉴”、“屋顶方已盖章合同扫描件” 及签约现场系列照片成功后，项目详情里的 “合同签约” 环节右侧将显示绿色的 “已签约”":this.value="提示：上传“屋顶方已盖章合同扫描件”及签约现场系列照片成功后，项目详情里的“合同签约”环节右侧将显示绿色的“已签约”"}}],z=[{...s("双方已盖章合同扫描件上传"),hidden:a(()=>!r().includes("ZZD_ORG"))},{...o(1,100,"*"),name:"bothStampedContact",backfill(e){n.bind(c,this)(e)},label:"双方已盖章合同扫描件",hidden:a(()=>!r().includes("ZZD_ORG"))},{formType:"cell",value:"提示：业务人员拿到资方+屋顶方已盖章合同扫描件后，需上传至“双方已盖章合同扫描件”中，否则后期施工上传员无法提交施工审核",valueClass:"text-red !text-left",hidden:a(()=>!r().includes("ZZD_ORG"))}],X=[{...s("签约现场照片"),hidden:a(()=>!r().includes("ZZD_ORG"))},{...o(1,100,"*"),name:"signPhoto",backfill(e){n.bind(c,this)(e)},label:"现场签字照",hidden:a(()=>!r().includes("ZZD_ORG")),required:!0},{...o(1,100,"*"),name:"stampUsedPhoto",backfill(e){n.bind(c,this)(e)},label:"现场用印照",hidden:a(()=>!r().includes("ZZD_ORG")),required:!0},{...o(1,100,"*"),backfill(e){n.bind(c,this)(e)},name:"signOverPhoto",label:"签约完成照",hidden:a(()=>!r().includes("ZZD_ORG")),required:!0},{formType:"cell",value:"提示:1, 现场签字照: 法人代表/负责人正脸、持笔或持法人代表章, 与合同签署页同框拍摄; 2, 现场用印照: 法人代表/负责人正脸、持印, 与合同签署页同框拍摄; 3, 签署完成照: 法人代表/负责人正脸, 与合同、身份证、统一社会信用代码证/组织机构代码证（村委）或营业执照（集体经济组织）同框拍摄”",valueClass:"text-red !text-left",hidden:a(()=>!r().includes("ZZD_ORG"))},{formType:"input",name:"",labelClass:"hidden",inputAlign:"center",hidden:a(()=>!r().includes("ZZD_ORG")),inlineForm:[{slot:"input",formType:"button",text:"保存",round:!0,size:"small",class:" !text-[14px] !px-10 !py-2 !bg-[#ffab30] !text-white !border-0",async click(){const e=R();r().includes("ZZD_ORG")&&await f.post("order/org/put-contract",e)}}]}],L=[{formType:"input",name:"",readonly:!0,labelClass:"!w-0",valueClass:"!bg-[#f3f3f3] !pt-0",inputAlign:"center",class:"!bg-[#f3f3f3] !pt-0",inlineForm:[{slot:"input",formType:"button",text:"屋顶租赁合同下载",round:!0,size:"small",realValue:"TENANT",type:"primary",class:" !py-1 !bg-[#ffab30] text-white !border-0 w-[70%]",click(){const e={orderId:d()?.orderId,contractType:this.realValue},t=r()=="TYZF"?"/order/general-investor/download-rent-contract":"/order/leaseContract/get-pdf",l=y.mingjie.web;u(`${l}${t}`,e)}}],onMounted(){d().online=="true"?this.inlineForm[0].text="屋顶租赁合同下载":this.inlineForm[0].text="双方盖章租赁合同下载"},backfill(e){this.inlineForm[0].disabled=!e.TENANT}},{formType:"input",name:"",readonly:!0,labelClass:"!w-0",valueClass:"!bg-[#f3f3f3] !pt-0",inputAlign:"center",hidden:a(()=>!r().includes("YUEXIU")),class:"!bg-[#f3f3f3] !pt-0",inlineForm:[{slot:"input",formType:"button",text:"买卖合同下载",realValue:"SELLER",round:!0,size:"small",type:"primary",class:" !py-1 !bg-[#ffab30] text-white !border-0 w-[70%]",click(){const e={orderId:d()?.orderId,contractType:this.realValue},t=y.prod.app,l=u(`${t}/order/leaseContract/get-pdf`,e);window.open(l)}}],backfill(e){this.inlineForm[0].disabled=!e.SELLER}},{formType:"input",name:"",readonly:!0,labelClass:"!w-0",valueClass:"!bg-[#f3f3f3] !pt-0",inputAlign:"center",realValue:"FACTORY",class:"!bg-[#f3f3f3] !pt-0",hidden:a(()=>!r().includes("YUEXIU")),inlineForm:[{slot:"input",formType:"button",text:"运维合同下载",round:!0,size:"small",type:"primary",class:" !py-1 !bg-[#ffab30] text-white !border-0 w-[70%]",click(){const e={orderId:d()?.orderId,contractType:this.realValue},t=y.prod.app,l=u(`${t}/order/leaseContract/get-pdf`,e);window.open(l)}}],backfill(e){this.inlineForm[0].disabled=!e.FACTORY}}],me={__name:"contractAward",setup(e){const t=U({contractAward:E,signedContractForm:Y,signedSiteForm:X,bothSignedContractForm:z,button:L}),l=d();v(()=>{h()});async function h(){let b="";n.isUndefined(l,"online")?b=S()?"order/get-lease-contract":"order/org/get-contract":b=l.online?"general-investor/get-online-sign-rent-contract":"general-investor/get-offline-sign-rent-contract";const x=await f.get(u(b,n.omit(l,"title"))),i=await f.get("leaseContract/has-get-sign-btn");q(t,{...x,...i.data})}async function g(){location.reload()}return V({onRefresh:g}),(b,x)=>{const i=w;return C(),F(D,null,[p(i,{form:m(t).contractAward,class:"pt-3","group-class":"shadowC"},null,8,["form"]),p(i,{form:m(t).signedContractForm,class:"pt-3","group-class":"shadowC"},null,8,["form"]),p(i,{form:m(t).bothSignedContractForm,class:"pt-3","group-class":"shadowC"},null,8,["form"]),p(i,{form:m(t).signedSiteForm,class:"pt-3","group-class":"shadowC"},null,8,["form"]),p(i,{form:m(t).button,class:"pt-3","group-class":"!bg-[#f8f8f8]"},null,8,["form"])],64)}}};export{me as default};
