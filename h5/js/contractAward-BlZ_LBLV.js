import{m as w,_ as C}from"./makeForm-LXfxxl4j.js";import{c as l,e as v,aX as D,al as F,N as p,u as m,F as R}from"./@vue-ts87NNlE.js";import{B as _,w as t,v as O,h as b,c as f,p as I,H as y,C as G,g as x,l as T,x as A,e as V}from"./index-D0ldpvYI.js";import{q as u}from"./queryUrl-DaTGvNW7.js";import{l as n}from"./lodash-D-SkTV7p.js";import{m as s,b as E}from"./backfill-YTqXYfvZ.js";import{m as o,a as c}from"./makeUpload-BNh7QOMX.js";import{a as U,b as k}from"./vant-PdAvEskO.js";import"./pinia-B_HOjTBS.js";import"./vue-router-Bw4qQE88.js";import"./@vueuse-DLUPp4BS.js";import"./xe-utils-CfMIR_ol.js";import"./@vue-office-D7CPqAIZ.js";import"./vue-demi-BO4xsXkA.js";import"./vue-B7fnMq6U.js";import"./axios-B6xwUs71.js";import"./@x-ui-vue3-CwLx_scX.js";import"./pinia-plugin-persist-J3Q2VqHx.js";import"./vue3-menus-CnNWMJEM.js";import"./vue3-photo-preview-jb8ML41u.js";import"./vxe-table-CAWzlaHI.js";import"./dom-zindex-GlLoxNk1.js";import"./@vant-NmgEisJw.js";import"./class-COLQ8iHP.js";const S=[()=>{const e=f();return n.has(e,"online")?e.online=="true"?[s("屋顶租赁合同签约"),{formType:"input",name:"actorStatus",label:"屋顶租赁合同",value:"",backfill(r){const a={A:"甲方",B:"乙方",W:"待签约",S:"已签约","-":"-"};this.value=r.data[this.name].split("").reduce((d,h)=>d+=a[h],"")}},{formType:"input",label:"签署方式",value:"",name:"signeType",inputAlign:"right",backfill(r){},inlineForm:[{slot:"input",formType:"button",text:"短信签署",size:"mini",round:!0,class:"!mr-[10px] !text-[14px] !px-5 !py-4 !bg-[#f5f5f5] !border-0",async click(){await b.get(u("general-investor/get-actor-rent-sign-url",{signer:"A",signType:"sms",orderId:e.orderId}))}},{slot:"extra",formType:"button",text:"App",round:!0,size:"mini",class:" !text-[14px] !px-5 !py-4 !bg-[#f5f5f5] !border-0",async click(){await b.get(u("general-investor/get-actor-rent-sign-url",{signer:"A",signType:"app",orderId:e.orderId}))}}]},{formType:"input",name:"contractUrl",label:"已签约合同查看",value:"合同查看",realValue:"",inputAlign:"right",readonly:!0,isLink:!0,click(){this.realValue?T(this.realValue,this.label):U(x("actorStatus","value"))},backfill(r){this.realValue=r.data[this.name]?.[0]||""}}]:[s("纸质合同电子模板下载"),{formType:"input",label:"下载纸质合同电子模板",name:"",value:"一键下载",isLink:!0,readonly:!0,click(){k(this.value)}},{formType:"input",name:"",labelClass:"hidden",inputAlign:"center",inlineForm:[{slot:"input",formType:"button",text:"复制下载链接",round:!0,size:"mini",class:" !text-[14px] !px-5 !py-2 !bg-[#ffab30] !text-white !border-0",click(){k(this.text)}}]}]:[{...s("合同签约"),hidden:l(()=>t()!="YUEXIU_ZZD")},{formType:"input",name:"leaseSigneUrl",label:"线上签约(跳转资方H5)",readonly:!0,hidden:l(()=>t()!="YUEXIU_ZZD"),realValue:"",backfill(r){this.realValue=r.leaseSigneUrl,this.value=""}},{formType:"cell",titleClass:" xCenter",hidden:l(()=>t()!="YUEXIU_ZZD"),inlineForm:[{slot:"title",formType:"button",url:"",text:"复制链接",round:!0,size:"small",type:"primary",class:" !py-1 !bg-[#fff] !text-[#ffab30] !border-0 w-[30%] ",click(){G(x("leaseSigneUrl").realValue)}}]},{...s("电子合同下载"),hidden:l(()=>t()!="YUEXIU_ZZD_ORG")},{formType:"input",name:"leaseSigneUrl",label:"线上签约(跳转资方H5)",hidden:l(()=>t()!="YUEXIU_ZZD_ORG"),isLink:!0,realValue:"",click(){T(this.realValue)},backfill(r){this.realValue=r.leaseSigneUrl,this.realValue&&(this.value="一键下载")}},{formType:"cell",titleClass:" xCenter",hidden:l(()=>t()!="YUEXIU_ZZD_ORG"),inlineForm:[{slot:"title",formType:"button",url:"",text:"复制下载链接",round:!0,size:"small",type:"primary",class:" !py-1 !bg-[#fff] !text-[#ffab30] !border-0 w-[30%] ",click(){U("资方暂未支持此功能, 请联系博通总部商务中心, 获取合同")}}]}]}],Y=[{...s("屋顶方已盖章合同扫描件上传"),hidden:l(()=>!t().includes("ZZD_ORG"))},{...o(999,100,"*"),backfill(e){n.bind(c,this)(e)},getParam(e){e[this.name]=e[this.name].map(r=>_(r))},name:"orgLegalIdAuthFile",label:"法人代表/负责人身份证明书(盖公章)",hidden:l(()=>!t().includes("ZZD_ORG")),required:!0,onMounted(){t()=="TYZF_ZZD_ORG"?(this.required=!1,this.label="法人代表/负责人身份证明书(选填)"):(this.label="法人代表/负责人身份证明书(盖公章)",this.required=!0)}},{...o(999,100,"*"),backfill(e){n.bind(c,this)(e)},getParam(e){e[this.name]=e[this.name].map(r=>_(r))},name:"orgSignatureChop",label:"法人组织预留印鉴",hidden:l(()=>!t().includes("ZZD_ORG")),required:!0,onMounted(){t()=="TYZF_ZZD_ORG"?(this.required=!1,this.label="法人组织预留印鉴(选填)"):(this.label="法人组织预留印鉴",this.required=!0)}},{formType:"cell",value:"提示: 盖公章、法人代表名字章、财务专用章。若确无财务专用章可不盖；若无法人代表名字章可手写签名",valueClass:"text-red !text-left",hidden:l(()=>!t().includes("ZZD_ORG"))},{...o(1,100,"*"),name:"contract",label:"屋顶方已盖章合同扫描件",hidden:l(()=>!t().includes("ZZD_ORG")),required:!0},{formType:"cell",value:"提示: 上传 “法人代表/负责人身份证明书”、“法人组织预留印鉴”、“屋顶方已盖章合同扫描件” 及签约现场系列照片成功后，项目详情里的 “合同签约” 环节右侧将显示绿色的 “已签约”",valueClass:"text-red !text-left",hidden:l(()=>!t().includes("ZZD_ORG")),onMounted(){t()=="YUEXIU_ZZD_ORG"?this.value="提示: 上传 “法人代表/负责人身份证明书”、“法人组织预留印鉴”、“屋顶方已盖章合同扫描件” 及签约现场系列照片成功后，项目详情里的 “合同签约” 环节右侧将显示绿色的 “已签约”":this.value="提示：上传“屋顶方已盖章合同扫描件”及签约现场系列照片成功后，项目详情里的“合同签约”环节右侧将显示绿色的“已签约”"}}],q=[{...s("双方已盖章合同扫描件上传"),hidden:l(()=>!t().includes("ZZD_ORG"))},{...o(1,100,"*"),name:"bothStampedContact",backfill(e){n.bind(c,this)(e)},label:"双方已盖章合同扫描件",hidden:l(()=>!t().includes("ZZD_ORG"))},{formType:"cell",value:"提示：业务人员拿到资方+屋顶方已盖章合同扫描件后，需上传至“双方已盖章合同扫描件”中，否则后期施工上传员无法提交施工审核",valueClass:"text-red !text-left",hidden:l(()=>!t().includes("ZZD_ORG"))}],X=[{...s("签约现场照片"),hidden:l(()=>!t().includes("ZZD_ORG"))},{...o(1,100,"*"),name:"signPhoto",backfill(e){n.bind(c,this)(e)},label:"现场签字照",hidden:l(()=>!t().includes("ZZD_ORG")),required:!0},{...o(1,100,"*"),name:"stampUsedPhoto",backfill(e){n.bind(c,this)(e)},label:"现场用印照",hidden:l(()=>!t().includes("ZZD_ORG")),required:!0},{...o(1,100,"*"),backfill(e){n.bind(c,this)(e)},name:"signOverPhoto",label:"签约完成照",hidden:l(()=>!t().includes("ZZD_ORG")),required:!0},{formType:"cell",value:"提示:1, 现场签字照: 法人代表/负责人正脸、持笔或持法人代表章, 与合同签署页同框拍摄; 2, 现场用印照: 法人代表/负责人正脸、持印, 与合同签署页同框拍摄; 3, 签署完成照: 法人代表/负责人正脸, 与合同、身份证、统一社会信用代码证/组织机构代码证（村委）或营业执照（集体经济组织）同框拍摄”",valueClass:"text-red !text-left",hidden:l(()=>!t().includes("ZZD_ORG"))},{formType:"input",name:"",labelClass:"hidden",inputAlign:"center",hidden:l(()=>!t().includes("ZZD_ORG")),inlineForm:[{slot:"input",formType:"button",text:"保存",round:!0,size:"small",class:" !text-[14px] !px-10 !py-2 !bg-[#ffab30] !text-white !border-0",async click(){const e=O();console.log(e,3333),t()=="YUEXIU_ZZD_ORG"&&await b.post("order/org/put-contract",e)}}]}],z=[{formType:"input",name:"",readonly:!0,labelClass:"!w-0",valueClass:"!bg-[#f3f3f3] !pt-0",inputAlign:"center",class:"!bg-[#f3f3f3] !pt-0",inlineForm:[{slot:"input",formType:"button",text:"屋顶租赁合同下载",round:!0,size:"small",realValue:"TENANT",type:"primary",class:" !py-1 !bg-[#ffab30] text-white !border-0 w-[70%]",click(){const e={orderId:f()?.orderId,contractType:this.realValue},r=t()=="TYZF"?"/order/general-investor/download-rent-contract":"/order/leaseContract/get-pdf",a=y.mingjie.web,d=u(`${a}${r}`,e);console.log(d,333),I({func:"openPdf",url:d})}}],backfill(e){this.inlineForm[0].disabled=!e.TENANT}},{formType:"input",name:"",readonly:!0,labelClass:"!w-0",valueClass:"!bg-[#f3f3f3] !pt-0",inputAlign:"center",hidden:l(()=>!t().includes("YUEXIU")),class:"!bg-[#f3f3f3] !pt-0",inlineForm:[{slot:"input",formType:"button",text:"买卖合同下载",realValue:"SELLER",round:!0,size:"small",type:"primary",class:" !py-1 !bg-[#ffab30] text-white !border-0 w-[70%]",click(){const e={orderId:f()?.orderId,contractType:this.realValue},r=y.prod.app,a=u(`${r}/order/leaseContract/get-pdf`,e);window.open(a)}}],backfill(e){this.inlineForm[0].disabled=!e.SELLER}},{formType:"input",name:"",readonly:!0,labelClass:"!w-0",valueClass:"!bg-[#f3f3f3] !pt-0",inputAlign:"center",realValue:"FACTORY",class:"!bg-[#f3f3f3] !pt-0",hidden:l(()=>!t().includes("YUEXIU")),inlineForm:[{slot:"input",formType:"button",text:"运维合同下载",round:!0,size:"small",type:"primary",class:" !py-1 !bg-[#ffab30] text-white !border-0 w-[70%]",click(){const e={orderId:f()?.orderId,contractType:this.realValue},r=y.prod.app,a=u(`${r}/order/leaseContract/get-pdf`,e);window.open(a)}}],backfill(e){this.inlineForm[0].disabled=!e.FACTORY}}],pe={__name:"contractAward",setup(e){const r=w({contractAward:S,signedContractForm:Y,signedSiteForm:X,bothSignedContractForm:q,button:z}),a=f();v(()=>{d()});async function d(){let g="";n.isUndefined(a,"online")?g=A()?"order/get-lease-contract":"order/org/get-contract":g=a.online?"general-investor/get-online-sign-rent-contract":"general-investor/get-offline-sign-rent-contract";const Z=await b.get(u(g,n.omit(a,"title"))),i=await b.get("leaseContract/has-get-sign-btn");E(r,{...Z,...i.data})}async function h(){location.reload()}return V({onRefresh:h}),(g,Z)=>{const i=C;return D(),F(R,null,[p(i,{form:m(r).contractAward,class:"pt-3","group-class":"shadowC"},null,8,["form"]),p(i,{form:m(r).signedContractForm,class:"pt-3","group-class":"shadowC"},null,8,["form"]),p(i,{form:m(r).bothSignedContractForm,class:"pt-3","group-class":"shadowC"},null,8,["form"]),p(i,{form:m(r).signedSiteForm,class:"pt-3","group-class":"shadowC"},null,8,["form"]),p(i,{form:m(r).button,class:"pt-3","group-class":"!bg-[#f8f8f8]"},null,8,["form"])],64)}}};export{pe as default};
