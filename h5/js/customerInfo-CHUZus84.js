import{_ as G}from"./vBtn-h-mmgtbW.js";import{x as N,b as W,o as z,j as H}from"./vant-DL9g20lT.js";import{m as X,_ as K}from"./makeForm-C_uyyvx9.js";import{m as T,b as P}from"./backfill-hh-glB-L.js";import{i as n,a as s,c as o,v as Z}from"./Biztype-DPM88l-Q.js";import{b as c,m}from"./makeSelect-BzGYyrzS.js";import{s as i,b as B,g as S,h as p,c as g,j as Q,w as J,d as _,e as ee,n as ae,x as te}from"./index-NPFU1_kq.js";import{l as y}from"./lodash-C-AG1eJN.js";import{m as h}from"./makeUpload-FhoYjxox.js";import{a as E}from"./arrayToVantColumns-BXijbtnA.js";import{g as L}from"./getArea-CLkmfVQ_.js";import{x as I}from"./xe-utils-BM3aD2L3.js";import{w as D}from"./watchItem-DrEA5LQt.js";import{q as x}from"./queryUrl-ggRt1bhs.js";import{c as l,e as le,Z as q,_ as R,N as v,u as C,a8 as O,F as M,a2 as U,a4 as re,a5 as oe}from"./@vue-BhOIXUCP.js";import"./@vant-D2Uub16A.js";import"./class-rRG2y2aF.js";import"./pinia-CQ-jtR3-.js";import"./vue-demi-Dq6ymT-8.js";import"./vue-router-XNYRUkAR.js";import"./@vueuse-BaMGbt4d.js";import"./axios-B6xwUs71.js";import"./@x-ui-vue3-bC99Tnvx.js";import"./pinia-plugin-persist-J3Q2VqHx.js";import"./vue3-menus-VHbn-zkx.js";import"./vue3-photo-preview-Dedu722r.js";import"./vxe-table-BBegQXiE.js";import"./dom-zindex-GlLoxNk1.js";import"./dayjs-Bof1u0Bp.js";const $={getData:{YUEXIU_ZZD:"order/get-customer-info",YUEXIU_ZZD_ORG:"order/org/get-customer-info",TYZF_ZZD:"general-investor/get-customer-np",TYZF_ZZD_ORG:"general-investor/get-customer-org"},saveData:{YUEXIU_ZZD:"order/put-customer-info",YUEXIU_ZZD_ORG:"order/org/put-customer-info",TYZF_ZZD:"general-investor/put-customer-np",TYZF_ZZD_ORG:"general-investor/put-customer-org"}},ne=[T("出租人信息"),{formType:"input",label:"姓名",name:"name",value:"",hidden:l(()=>s()),required:!0,placeholder:"带过来的保存的信息",readonly:!0,onMounted(){n()&&(this.placeholder="手动输入或扫描证件",this.readonly=!1)}},{formType:"input",label:"证件类型",name:"idCardType",hidden:l(()=>!n()||s()),required:!0,readonly:!0,value:"身份证",...c(),...m("idCardType",[{text:"身份证",value:"ID_CARD"},{text:"护照",value:"PASSPORT"},{text:"军官证",value:"MILITARY_ID"},{text:"户口簿",value:"RESIDENCE_BOOKLET"},{text:"士兵证",value:"SOLDBUCH"},{text:"港澳通行证",value:"HM_PASS"},{text:"台湾同胞来往内地通行证",value:"TAIWAN_PASS"},{text:"外国人居留证",value:"ALIEN_RESIDENCE_PERMIT"},{text:"警官证",value:"POLICE_ID"}]),onMounted(){n()&&(this.placeholder="请选择证件类型")}},{formType:"input",label:"证件号码",hidden:l(()=>s()),name:"idNumber",value:"",required:!0,readonly:!0,placeholder:"带过来的保存的信息",backfill(e){this.value=e[this.name],i("cardBukle",a=>{a.tabs[1].inlineForm[2].value=e[this.name],a.tabs[1].inlineForm[3].value=y.get(e,"data.cusBankCardTwo.corpCommSerno"),a.tabs[1].inlineForm[4].value=y.get(e,"data.cusBankCardTwo.result"),a.tabs[2].inlineForm[2].value=e[this.name],a.tabs[2].inlineForm[3].value=y.get(e,"data.cusBankCardTwo.corpCommSerno"),a.tabs[2].inlineForm[4].value=y.get(e,"data.cusBankCardTwo.result"),a.tabs[0].inlineForm.forEach(t=>{t.value=y.get(e,`data.data${t.name}`)||t.value})})},onMounted(){n()&&(this.placeholder="手动输入或扫描证件",this.readonly=!1)}},{formType:"cell",title:"证件照片",name:"",hidden:l(()=>s()),readonly:!0,titleClass:"xCenter text-[16px]"},{...h(1,50),required:!0,label:"证件正面(头像面)",name:"idCardFront",hidden:l(()=>s())},{...h(1,50),required:!0,label:"证件反面(国徽面)",name:"idCardBack",hidden:l(()=>s())},{formType:"input",label:"出租人电话",name:"phone",value:"",required:!0,hidden:l(()=>s()),readonly:!0,placeholder:"带过来的保存的信息",onMounted(){n()&&(this.placeholder="请输入",this.readonly=!1)}},{formType:"input",label:"婚姻信息",value:"",name:"maritalStatus",placeholder:"请选择婚姻信息",hidden:l(()=>n()||s()),...c(),...m("maritalStatus",[{text:"已婚",value:"已婚"},{text:"未婚",value:"未婚"}])},{formType:"input",label:"教育程度",name:"educationalBackground",placeholder:"请选择教育程度",value:"",hidden:l(()=>n()||s()),...c(),...m("educationalBackground",[{text:"初等教育",value:"初等教育"},{text:"中等教育",value:"中等教育"},{text:"高等教育",value:"高等教育"}])},{formType:"input",label:"职业",name:"career",placeholder:"请选择职业",value:"",hidden:l(()=>n()||s()),...c(),...m("career",E(["国家机关、党群组织、企业、事业单位负责人","专业技术人员","办事人员和有关人员","商业、服务业人员","农、林、牧、渔、水利业生产人员","生产、运输设备操作人员及有关人员","军人","不便分类的其他从业人员"]))},{formType:"input",label:"家庭经济情况",name:"economy",placeholder:"请选择家庭经济情况",value:"",hidden:l(()=>n()||s()),...c(),...m("economy",E(["赤贫","很穷","穷","小康","中产","高产","小富","中富","巨富"]))},{formType:"input",label:"健康情况",name:"health",placeholder:"请选择健康情况",value:"",hidden:l(()=>n()||s()),...c(),...m("health",E(["健康","亚健康","疾病"]))},{formType:"input",label:"组织全称",name:"orgName",value:"",hidden:l(()=>o()),required:!0,placeholder:"带过来的保存的信息"},{formType:"input",label:"登记注册码类型",name:"regType",hidden:l(()=>!n()||o()),required:!0,readonly:!0,value:"",...c(),...m("regType",[{text:"统一社会信用代码/营业执照",value:"07"},{text:"组织机构代码",value:"30"}])},{formType:"input",label:"登记注册码",name:"regNo",value:"",hidden:l(()=>o()),required:!0,placeholder:"带过来的保存的信息"},{formType:"input",...c(),...m("position",[{value:"1",text:"法人代表/非法人组织负责人"}]),label:"负责人类型",name:"position",placeholder:"请选择负责人类型",required:!0,hidden:l(()=>!n()||o())},{formType:"input",label:"负责人姓名",name:"name",placeholder:"请输入负责人姓名",hidden:l(()=>!n()||o()),value:"",required:!0},{formType:"input",label:"负责人证件类型",name:"certType",hidden:l(()=>!n()||o()),required:!0,readonly:!0,value:"身份证",...c(),...m("certType",[{text:"身份证",value:"ID_CARD"},{text:"护照",value:"PASSPORT"},{text:"军官证",value:"MILITARY_ID"},{text:"户口簿",value:"RESIDENCE_BOOKLET"},{text:"士兵证",value:"SOLDBUCH"},{text:"港澳通行证",value:"HM_PASS"},{text:"台湾同胞来往内地通行证",value:"TAIWAN_PASS"},{text:"外国人居留证",value:"ALIEN_RESIDENCE_PERMIT"},{text:"警官证",value:"POLICE_ID"}])},{formType:"input",label:"负责人证件号码",name:"certCode",placeholder:"扫描证件号码或手动输入",hidden:l(()=>!n()||o()),value:"",required:!0},{formType:"input",label:"法人代表手机号码",name:"cellPhone",value:"",hidden:l(()=>o()),required:!0,placeholder:"带过来的保存的信息"},{formType:"input",label:"家庭住址区域",name:"houseAddr",readonly:!0,required:!0,hidden:l(()=>!n()||o()),placeholder:"",middle:{value:[],provinceCode:"",cityCode:"",areaCode:""},isLink:!0,onMounted(){s()&&(this.label="注册地址区域")},click(){const e=B();this.inlineForm[0].show=e.btns.canEdit},getParam(e){const[a,t,r]=this.middle.value;e.houseAddr={provinceCode:a||"",cityCode:t||"",areaCode:r||""}},async backfill(e){const a=S(this.name,"inlineForm.0.inlineForm.0"),t=e.houseAddr?.areaCode||e.houseAddr?.cityCode;a.options=await L(),i(this.name,"inlineForm.0.inlineForm.0.value",t);const r=I.searchTree(a.options,u=>u.value==t),d=I.toTreeArray(r);a.finish({selectedOptions:d,value:t})},inlineForm:[{slot:"button",formType:"popup",show:!1,round:!0,name:"houseAddrPop",position:"bottom",inlineForm:[{slot:"default",formType:"cascader",title:"请选择所在地区",options:[],value:"",close(){i("houseAddr","inlineForm.0.show",!1)},finish(e){const a=e.selectedOptions.map(r=>r.text).join("/"),t=e.selectedOptions.map(r=>r.value);y.isObject(e.value)||(this.value=e.value),i("houseAddr",a),i("houseAddr","middle.value",t),i("houseAddr","inlineForm.0.show",!1)}}]}]},{formType:"input",label:"工商注册地址",name:"detailedAddress",placeholder:"提示: 此地址是法人组织的工商登记注册地址, 可能和拟安装光伏的建筑详细地址不一致, 需按统一社会信用代码/组织机构代码证/营业执照上的地址填写",required:!0,hidden:l(()=>!n()||o()),value:"",inputAlign:"left",errorMessage:"提示: 此地址是法人组织的工商登记注册地址, 可能和拟安装光伏的建筑详细地址不一致, 需按统一社会信用代码/组织机构代码证/营业执照上的地址填写",getParam(e){e.houseAddr.detailedAddress=this.value,delete e.detailedAddress},backfill(e){this.value=e.houseAddr?.detailedAddress||""}},{formType:"cell",title:"法人证件照",name:"",hidden:l(()=>o()),readonly:!0,titleClass:"xCenter text-[16px]"},{...h(1,50),name:"orgLegalIdCardFront",label:"法人代表证件正面(头像面)",hidden:l(()=>o()),required:!0},{...h(1,50),name:"orgLegalIdCardBack",label:"法人代表证件反面(国徽面)",hidden:l(()=>o()),required:!0},{...h(1,100),name:"orgLicense",hidden:l(()=>o()),label:"统一社会信用代码证/组织机构代码证/营业执照",required:!0},{formType:"cell",value:"提示1: 出租方为村民委员会, 上传统一社会信用代码证/组织机构代码证; 出租方为村经济联合社, 上传农村集体经济组织登记证/营业执照",valueClass:"text-red !text-left",hidden:l(()=>o())},{...h(999,100),name:"resolutionPaper",hidden:l(()=>o()),label:"村民代表大会决议书",required:!0,onMounted(){n()&&(this.required=!1,this.label="村民代表大会决议书(选填)")}},{...h(999,100),name:"committeeRegulation",hidden:l(()=>o()),label:"村委议事章程(选填)",required:!1},{...h(999,100),name:"orgLandUseCertificate",hidden:l(()=>o()),label:"集体土地使用证",required:!0,onMounted(){n()&&(this.required=!1,this.label="集体土地使用证(选填)")}},{...h(999,100),name:"orgLandUseCertificateAuthFile",hidden:l(()=>o()),label:"产权证明",required:!0},{formType:"cell",value:"提示2: 支持不动产证书/不动产登记部门查册证明/国土资源管理部门确权文件(加盖村委章)/上一级政府证明(加盖村委章)",valueClass:"text-red !text-left",hidden:l(()=>o())},{formType:"input",label:"省市区",name:"houseAddr",hidden:!1,isLink:!0,readonly:!0,value:"",required:!0,placeholder:"请选择所在地区",middle:{value:[],provinceCode:"",cityCode:"",areaCode:""},onMounted(){n()&&o()&&(this.placeholder="请选择房屋所在地区")},click(){const e=B();this.inlineForm[0].show=e.btns.canEdit},getParam(e){const[a,t,r]=this.middle.value;y.merge(e,{provinceCode:a,cityCode:t,areaCode:r})},async backfill(e){const a=S(this.name,"inlineForm.0.inlineForm.0");a.options=await L();const t=e.areaCode||e.cityCode;i(this.name,"inlineForm.0.inlineForm.0.value",t);const r=I.searchTree(a.options,u=>u.value==t),d=I.toTreeArray(r);a.finish({selectedOptions:d,value:t})},inlineForm:[{slot:"extra",formType:"popup",show:!1,round:!0,name:"houseAddrPop",position:"bottom",inlineForm:[{slot:"default",formType:"cascader",title:"请选择所在地区",options:[],value:"",close(){i("houseAddr","inlineForm.0.show",!1)},finish(e){const a=e.selectedOptions.map(r=>r.text).join("/"),t=e.selectedOptions.map(r=>r.value);this.value=e.value,i("houseAddr",a),i("houseAddr","middle.value",t),i("houseAddr","inlineForm.0.show",!1)}}]}]},{formType:"input",label:"详细地址",name:"installationAddress",inputAlign:"left",placeholder:"(从省/自治区/直辖市/特别行政区 开始写)",required:!0,hidden:!1,value:"",onMounted(){}},{formType:"cell",value:"提示: 若无不动产权证/房产证/宅基地证, 需和村委开具的房屋权属证明地址完全一致(从省/自治区/直辖市/特别行政区 开始写)",valueClass:"text-red !text-left",hidden:l(()=>s())},{formType:"cell",value:"提示: 需对照不动产权证/集体土地使用证/查册证明/确权文件 上的建筑地址填写, 必须从省/自治区/直辖市/特别行政区 开始写",valueClass:"text-red !text-left",hidden:l(()=>o())}],ie=[{...T("租金收益银行卡"),onMounted(){this.title=o()?"租金收益银行卡":"租金收益对公账户"}},{...h(1,100,"*"),required:!0,label:"银行卡-卡号面",name:"bankCardFront",hidden:l(()=>s())},{...h(999,100),required:!0,label:"对公账户信息(盖公章)",name:"publicAccountInformation",hidden:l(()=>o())},{...h(999,100,"*"),required:!0,label:"银行印鉴留样原件",name:"bankSealSample",hidden:l(()=>o())},{formType:"input",name:"bankAccount",label:"账户名",placeholder:"请输入账户名",required:!0,value:"",onMounted(){n()&&(this.placeholder='自动获取"姓名"/"组织全称"',this.readonly=!0)},backfill(){D(o()?"name":"orgName",e=>{this.value=e})}},{formType:"input",name:"bankCardNumber",label:o()?"银行卡号":"银行账号",placeholder:"识别引擎自动填写或手动输入",required:!0,value:"",input(e){const a=e.target.value.replace(/ /g,"");this.value=a.replace(/(.{4})/g,"$1 ");const t=this.value.length;e.target.focus(),e.target.selectionStart=t,e.target.selectionEnd=t}},{formType:"input",name:"bankName",label:"开户行名称",placeholder:"识别引擎自动填写或手动选择",required:!0,value:"",readonly:!0,isLink:!0,click(){const e=B();this.inlineForm[0].show=e.btns.canEdit,this.inlineForm[0].inlineForm[0].inlineForm[0].updateValue(this.value)},backfill(e){this.value=e[this.name],i("accountOpeningBranch",a=>{a.inlineForm[0].inlineForm[0].inlineForm[0].value=this.value})},inlineForm:[{slot:"extra",formType:"popup",class:"h-[100vh] w-[100vw]",position:"left",closeable:!0,show:!1,inlineForm:[{slot:"default",formType:"cascader",title:"银行",options:[],closeable:!1,className:"border-b h-full flex flex-col",value:"",finish(e){i("bankName",e.value),i("bankName","inlineForm.0.show",!1)},inlineForm:[{slot:"options-top",formType:"input",inputAlign:"left",placeholder:"搜索",rightIcon:"search",clearable:!0,async updateValue(e){let a=e?`lease-bank/bank?queryTag=${e}`:"lease-bank/bank";const{data:t}=await p.get(a);i("bankName","inlineForm.0.inlineForm.0.options",E(t))}}]}]}]},{formType:"input",name:"accountOpeningBranch",label:"开户支行",placeholder:"请选择开户支行",required:!0,value:"",realValue:"",readonly:!0,isLink:!0,click(){const e=B();this.inlineForm[0].show=e.btns.canEdit,i("bankName",a=>{this.inlineForm[0].inlineForm[0].inlineForm[0].updateValue(a.value)})},inlineForm:[{slot:"extra",formType:"popup",class:"h-[100vh] w-[100vw]",position:"left",closeable:!0,show:!1,inlineForm:[{slot:"default",formType:"cascader",title:"选择开户支行",options:[],closeable:!1,className:"border-b h-full flex flex-col",value:"",finish(e){const a=e.selectedOptions[0];i("accountOpeningBranch","realValue",a.text),i("accountOpeningBranch","value",a.text),i("accountOpeningBranch","inlineForm.0.show",!1),i("jointLineNumber","value",a.value)},inlineForm:[{slot:"options-top",formType:"input",inputAlign:"left",placeholder:"搜索",rightIcon:"search",clearable:!0,async updateValue(e){const a=S("bankName").value;let t=e?`lease-bank/sub-bank?queryTag=${e}&name=${a}`:`lease-bank/sub-bank?name=${a}`;const{data:r}=await p.get(t);i("accountOpeningBranch","inlineForm.0.inlineForm.0.options",r.map(d=>({text:d.bankFullName,value:d.bankNum})))}}]}]}]},{formType:"input",label:"联行号",required:!0,value:"",readonly:!0,placeholder:"自动填充",name:"jointLineNumber"}],ue=[T("备案类型"),{formType:"input",label:"备案类型",name:"recordType",required:!0,placeholder:"请选择备案类型",value:"",...c(),...m("recordType",[{text:"项目公司备案",value:"RECORD_LEASE_PC"},{text:"非项目公司备案(屋顶方备案)",value:"RECORD_NP",disabled:n()?!0:s()}]),errorMessage:'提示: 必须先选择 "备案类型" 才能选择 "项目公司" 和 "产品地区"',onMounted(){n()&&(this.realValue="RECORD_LEASE_PC",this.value="项目公司备案")}}],se=[T("承租人"),{formType:"input",label:"项目公司",name:"projectCompany",value:"",required:!0,placeholder:"请选择项目公司",...c(),...m("projectCompany",[],"dynamic"),backfill(e){D("recordType",async a=>{const t=x("leaseLessor/getAuth",{pageNum:1,pageSize:999,orderId:g()?.orderId,recordType:a}),{data:r}=await p.get(t),d=r.map(u=>({text:`${u.code}, ${u.companyName}, ${u.areaId}`,value:u.code,disabled:u.disabled}));this.makeSelect(e[this.name],d)})}}],de=[T("安装地区"),{formType:"input",label:"产品地区",name:"productWithArea",value:"",realValue:"",required:!0,placeholder:"请选择产品方案",columns:[],...c(),...m("productWithArea",[],"dynamic"),async backfill(e){D("recordType",async a=>{const t=x("/leasePrjProjectProduct/get",{isPage:!1,type:a,orderId:g()?.orderId}),{data:r}=await p.get(t),d=r.map(u=>({text:`${u.code}, ${u.areaType}, ${u.area}`,value:u.code,disabled:u.disabled}));this.makeSelect(e[this.name],d)})}}],ce=[{customSlot:"cardBukle",name:"cardBukle",show:l(()=>{const e=S("recordType","realValue");return o()&&e=="RECORD_NP"}),tabs:[{value:"info",title:"二类卡信息",inlineForm:[T("二类银行卡划扣"),{formType:"input",label:"二类卡号",value:"",inputAlign:"right",name:"accountNo",placeholder:"申请开户接口返回"},{formType:"input",label:"二类卡开户行名称",readonly:!0,inputAlign:"right",value:"中国工商银行股份有限公司",name:"bankNameTwo",placeholder:"申请开户接口返回"},{formType:"input",label:"二类卡开户支行",inputAlign:"right",readonly:!0,value:"中国工商银行股份有限公司广州南方支行",name:"bankBranch",placeholder:"申请开户接口返回"},{formType:"input",label:"二类卡联行号",inputAlign:"right",readonly:!0,value:"102581000353",name:"interBranchNumber",placeholder:"申请开户接口返回"}]},{value:"openAccount",title:"二类卡开户申请",inlineForm:[T("二类卡开户申请"),{formType:"input",label:"App直接申请开户",inputAlign:"right",value:"",isLink:!0,readonly:!0,name:"link",switch:"App直接申请开户",placeholder:"若有数据即可点击复制链接",async click(){const e=g(),a=await p.post(x("/bank_card_two/apply-open",{orderId:e.orderId}));if(this.value=a.data,a.code==5e3)throw new Error(a.msg);N({title:"二类卡开户申请",message:`只能二选一 ! 
 只能二选一 ! 
 只能二选一 !`,confirmButtonText:"App直接申请",cancelButtonText:"复制申请链接",confirmButtonColor:"#ffab30"}).then(()=>{Q(this.value)}).catch(()=>{J(this.value)})}},{formType:"input",label:"身份证号",value:"",inputAlign:"right",readonly:!0,name:"idNumber",placeholder:"申请开户接口返回"},{formType:"input",inputAlign:"right",label:"合作方交易单号",value:"",readonly:!0,name:"corpCommSerno",placeholder:"申请开户接口返回"},{formType:"input",inputAlign:"right",label:"申请结果",value:"",readonly:!0,name:"result",placeholder:"申请开户接口返回"},{formType:"input",name:"searchCard",inputAlign:"center",inlineForm:[{slot:"input",formType:"button",class:" !text-[12px] !px-5 !py-4 !bg-[#ffab30] !border-0 !text-white",round:!0,size:"mini",text:"查询结果",async click(){const e=g(),a=await p.get(x("/bank_card_two/query-status",{orderId:e.orderId}));i("cardBukle",t=>{t.tabs[1].inlineForm[3].value=a.data.corpCommSerno,t.tabs[1].inlineForm[4].value=a.data.result,t.tabs[0].inlineForm.forEach(r=>{r.value=y.get(a,`data.data${r.name}`)||r.value})}),a.code==5e3}}]},{formType:"input",inlineForm:[{slot:"input",rows:99,formType:"text",content:`提示：
 1、必须先选择项目公司和产品地区, 才能进行二类卡开户申请 
 2、切勿多次点击“申请开户”按钮。每次点击都会再次产生1条新的、不同的申请链接, 导致屋顶方对旧链接的操作变成无用功, 最终开户失败
 3、复制开户申请链接发给屋顶方, 或者在App直接申请开户, 链接有效期为30分钟。超过30分钟且未完成开户申请, 需要重新点击“申请开户”按钮, 生成新的开户申请链接再进行操作`,class:"text-red"}]}]},{value:"closeAccount",title:"二类卡销户申请",inlineForm:[T("二类卡销户申请"),{formType:"input",label:"申请销户",inputAlign:"right",value:"",name:"link",switch:"App直接申请销户",placeholder:"若有数据即可点击复制链接",inlineForm:[{slot:"button",formType:"button",text:"申请销户",size:"mini",className:"px-2 center !bg-[#ffab30] text-white rounded-2xl",async click(){await N({title:"二类卡销户申请",message:"二类卡销户申请",confirmButtonText:"确认申请销户",cancelButtonText:"取消申请",confirmButtonColor:"#ffab30",closeOnClickOverlay:!0})&&await N({title:"请再次确认是否销户",message:"请与屋顶方确认后再操作",confirmButtonText:"确认销户",cancelButtonText:"取消销户",confirmButtonColor:"#ffab30",closeOnClickOverlay:!0})&&(await p.post("/bank_card_two/apply-close",{orderId:g().orderId})).code==200&&W("销户成功")}}]},{formType:"input",label:"身份证号",value:"",inputAlign:"right",name:"idNumber",placeholder:"申请开户接口返回"},{formType:"input",inputAlign:"right",label:"合作方交易单号",value:"",name:"corpCommSerno",placeholder:"申请开户接口返回"},{formType:"input",inputAlign:"right",label:"申请结果",value:"",name:"result",placeholder:"申请开户接口返回"},{formType:"input",name:"searchCard",inputAlign:"center",inlineForm:[{slot:"input",formType:"button",class:" !text-[12px] !px-5 !py-4 !bg-[#ffab30] !border-0 !text-white",round:!0,size:"mini",text:"查询结果",async click(){const e=g(),a=await p.get(x("/bank_card_two/query-status",{orderId:e.orderId}));i("cardBukle",t=>{t.tabs[2].inlineForm[3].value=a.data.corpCommSerno,t.tabs[2].inlineForm[4].value=a.data.result,t.tabs[0].inlineForm.forEach(r=>{r.value=y.get(a,`data.data${r.name}`)||r.value})}),a.code==5e3}}]},{formType:"cell",value:"提示: 申请销户前提为: 未进件/已取消进件/屋顶租赁合同已履行25年到期结束",valueClass:"text-red !text-left"}]}],tab:"info",onChangeTab(){}}],me=[T("销售人员信息"),{formType:"input",label:"资方名称",name:"investorId",placeholder:"自动获取",readonly:!0,backfill(e){const a=g(),t={ZSGY:"中山公用事业集团股份有限公司"};this.value=t[a.investorId]}},{formType:"input",label:"销售人员姓名",name:"salesman",placeholder:"自动获取",readonly:!0,backfill(e){const a=_();this.value=e[this.name]||a.name}},{formType:"input",label:"销售人员电话",name:"saleTelephone",placeholder:"自动获取",readonly:!0,backfill(e){const a=_();this.value=e[this.name]||a.phone}},{formType:"input",label:"订单所属组织",name:"companyId",placeholder:"自动获取",readonly:!0,...c(),...m("companyId",[],"dynamic"),async backfill(e){this.click=()=>{};const a=g(),t=_(),r=a.orderId?e.userId:t.userId,d=x("user-company/get-user-companies",{userId:r}),{data:u}=await p.get(d),A=u.map(f=>({value:f.company.companyId,text:f.company.name}));this.makeSelect(e[this.name]||A[0]?.value,A)}},{formType:"",name:"userId",value:"",getParam(e){const a=_(),t=e.userId||a.userId;e.userId=t}}],$e={__name:"customerInfo",setup(e){const a=X({lessorInfo:ne,bankInfo:ie,certificateType:ue,lesseeInfo:se,productWithArea:de,cardBuckle:ce,salemanInfo:me}),t=g();le(()=>{r()});async function r(){if(t.orderId){const f=$.getData[Z()],{data:w}=await p.get(x(f,t));P(a,w)}else P(a,{btns:{canSave:!0,canEdit:!0,hasEditBtn:!0}})}async function d(){const f=await ae(),w=$.saveData[Z()];return await p.post(w,f)}async function u(){await te(),await p.post(x("approval/put-approval/bto/customer",t))}async function A(f){await p.post("approval/do-approval/bto/customer",f)}return ee({getData:r,saveData:d,submitData:u,approvalData:A}),(f,w)=>{const b=K,V=z,Y=H,j=G;return q(),R(M,null,[v(b,{form:C(a).lessorInfo,"group-class":"shadowC",class:"pt-3"},null,8,["form"]),v(b,{form:C(a).bankInfo,"group-class":"shadowC",class:"pt-3"},null,8,["form"]),v(b,{form:C(a).certificateType,"group-class":"shadowC",class:"pt-3"},null,8,["form"]),v(b,{form:C(a).lesseeInfo,"group-class":"shadowC",class:"pt-3"},null,8,["form"]),v(b,{form:C(a).productWithArea,"group-class":"shadowC",class:"pt-3"},null,8,["form"]),v(b,{form:C(a).cardBuckle,"group-class":"shadowC",class:"pt-3"},{cardBukle:O(({slot:F})=>[F.show?(q(),U(Y,{key:0,active:F.tab,"onUpdate:active":k=>F.tab=k,"line-width":"0",ellipsis:!1,"title-active-color":"#ffab30",onChange:k=>F.onChangeTab(k)},{default:O(()=>[(q(!0),R(M,null,re(F.tabs,k=>(q(),U(V,{title:k.title},{default:O(()=>[v(b,{form:k.inlineForm,"group-class":"shadowC !mx-0",class:"pt-3"},null,8,["form"])]),_:2},1032,["title"]))),256))]),_:2},1032,["active","onUpdate:active","onChange"])):oe("",!0)]),_:1},8,["form"]),v(b,{form:C(a).salemanInfo,"group-class":"shadowC",class:"pt-3"},null,8,["form"]),v(j)],64)}}};export{$e as default};
