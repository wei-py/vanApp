import{i as I,t as N,h as j,Z as R,f as q,Y as M,o as $,a0 as A}from"./vant-BjNCsb4u.js";import{r as v,e as L,b3 as h,aX as P,aj as T,bA as m,N as e,u as c,i as y,Q as F,R as G,a_ as O,aY as Q,am as X}from"./@vue-ts87NNlE.js";import{d as k}from"./dayjs-DWD9bsSZ.js";import{_ as Z,h as z,t as E}from"./index-L-kxfX5L.js";import{q as H}from"./queryUrl-BTYYWpY7.js";import{l as J}from"./lodash-DhpMPSDc.js";import"./@vant-NmgEisJw.js";import"./@vue-office-GFDCm3nC.js";import"./vue-demi-BEcyFcst.js";import"./vue-RHKPHaPZ.js";import"./pinia-B_HOjTBS.js";import"./vue-router-Bw4qQE88.js";import"./@vueuse-QQdVrKV8.js";import"./xe-utils-DXe260hc.js";import"./axios-B4uVmeYG.js";import"./@x-ui-vue3-CwLx_scX.js";import"./pinia-plugin-persist-J3Q2VqHx.js";import"./vue3-menus-CnNWMJEM.js";import"./vue3-photo-preview-CkWuweRQ.js";import"./vxe-table-QgdefRjh.js";import"./dom-zindex-GlLoxNk1.js";const K=_=>(O("data-v-d18b3ec2"),_=_(),Q(),_),W=K(()=>X("p",{class:"font-bold text-[16px]"},"组织排名",-1)),s="YYYY-MM-DD",tt={__name:"dataRank",setup(_){const w=v([]),C=v(""),d=v("自定义"),r=v(!1),u=v(!1),p=k(),V=[{text:"全部",value:"全部",time:[]},{text:"当天",value:"当天",time:[p.format(s),p.format(s)]},{text:"近三天",value:"近三天",time:[p.subtract(3,"day").format(s),p.format(s)]},{text:"近七天",value:"近七天",time:[p.subtract(7,"day").format(s),p.format(s)]},{text:"自定义",value:"自定义",time:["",""]}];async function x(n,t){n+=" 00:00:00",t+=" 23:59:59";const{data:f}=await z.get(H("/bi/company-statistics-chart",n.length>18?{startDate:n,endDate:t}:{})),l=o=>{const b=E(o);return b.realValue+" "+b.unit};w.value=f.map(o=>({...o,signedCapacity:l(o.signedCapacity),scannedCapacity:l(o.scannedCapacity),buildingCapacity:l(o.buildingCapacity),gridConnectionCapacity:l(o.gridConnectionCapacity)}))}function g(n){if(J.isArray(n)){const t=n.map(f=>k(f).format(s));C.value=t.join(" 至 "),u.value=!1,x(...t)}else{const t=n.selectedOptions[0];d.value=t.value,r.value=!1,x(...t.time)}}return L(()=>{x()}),(n,t)=>{const f=N,l=j,o=R,b=q,D=M,S=$,i=h("vxe-column"),U=A,Y=h("vxe-table"),B=I;return P(),T(B,{inset:"",class:"!mt-2"},{default:m(()=>[e(S,{valueClass:"flex justify-end",titleClass:"h-9 yCenter !flex-none",class:"!px-2"},{title:m(()=>[e(f,{name:"chart-trending-o",class:"bg-[#ffab30] text-white rounded-full p-[3px] !text-[18px] mr-1"}),W]),value:m(()=>[e(l,{modelValue:c(d),"onUpdate:modelValue":t[0]||(t[0]=a=>y(d)?d.value=a:null),isLink:"",readonly:"",onClick:t[1]||(t[1]=a=>r.value=!0),border:!1,class:"!w-[auto] max-w-[30%]","input-align":"right"},null,8,["modelValue"]),e(b,{show:c(r),"onUpdate:show":t[3]||(t[3]=a=>y(r)?r.value=a:null),position:"bottom"},{default:m(()=>[e(o,{columns:V,onConfirm:g,onCancel:t[2]||(t[2]=a=>r.value=!1)})]),_:1},8,["show"]),F(e(l,{modelValue:c(C),"onUpdate:modelValue":t[4]||(t[4]=a=>y(C)?C.value=a:null),placeholder:"请选择日期",isLink:"",readonly:"",onClick:t[5]||(t[5]=a=>u.value=!0),border:!1,"input-align":"center",class:"ml-1"},null,8,["modelValue"]),[[G,c(d)=="自定义"]]),e(D,{show:c(u),"onUpdate:show":t[6]||(t[6]=a=>y(u)?u.value=a:null),type:"range",onConfirm:g,"min-date":new Date(2010,1,1)},null,8,["show","min-date"])]),_:1}),e(Y,{data:c(w),align:"center","header-align":"center","max-height":"400",stripe:""},{default:m(()=>[e(i,{type:"seq",width:"50",title:"序号"}),e(i,{title:"组织名称",width:"200"},{default:m(({row:a})=>[e(U,{text:a.companyName,color:"#1f1f1f",speed:"15"},null,8,["text"])]),_:1}),e(i,{field:"orderCount",sortable:"",title:"累计订单",width:"100"}),e(i,{field:"signedCapacity",sortable:"",title:"签约量",width:"100"}),e(i,{field:"scannedCapacity",sortable:"",title:"扫码量",width:"100"}),e(i,{field:"buildingCapacity",sortable:"",title:"建设量",width:"100"}),e(i,{field:"gridConnectionCapacity",sortable:"",title:"并网量",width:"100"})]),_:1},8,["data"])]),_:1})}}},gt=Z(tt,[["__scopeId","data-v-d18b3ec2"]]);export{gt as default};
