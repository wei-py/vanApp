import{t as E,i as L,u as z,m as F,w as G,B as P,r as K}from"./vant-PdAvEskO.js";import{X,Q as j,u as s,aX as l,aj as $,bA as _,al as b,am as e,be as n,N as x,bD as M,V as T,F as y,b1 as V,G as O,a_ as Q,aY as R,r as p,e as Y,i as N}from"./@vue-ts87NNlE.js";import{a as c,l as H}from"./lodash-D-SkTV7p.js";import{p as J}from"./plainButton-B7WOCgiF.js";import{_ as A,b as W,m as Z,c as ee,h as q}from"./index-D0ldpvYI.js";import{q as te}from"./queryUrl-DaTGvNW7.js";import"./@vant-NmgEisJw.js";import"./@vue-office-D7CPqAIZ.js";import"./vue-demi-BO4xsXkA.js";import"./vue-B7fnMq6U.js";import"./pinia-B_HOjTBS.js";import"./vue-router-Bw4qQE88.js";import"./@vueuse-DLUPp4BS.js";import"./xe-utils-CfMIR_ol.js";import"./axios-B6xwUs71.js";import"./@x-ui-vue3-CwLx_scX.js";import"./pinia-plugin-persist-J3Q2VqHx.js";import"./vue3-menus-CnNWMJEM.js";import"./vue3-photo-preview-jb8ML41u.js";import"./vxe-table-CAWzlaHI.js";import"./dom-zindex-GlLoxNk1.js";const se=v=>(Q("data-v-ad6c9614"),v=v(),R(),v),ae={class:"flex h-10 bar items-center y-Center px-1"},oe={class:"min-w-4 px-1 h-4 ml-2 text-sm shadowC flex items-center justify-center text-white rounded-full bg-[#ffab30]"},ne={class:"mx-2"},ie={class:"flex-1 justify-end pr-1 flex"},re={class:"px-4 text-[14px] pb-[5px]"},le={class:"font-bold min-h-8 text-[16px] yCenter justify-between"},ce={class:"text-[#ffab30]"},de={class:"min-h-6 yCenter"},ue={class:"inline-flex justify-between"},me=se(()=>e("div",{class:"pr-2 leading-6"},"当前阶段:",-1)),pe={class:"leading-6"},_e={class:"min-h-6 yCenter"},ve={class:"min-h-6 yCenter"},he={class:"min-min-h-6 yCenter"},fe={class:"min-h-6 yCenter"},ge={class:"min-h-6 yCenter"},xe={__name:"card",props:["item"],setup(v){const t=v,h=W(),i=Z();function d(a){const u=i[a.taskId]||i[a.stageId]||"-",m=i[a.stateId]||"-";return`${u} - ${m}`}return(a,u)=>{const m=E,I=L,w=X("skeleton-item"),S=X("skeleton");return j((l(),$(I,{inset:"",class:"!mb-2 shadowC van-haptics-feedback !rounded-xl"},{default:_(()=>[j((l(),b("div",null,[e("div",ae,[e("div",oe,n(t.item.index),1),e("div",ne,n(t.item.orderBase.orderId),1),e("div",ie,[x(J,{class:"!h-[18.7px]",onClick:u[0]||(u[0]=M(f=>a.$copyText(t.item.orderBase.orderId),["stop"]))},{default:_(()=>[T("复制")]),_:1})])]),e("article",re,[e("div",le,[e("div",null,n(s(c.get)(t.item,"customer.name")||s(c.get)(t.item,"customerOrg.orgName")),1),e("div",ce,[T("详情 "),x(m,{name:"arrow"})])]),e("div",de,"进件编号: "+n(s(c.get)(t.item,"leaseReview.contractNumber","-")),1),e("div",ue,[me,e("div",pe,[(l(!0),b(y,null,V(t.item.currentOrderState,f=>(l(),b("div",{key:f,class:O(`text-${a.$statusColor(s(i)[f.stateId])}`)},n(d(f)),3))),128))])]),e("div",_e,"所属组织: "+n(s(c.get)(t.item,"company.name","")),1),e("div",ve,"销售人员: "+n(s(c.get)(t.item,"orderBase.salesman","-")),1),e("div",he,"详细地址: "+n(s(c.get)(t.item,"orderBase.installationAddress","-")),1),e("div",fe,"资方名称: "+n(a.$investorIdDic[s(c.get)(t.item,"orderBase.investorId","-")]),1),e("div",ge,"订单创建时间: "+n(s(c.get)(t.item,"orderBase.createTime","-")),1)])])),[[w]])]),_:1})),[[S,s(h).overlayShow]])}}},be=A(xe,[["__scopeId","data-v-ad6c9614"]]),Ce={class:"yCenter"},ye={class:"xCenter"},Ie={class:"xCenter"},we={__name:"designChange",setup(v){const t=p("");ee();const h=p(""),i=p([{taskId:"TASK_CSPSXX_UPDATE",stateName:"设计变更",count:0},{taskId:"TASK_CSPSXX",stateName:"一键变更",count:0}]),d=p({pageNum:1,pageSize:10,total:0}),a=p(!1),u=p(!1),m=p([]);function I(){}async function w(){const{data:g}=await q.get("design/record-count");i.value[1].count=g[0].count,i.value[0].count=g[1].count}const S=H.debounce(f,300);async function f(){const g={...i.value[h.value],queryTag:t.value,stageId:"DESIGN"},{data:r}=await q.post(te("/order/search-exclude-states",d.value),g),C=r.total;d.value.total=C;const k=r.list.map((B,D)=>({...B,index:m.value.length+D+1}));m.value.push(...k),a.value=!1,u.value=d.value.pageNum*d.value.pageSize>C,d.value.pageNum++}return Y(()=>{}),(g,r)=>{const C=P,k=z,B=K,D=F,U=G;return l(),b(y,null,[x(k,{modelValue:s(t),"onUpdate:modelValue":r[0]||(r[0]=o=>N(t)?t.value=o:null),shape:"round",background:"#fff",placeholder:"系统编号、进件编号、组织全称、姓名、手机号","show-action":"",class:"van-hairline--bottom"},{action:_(()=>[e("div",Ce,[x(C,{onClick:I,class:"!w-auto !h-[30px] shadow !px-[15px] !rounded-full !border-none !bg-[#ffab30] !text-white"},{default:_(()=>[T(" 搜索 ")]),_:1})])]),_:1},8,["modelValue"]),x(D,{active:s(h),"onUpdate:active":r[1]||(r[1]=o=>N(h)?h.value=o:null),"line-width":"0",ellipsis:!1,"title-active-color":"#ffab30",onChange:w},{default:_(()=>[(l(!0),b(y,null,V(s(i),o=>(l(),$(B,null,{title:_(()=>[e("div",ye,n(o.count),1),e("div",Ie,n(o.stateName),1)]),_:2},1024))),256))]),_:1},8,["active"]),x(U,{loading:s(a),"onUpdate:loading":r[2]||(r[2]=o=>N(a)?a.value=o:null),finished:s(u),"finished-text":"没有更多了",onLoad:s(S),class:"!pt-2"},{default:_(()=>[(l(!0),b(y,null,V(s(m),o=>(l(),$(be,{key:o.orderBase.orderId,onClick:Se=>g.$router.push({path:"/itemDetail",query:{orderId:o.orderBase.orderId}}),item:o},null,8,["onClick","item"]))),128))]),_:1},8,["loading","finished","onLoad"])],64)}}},Qe=A(we,[["__scopeId","data-v-c667f2ed"]]);export{Qe as default};
