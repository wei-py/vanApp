import{D as j,C as z,p as F,j as G,r as P,B as K,o as M}from"./vant-DL9g20lT.js";import{X as q,Q as U,u as e,Z as i,a2 as T,a8 as d,_ as b,a0 as a,a3 as n,N as f,a1 as X,V as c,F as k,a4 as $,G as O,r as _,e as Q,i as N}from"./@vue-BhOIXUCP.js";import{a as x,l as R}from"./lodash-C-AG1eJN.js";import{p as A}from"./plainButton-Bx2E2oUm.js";import{b as Z,k as H,_ as J,c as W,h as E}from"./index-NPFU1_kq.js";import{q as Y}from"./queryUrl-ggRt1bhs.js";import"./@vant-D2Uub16A.js";import"./dayjs-Bof1u0Bp.js";import"./pinia-CQ-jtR3-.js";import"./vue-demi-Dq6ymT-8.js";import"./vue-router-XNYRUkAR.js";import"./@vueuse-BaMGbt4d.js";import"./axios-B6xwUs71.js";import"./@x-ui-vue3-bC99Tnvx.js";import"./pinia-plugin-persist-J3Q2VqHx.js";import"./vue3-menus-VHbn-zkx.js";import"./vue3-photo-preview-Dedu722r.js";import"./vxe-table-BBegQXiE.js";import"./xe-utils-BM3aD2L3.js";import"./dom-zindex-GlLoxNk1.js";const tt={class:"flex h-auto items-center pt-[1px]"},et={class:"min-w-4 px-1 h-4 ml-2 text-sm shadowC flex items-center justify-center text-white rounded-full bg-[#ffab30]"},at={class:"mx-2"},st={class:"flex-1 justify-end pr-1 flex"},ot={class:"px-4 text-[14px] pb-[5px]"},nt={class:"font-bold"},lt=a("br",null,null,-1),rt=a("br",null,null,-1),it=a("br",null,null,-1),ct=a("br",null,null,-1),dt=a("br",null,null,-1),ut={__name:"card",props:["item"],setup(V){const t=V,v=Z(),l=H();function u(o){const p=l[o.taskId]||l[o.stageId]||"-",m=l[o.stateId]||"-";return`${p} - ${m}`}return(o,p)=>{const m=j,w=z,y=q("skeleton-item"),S=q("skeleton");return U((i(),T(w,{inset:"",class:"p-1 !mb-2 shadowC van-haptics-feedback !rounded-xl"},{default:d(()=>[U((i(),b("div",null,[a("div",tt,[a("div",et,n(t.item.index),1),a("div",at,n(t.item.orderBase.orderId),1),f(A,{class:"!h-[18.7px]",onClick:p[0]||(p[0]=X(h=>o.$copyText(t.item.orderBase.orderId),["stop"]))},{default:d(()=>[c("复制")]),_:1}),a("div",st,[f(A,{onClick:X(()=>{},["stop"]),class:"!h-[18.7px]"},{default:d(()=>[c("状态")]),_:1})])]),f(m,{class:"!my-1"}),a("article",ot,[a("div",nt,n(e(x.get)(t.item,"customer.name")||e(x.get)(t.item,"customerOrg.orgName")),1),c(" 进件编号: "+n(e(x.get)(t.item,"leaseReview.contractNumber","-")),1),lt,c(" 当前阶段: "),rt,(i(!0),b(k,null,$(t.item.currentOrderState,h=>(i(),b("div",{key:h,class:O(`text-${o.$statusColor(e(l)[h.stateId])}`)},n(u(h)),3))),128)),c(" 销售人员: "+n(e(x.get)(t.item,"orderBase.salesman","-"))+" ",1),it,c(" 详细地址: "+n(e(x.get)(t.item,"orderBase.installationAddress","-"))+" ",1),ct,c(" 订单创建时间: "+n(e(x.get)(t.item,"orderBase.createTime","-"))+" ",1),dt])])),[[y]])]),_:1})),[[S,e(v).overlayShow]])}}},pt={class:"yCenter"},mt={class:"xCenter"},_t={class:"xCenter"},ft={__name:"designChange",setup(V){const t=_("");W();const v=_(""),l=_([{taskId:"TASK_CSPSXX_UPDATE",stateName:"设计变更",count:0},{taskId:"TASK_CSPSXX",stateName:"一键变更",count:0}]),u=_({pageNum:1,pageSize:10,total:0}),o=_(!1),p=_(!1),m=_([]);function w(){}async function y(){const{data:g}=await E.get("design/record-count");l.value[1].count=g[0].count,l.value[0].count=g[1].count}const S=R.debounce(h,300);async function h(){const g={...l.value[v.value],queryTag:t.value,stageId:"DESIGN"},{data:r}=await E.post(Y("/order/search-exclude-states",u.value),g),C=r.total;u.value.total=C;const I=r.list.map((B,D)=>({...B,index:m.value.length+D+1}));m.value.push(...I),o.value=!1,p.value=u.value.pageNum*u.value.pageSize>C,u.value.pageNum++}return Q(()=>{}),(g,r)=>{const C=K,I=F,B=M,D=G,L=P;return i(),b(k,null,[f(I,{modelValue:e(t),"onUpdate:modelValue":r[0]||(r[0]=s=>N(t)?t.value=s:null),shape:"round",background:"#f3f3f3",placeholder:"系统编号、进件编号、组织全称、姓名、手机号","show-action":""},{action:d(()=>[a("div",pt,[f(C,{onClick:w,class:"!w-auto !h-[34px] shadow !px-[15px] !rounded-full !border-none !bg-[#ffab30] !text-white"},{default:d(()=>[c(" 搜索 ")]),_:1})])]),_:1},8,["modelValue"]),f(D,{active:e(v),"onUpdate:active":r[1]||(r[1]=s=>N(v)?v.value=s:null),"line-width":"0",ellipsis:!1,"title-active-color":"#ffab30",onChange:y},{default:d(()=>[(i(!0),b(k,null,$(e(l),s=>(i(),T(B,null,{title:d(()=>[a("div",mt,n(s.count),1),a("div",_t,n(s.stateName),1)]),_:2},1024))),256))]),_:1},8,["active"]),f(L,{loading:e(o),"onUpdate:loading":r[2]||(r[2]=s=>N(o)?o.value=s:null),finished:e(p),"finished-text":"没有更多了",onLoad:e(S),class:"!pt-2"},{default:d(()=>[(i(!0),b(k,null,$(e(m),s=>(i(),T(ut,{key:s.orderBase.orderId,onClick:vt=>g.$router.push({path:"/itemDetail",query:{orderId:s.orderBase.orderId}}),item:s},null,8,["onClick","item"]))),128))]),_:1},8,["loading","finished","onLoad"])],64)}}},Et=J(ft,[["__scopeId","data-v-3218b4cb"]]);export{Et as default};
