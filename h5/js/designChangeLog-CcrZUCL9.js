import{A as Z,a as $,l as E,o as J,j as Q,U as G,g as H,C as S,E as j}from"./vant-DL9g20lT.js";import{_ as z}from"./vButton-CI7Mesoe.js";import{_ as R,c as X,h as C}from"./index-NPFU1_kq.js";import{q as V}from"./queryUrl-ggRt1bhs.js";import{b as v}from"./makeUpload-FhoYjxox.js";import{l as K}from"./lodash-C-AG1eJN.js";import{r as y,e as O,$ as D,Z as r,a2 as g,a8 as n,u as f,i as W,_ as N,a4 as q,a0 as h,a3 as b,N as e,V as x,F as U}from"./@vue-BhOIXUCP.js";import"./@vant-D2Uub16A.js";import"./pinia-CQ-jtR3-.js";import"./vue-demi-Dq6ymT-8.js";import"./vue-router-XNYRUkAR.js";import"./@vueuse-BaMGbt4d.js";import"./axios-B6xwUs71.js";import"./@x-ui-vue3-bC99Tnvx.js";import"./pinia-plugin-persist-J3Q2VqHx.js";import"./vue3-menus-VHbn-zkx.js";import"./vue3-photo-preview-Dedu722r.js";import"./vxe-table-BBegQXiE.js";import"./xe-utils-BM3aD2L3.js";import"./dayjs-Bof1u0Bp.js";import"./dom-zindex-GlLoxNk1.js";const Y={class:"xCenter py-1 van-hairline--top-bottom flex-col"},ee={__name:"designChangeLog",setup(ae){const d=y(["1"]),T=X(),m=y([]),w={ZUJIAN:"组件",NBQ:"逆变器",CJQ:"采集器",PDX:"配电箱",ZLDL:"直流电缆",ZHIJIA:"支架"};O(()=>{L()});async function L(){const{data:i}=await C.get(V("design/record",T));m.value=i.map(t=>(t.structureChart=v(t.structureChart),t.electricalDiagram=v(t.electricalDiagram),t.materialList=v(t.materialList),t.pvData=[],t))}async function k(i){const{data:t}=await C.get(V("design/get-design-nbq-pv",{designId:i.id||i.designIdByPv}));if(!t.length){$("没有数据");return}t.forEach(l=>{const u=[];for(let s=1;s<=20;s++)u.push(l[`pv${s}`]);K.isArray(i.nbqName)||(i.nbqName=[]),i[l.nbqName]=u,i.nbqName.push(l.nbqName)}),i.active=i.nbqName[0]}return(i,t)=>{const l=E,u=D("vxe-column"),s=D("vxe-table"),B=z,I=J,A=Q,c=G,p=H,M=S,F=j,P=Z;return r(),g(P,{modelValue:f(d),"onUpdate:modelValue":t[0]||(t[0]=a=>W(d)?d.value=a:null)},{default:n(()=>[(r(!0),N(U,null,q(f(m),(a,_)=>(r(),g(F,{key:_,name:_,class:"!p-0"},{title:n(()=>[h("div",null,"设计变更记录"+b(f(m).length-_),1),h("div",null,b(a.createTime),1)]),default:n(()=>[e(M,{inset:"",border:"",class:"!p-1 !m-0 border"},{default:n(()=>[e(l,{title:"设计类型",value:a.designType},null,8,["value"]),e(l,{title:"南坡组件数量",value:a.southModuleNumber},null,8,["value"]),e(l,{title:"北坡组件数量",value:a.northModuleNumber},null,8,["value"]),e(l,{title:"东坡组件数量",value:a.eastModuleNumber},null,8,["value"]),e(l,{title:"西坡组件数量",value:a.westModuleNumber},null,8,["value"]),e(l,{title:"是否有天窗",value:a.skyLight==0?"无":"有"},null,8,["value"]),e(l,{title:"组件朝向",value:a.moduleTowards},null,8,["value"]),e(l,{title:"方位角",value:a.azimuthAngle},null,8,["value"]),e(l,{title:"倾斜角",value:a.tiltAngle},null,8,["value"]),e(l,{title:"基底分类",value:a.moduleBaseType},null,8,["value"]),e(l,{title:"背板分类",value:a.moduleBackPlateType},null,8,["value"]),e(l,{title:"安装最高点(房屋+光伏总高度)",value:a.installedHeight+" 米"},null,8,["value"]),e(s,{data:a.designDevice,align:"center","header-align":"center","max-height":"400"},{default:n(()=>[e(u,{title:"设备类型"},{default:n(({row:o})=>[x(b(w[o.deviceType]),1)]),_:1}),e(u,{field:"deviceSpec",title:"规格标准"}),e(u,{field:"quantity",title:"设备数量"})]),_:2},1032,["data"]),h("div",Y,[e(B,{onClick:o=>k(a),class:"!mb-1"},{default:n(()=>[x(" 查看设计组串数量 ")]),_:2},1032,["onClick"]),e(A,{active:a.active,"onUpdate:active":o=>a.active=o},{default:n(()=>[(r(!0),N(U,null,q(a.nbqName,o=>(r(),g(I,{title:o},{default:n(()=>[e(s,{data:a[o],align:"center","header-align":"center","max-height":"400"},{default:n(()=>[e(u,{type:"seq",title:"PV"}),e(u,{field:"dc1",title:"DC1"}),e(u,{field:"dc2",title:"DC2"}),e(u,{field:"dc3",title:"DC3"}),e(u,{field:"dc4",title:"DC4"})]),_:2},1032,["data"])]),_:2},1032,["title"]))),256))]),_:2},1032,["active","onUpdate:active"])]),e(p,{name:"uploader",label:"结构图纸","input-align":"right"},{input:n(()=>[e(c,{modelValue:a.structureChart,"onUpdate:modelValue":o=>a.structureChart=o,"show-upload":!1,deletable:!1},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(p,{name:"uploader",label:"电气图纸","input-align":"right"},{input:n(()=>[e(c,{modelValue:a.electricalDiagram,"onUpdate:modelValue":o=>a.electricalDiagram=o,"show-upload":!1,deletable:!1},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(p,{name:"uploader",label:"物料清单","input-align":"right"},{input:n(()=>[e(c,{modelValue:a.materialList,"onUpdate:modelValue":o=>a.materialList=o,"show-upload":!1,deletable:!1},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])}}},De=R(ee,[["__scopeId","data-v-9fc5f9ec"]]);export{De as default};
