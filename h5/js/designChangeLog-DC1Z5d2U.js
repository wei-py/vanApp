import{J as P,a as Q,o as Z,r as $,m as E,U as G,h as H,i as S,K as X}from"./vant-PdAvEskO.js";import{_ as j}from"./vButton-lTvEi_nb.js";import{_ as z,c as K,h as C}from"./index-D0ldpvYI.js";import{q as V}from"./queryUrl-DaTGvNW7.js";import{b as _}from"./makeUpload-BNh7QOMX.js";import{l as R}from"./lodash-D-SkTV7p.js";import{r as y,e as O,b3 as D,aX as r,aj as g,bA as n,u as f,i as W,al as N,b1 as q,am as h,be as b,N as e,V as x,F as U}from"./@vue-ts87NNlE.js";import"./@vant-NmgEisJw.js";import"./pinia-B_HOjTBS.js";import"./vue-router-Bw4qQE88.js";import"./@vueuse-DLUPp4BS.js";import"./xe-utils-CfMIR_ol.js";import"./@vue-office-D7CPqAIZ.js";import"./vue-demi-BO4xsXkA.js";import"./vue-B7fnMq6U.js";import"./axios-B6xwUs71.js";import"./@x-ui-vue3-CwLx_scX.js";import"./pinia-plugin-persist-J3Q2VqHx.js";import"./vue3-menus-CnNWMJEM.js";import"./vue3-photo-preview-jb8ML41u.js";import"./vxe-table-CAWzlaHI.js";import"./dom-zindex-GlLoxNk1.js";const Y={class:"xCenter py-1 van-hairline--top-bottom flex-col"},ee={__name:"designChangeLog",setup(ae){const m=y(["1"]),T=K(),d=y([]),w={ZUJIAN:"组件",NBQ:"逆变器",CJQ:"采集器",PDX:"配电箱",ZLDL:"直流电缆",ZHIJIA:"支架"};O(()=>{L()});async function L(){const{data:i}=await C.get(V("design/record",T));d.value=i.map(t=>(t.structureChart=_(t.structureChart),t.electricalDiagram=_(t.electricalDiagram),t.materialList=_(t.materialList),t.pvData=[],t))}async function k(i){const{data:t}=await C.get(V("design/get-design-nbq-pv",{designId:i.id||i.designIdByPv}));if(!t.length){Q("没有数据");return}t.forEach(l=>{const u=[];for(let s=1;s<=20;s++)u.push(l[`pv${s}`]);R.isArray(i.nbqName)||(i.nbqName=[]),i[l.nbqName]=u,i.nbqName.push(l.nbqName)}),i.active=i.nbqName[0]}return(i,t)=>{const l=Z,u=D("vxe-column"),s=D("vxe-table"),B=j,I=$,A=E,c=G,p=H,M=S,F=X,J=P;return r(),g(J,{modelValue:f(m),"onUpdate:modelValue":t[0]||(t[0]=a=>W(m)?m.value=a:null)},{default:n(()=>[(r(!0),N(U,null,q(f(d),(a,v)=>(r(),g(F,{key:v,name:v,class:"!p-0"},{title:n(()=>[h("div",null,"设计变更记录"+b(f(d).length-v),1),h("div",null,b(a.createTime),1)]),default:n(()=>[e(M,{inset:"",border:"",class:"!p-1 !m-0 border"},{default:n(()=>[e(l,{title:"设计类型",value:a.designType},null,8,["value"]),e(l,{title:"南坡组件数量",value:a.southModuleNumber},null,8,["value"]),e(l,{title:"北坡组件数量",value:a.northModuleNumber},null,8,["value"]),e(l,{title:"东坡组件数量",value:a.eastModuleNumber},null,8,["value"]),e(l,{title:"西坡组件数量",value:a.westModuleNumber},null,8,["value"]),e(l,{title:"是否有天窗",value:a.skyLight==0?"无":"有"},null,8,["value"]),e(l,{title:"组件朝向",value:a.moduleTowards},null,8,["value"]),e(l,{title:"方位角",value:a.azimuthAngle},null,8,["value"]),e(l,{title:"倾斜角",value:a.tiltAngle},null,8,["value"]),e(l,{title:"基底分类",value:a.moduleBaseType},null,8,["value"]),e(l,{title:"背板分类",value:a.moduleBackPlateType},null,8,["value"]),e(l,{title:"安装最高点(房屋+光伏总高度)",value:a.installedHeight+" 米"},null,8,["value"]),e(s,{data:a.designDevice,align:"center","header-align":"center","max-height":"400"},{default:n(()=>[e(u,{title:"设备类型"},{default:n(({row:o})=>[x(b(w[o.deviceType]),1)]),_:1}),e(u,{field:"deviceSpec",title:"规格标准"}),e(u,{field:"quantity",title:"设备数量"})]),_:2},1032,["data"]),h("div",Y,[e(B,{onClick:o=>k(a),class:"!mb-1"},{default:n(()=>[x(" 查看设计组串数量 ")]),_:2},1032,["onClick"]),e(A,{active:a.active,"onUpdate:active":o=>a.active=o},{default:n(()=>[(r(!0),N(U,null,q(a.nbqName,o=>(r(),g(I,{title:o},{default:n(()=>[e(s,{data:a[o],align:"center","header-align":"center","max-height":"400"},{default:n(()=>[e(u,{type:"seq",title:"PV"}),e(u,{field:"dc1",title:"DC1"}),e(u,{field:"dc2",title:"DC2"}),e(u,{field:"dc3",title:"DC3"}),e(u,{field:"dc4",title:"DC4"})]),_:2},1032,["data"])]),_:2},1032,["title"]))),256))]),_:2},1032,["active","onUpdate:active"])]),e(p,{name:"uploader",label:"结构图纸","input-align":"right"},{input:n(()=>[e(c,{modelValue:a.structureChart,"onUpdate:modelValue":o=>a.structureChart=o,"show-upload":!1,deletable:!1},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(p,{name:"uploader",label:"电气图纸","input-align":"right"},{input:n(()=>[e(c,{modelValue:a.electricalDiagram,"onUpdate:modelValue":o=>a.electricalDiagram=o,"show-upload":!1,deletable:!1},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(p,{name:"uploader",label:"物料清单","input-align":"right"},{input:n(()=>[e(c,{modelValue:a.materialList,"onUpdate:modelValue":o=>a.materialList=o,"show-upload":!1,deletable:!1},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])}}},Ne=z(ee,[["__scopeId","data-v-9fc5f9ec"]]);export{Ne as default};
