import{j as U,B as F,z as L,g as S,G as z,n as E,o as M}from"./vant-DL9g20lT.js";import{_ as O,h as k}from"./index-NPFU1_kq.js";import{q as R}from"./queryUrl-ggRt1bhs.js";import{l as w}from"./lodash-C-AG1eJN.js";import{r as B,c as N,e as W,Z as s,_ as d,N as r,a8 as i,u,i as Z,a0 as V,F as m,a4 as g,a2 as A,a3 as H,V as J}from"./@vue-BhOIXUCP.js";import"./@vant-D2Uub16A.js";import"./pinia-CQ-jtR3-.js";import"./vue-demi-Dq6ymT-8.js";import"./vue-router-XNYRUkAR.js";import"./@vueuse-BaMGbt4d.js";import"./axios-B6xwUs71.js";import"./@x-ui-vue3-bC99Tnvx.js";import"./pinia-plugin-persist-J3Q2VqHx.js";import"./vue3-menus-VHbn-zkx.js";import"./vue3-photo-preview-Dedu722r.js";import"./vxe-table-BBegQXiE.js";import"./xe-utils-BM3aD2L3.js";import"./dayjs-Bof1u0Bp.js";import"./dom-zindex-GlLoxNk1.js";const K={class:"h-full"},Q={class:"text-center bg-[white] text-lg"},X={class:"xCenter bg-opacity-100 pb-5"},Y={__name:"designGroup",props:{query:{table:{},id:{},designIdByPv:{},orderId:{}}},setup($,{expose:I}){const _=$,f=B(0),n=B({}),y=N(()=>_.query.id||_.query.designIdByPv),q=N(()=>_.query.table.split(" ").filter(t=>t).reduce((t,a)=>{const[v,b]=a.split("*");for(let l=1;l<=b;l++)t.push(`${v}kW-${l}`);return t},[]));async function h(){const{data:e}=await k.get(R("design/get-design-nbq-pv",{designId:y.value}));if(e.length){const t=w.groupBy(e,"nbqName");for(const a in n.value)t[a]&&(n.value[a]=t[a][0])}}async function x(){const e={designId:y.value,designNbqPvList:Object.values(n.value)};return await k.post("design/put-design-nbq-pv",e)}async function D(){for(const e of q.value)for(let t=1;t<=20;t++)for(let a=1;a<=4;a++)w.set(n.value,[e,`pv${t}`,`dc${a}`],0);for(const e in n.value)n.value[e].nbqName=e}return W(()=>{D(),h()}),I({saveData:x,getData:h}),(e,t)=>{const a=L,v=S,b=z,l=E,C=M,G=U,P=F;return s(),d("div",K,[r(G,{active:u(f),"onUpdate:active":t[0]||(t[0]=o=>Z(f)?f.value=o:null),background:"#f3f3f3","line-width":"80px",color:"#ffab30",swipeable:""},{default:i(()=>[(s(!0),d(m,null,g(u(q),o=>(s(),A(C,{key:o,title:o},{default:i(()=>[(s(),d(m,null,g(20,p=>(s(),d(m,{key:p},[V("div",Q,"PV"+H(p),1),r(l,{"column-num":2,border:!1},{default:i(()=>[(s(),d(m,null,g(4,c=>r(b,{key:c},{default:i(()=>[r(v,{label:`DC${c}`,required:c==1,labelClass:"!w-[25%] !text-right"},{input:i(()=>[r(a,{"allow-empty":"",modelValue:u(n)[o][`pv${p}`][`dc${c}`],"onUpdate:modelValue":T=>u(n)[o][`pv${p}`][`dc${c}`]=T,step:"1",min:"0",integer:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label","required"])]),_:2},1024)),64))]),_:2},1024)],64))),64))]),_:2},1032,["title"]))),128))]),_:1},8,["active"]),V("div",X,[r(P,{onClick:x,className:"bg-[#ffab30] text-white h-8 w-[50%] rounded-2xl van-haptics-feedback "},{default:i(()=>[J("保存")]),_:1})])])}}},gt=O(Y,[["__scopeId","data-v-1b9e5733"]]);export{gt as default};
