import{b as S,g as L,B as A,H as E,j as H,G as M,q as O,m as Q}from"./vant-BF4L1TGb.js";import{_ as R,c as W,h as x}from"./index-B7VWkQ_2.js";import{q as X}from"./queryUrl-BTYYWpY7.js";import{l as w}from"./lodash-DhpMPSDc.js";import{r as N,c as B,e as j,aX as n,al as d,N as u,bA as r,u as p,i as z,am as V,aj as $,ak as J,F as m,b1 as g,be as K,V as Y}from"./@vue-ts87NNlE.js";import"./@vant-NmgEisJw.js";import"./pinia-B_HOjTBS.js";import"./vue-router-Bw4qQE88.js";import"./@vueuse-QQdVrKV8.js";import"./xe-utils-DXe260hc.js";import"./@vue-office-GFDCm3nC.js";import"./vue-demi-BEcyFcst.js";import"./vue-RHKPHaPZ.js";import"./axios-B4uVmeYG.js";import"./@x-ui-vue3-CwLx_scX.js";import"./pinia-plugin-persist-J3Q2VqHx.js";import"./vue3-menus-CnNWMJEM.js";import"./vue3-photo-preview-CkWuweRQ.js";import"./vxe-table-QgdefRjh.js";import"./dom-zindex-GlLoxNk1.js";const Z={class:"h-full"},tt={class:"text-center bg-[white] text-lg"},et={class:"xCenter bg-opacity-100 pb-5"},at={__name:"designGroup",props:{query:{table:{},id:{},designIdByPv:{},orderId:{}}},setup(I,{expose:C}){const _=I,D=W(),f=N(0),o=N({}),y=B(()=>_.query.id||_.query.designIdByPv),q=B(()=>_.query.table.split(" ").filter(t=>t).reduce((t,a)=>{const[b,v]=a.split("*");for(let i=1;i<=v;i++)t.push(`${b}kW-${i}`);return t},[]));async function h(){const{data:e}=await x.get(X("design/get-design-nbq-pv",{designId:y.value}));if(e.length){const t=w.groupBy(e,"nbqName");for(const a in o.value)t[a]&&(o.value[a]=t[a][0])}}async function k(){const e={designId:y.value,designNbqPvList:Object.values(o.value)},t=await x.post("design/put-design-nbq-pv",e);return t.code==200&&S("保存成功"),t}async function G(){for(const e of q.value)for(let t=1;t<=20;t++)for(let a=1;a<=4;a++)w.set(o.value,[e,`pv${t}`,`dc${a}`],0);for(const e in o.value)o.value[e].nbqName=e}return j(()=>{G(),h()}),C({saveData:k,getData:h}),(e,t)=>{const a=E,b=H,v=M,i=O,T=Q,P=L,U=A;return n(),d("div",Z,[u(P,{active:p(f),"onUpdate:active":t[0]||(t[0]=s=>z(f)?f.value=s:null),background:"#f3f3f3","line-width":"80px",color:"#ffab30",swipeable:""},{default:r(()=>[(n(!0),d(m,null,g(p(q),s=>(n(),$(T,{key:s,title:s},{default:r(()=>[(n(),d(m,null,g(20,l=>(n(),d(m,{key:l},[V("div",tt,"PV"+K(l),1),u(i,{"column-num":2,border:!1},{default:r(()=>[(n(),d(m,null,g(4,c=>u(v,{key:c},{default:r(()=>[u(b,{label:`DC${c}`,required:l<3&&c==1,labelClass:"!w-[25%] !text-right"},{input:r(()=>[u(a,{"allow-empty":"",modelValue:p(o)[s][`pv${l}`][`dc${c}`],"onUpdate:modelValue":F=>p(o)[s][`pv${l}`][`dc${c}`]=F,step:"1",min:"0",integer:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label","required"])]),_:2},1024)),64))]),_:2},1024)],64))),64))]),_:2},1032,["title"]))),128))]),_:1},8,["active"]),V("div",et,[p(D).status!="不可变更"?(n(),$(U,{key:0,onClick:k,className:"bg-[#ffab30] text-white h-8 w-[50%] rounded-2xl van-haptics-feedback "},{default:r(()=>[Y(" 保存 ")]),_:1})):J("",!0)])])}}},xt=R(at,[["__scopeId","data-v-1e95772d"]]);export{xt as default};
