import{b as U,m as F,B as S,J as L,h as A,G as E,q as J,r as M}from"./vant-BjNCsb4u.js";import{_ as O,h as k}from"./index-C9aRjUQ6.js";import{q as R}from"./queryUrl-BTYYWpY7.js";import{l as w}from"./lodash-DhpMPSDc.js";import{r as B,c as N,e as W,aX as s,al as p,N as r,bA as i,u,i as X,am as V,F as m,b1 as g,aj as z,be as H,V as K}from"./@vue-ts87NNlE.js";import"./@vant-NmgEisJw.js";import"./pinia-B_HOjTBS.js";import"./vue-router-Bw4qQE88.js";import"./@vueuse-QQdVrKV8.js";import"./xe-utils-DXe260hc.js";import"./@vue-office-GFDCm3nC.js";import"./vue-demi-BEcyFcst.js";import"./vue-RHKPHaPZ.js";import"./axios-B4uVmeYG.js";import"./@x-ui-vue3-CwLx_scX.js";import"./pinia-plugin-persist-J3Q2VqHx.js";import"./vue3-menus-CnNWMJEM.js";import"./vue3-photo-preview-CkWuweRQ.js";import"./vxe-table-QgdefRjh.js";import"./dom-zindex-GlLoxNk1.js";const Q={class:"h-full"},Y={class:"text-center bg-[white] text-lg"},Z={class:"xCenter bg-opacity-100 pb-5"},j={__name:"designGroup",props:{query:{table:{},id:{},designIdByPv:{},orderId:{}}},setup($,{expose:I}){const _=$,f=B(0),o=B({}),y=N(()=>_.query.id||_.query.designIdByPv),q=N(()=>_.query.table.split(" ").filter(t=>t).reduce((t,a)=>{const[b,v]=a.split("*");for(let l=1;l<=v;l++)t.push(`${b}kW-${l}`);return t},[]));async function h(){const{data:e}=await k.get(R("design/get-design-nbq-pv",{designId:y.value}));if(e.length){const t=w.groupBy(e,"nbqName");for(const a in o.value)t[a]&&(o.value[a]=t[a][0])}}async function x(){const e={designId:y.value,designNbqPvList:Object.values(o.value)},t=await k.post("design/put-design-nbq-pv",e);return t.code==200&&U("保存成功"),t}async function D(){for(const e of q.value)for(let t=1;t<=20;t++)for(let a=1;a<=4;a++)w.set(o.value,[e,`pv${t}`,`dc${a}`],0);for(const e in o.value)o.value[e].nbqName=e}return W(()=>{D(),h()}),I({saveData:x,getData:h}),(e,t)=>{const a=L,b=A,v=E,l=J,C=M,G=F,T=S;return s(),p("div",Q,[r(G,{active:u(f),"onUpdate:active":t[0]||(t[0]=n=>X(f)?f.value=n:null),background:"#f3f3f3","line-width":"80px",color:"#ffab30",swipeable:""},{default:i(()=>[(s(!0),p(m,null,g(u(q),n=>(s(),z(C,{key:n,title:n},{default:i(()=>[(s(),p(m,null,g(20,c=>(s(),p(m,{key:c},[V("div",Y,"PV"+H(c),1),r(l,{"column-num":2,border:!1},{default:i(()=>[(s(),p(m,null,g(4,d=>r(v,{key:d},{default:i(()=>[r(b,{label:`DC${d}`,required:c<3&&d==1,labelClass:"!w-[25%] !text-right"},{input:i(()=>[r(a,{"allow-empty":"",modelValue:u(o)[n][`pv${c}`][`dc${d}`],"onUpdate:modelValue":P=>u(o)[n][`pv${c}`][`dc${d}`]=P,step:"1",min:"0",integer:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label","required"])]),_:2},1024)),64))]),_:2},1024)],64))),64))]),_:2},1032,["title"]))),128))]),_:1},8,["active"]),V("div",Z,[r(T,{onClick:x,className:"bg-[#ffab30] text-white h-8 w-[50%] rounded-2xl van-haptics-feedback "},{default:i(()=>[K("保存")]),_:1})])])}}},qt=O(j,[["__scopeId","data-v-a42e490f"]]);export{qt as default};
