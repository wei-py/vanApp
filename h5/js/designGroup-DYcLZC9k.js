import{m as U,B as F,H as L,h as S,G as A,q as E,r as H}from"./vant-PdAvEskO.js";import{_ as M,h as k}from"./index-D0ldpvYI.js";import{q as O}from"./queryUrl-DaTGvNW7.js";import{l as w}from"./lodash-D-SkTV7p.js";import{r as B,c as N,e as R,aX as s,al as d,N as r,bA as i,u,i as W,am as V,F as m,b1 as g,aj as X,be as z,V as J}from"./@vue-ts87NNlE.js";import"./@vant-NmgEisJw.js";import"./pinia-B_HOjTBS.js";import"./vue-router-Bw4qQE88.js";import"./@vueuse-DLUPp4BS.js";import"./xe-utils-CfMIR_ol.js";import"./@vue-office-D7CPqAIZ.js";import"./vue-demi-BO4xsXkA.js";import"./vue-B7fnMq6U.js";import"./axios-B6xwUs71.js";import"./@x-ui-vue3-CwLx_scX.js";import"./pinia-plugin-persist-J3Q2VqHx.js";import"./vue3-menus-CnNWMJEM.js";import"./vue3-photo-preview-jb8ML41u.js";import"./vxe-table-CAWzlaHI.js";import"./dom-zindex-GlLoxNk1.js";const K={class:"h-full"},Q={class:"text-center bg-[white] text-lg"},Y={class:"xCenter bg-opacity-100 pb-5"},Z={__name:"designGroup",props:{query:{table:{},id:{},designIdByPv:{},orderId:{}}},setup($,{expose:I}){const _=$,f=B(0),o=B({}),y=N(()=>_.query.id||_.query.designIdByPv),q=N(()=>_.query.table.split(" ").filter(t=>t).reduce((t,a)=>{const[b,v]=a.split("*");for(let l=1;l<=v;l++)t.push(`${b}kW-${l}`);return t},[]));async function h(){const{data:e}=await k.get(O("design/get-design-nbq-pv",{designId:y.value}));if(e.length){const t=w.groupBy(e,"nbqName");for(const a in o.value)t[a]&&(o.value[a]=t[a][0])}}async function x(){const e={designId:y.value,designNbqPvList:Object.values(o.value)};return await k.post("design/put-design-nbq-pv",e)}async function D(){for(const e of q.value)for(let t=1;t<=20;t++)for(let a=1;a<=4;a++)w.set(o.value,[e,`pv${t}`,`dc${a}`],0);for(const e in o.value)o.value[e].nbqName=e}return R(()=>{D(),h()}),I({saveData:x,getData:h}),(e,t)=>{const a=L,b=S,v=A,l=E,C=H,G=U,P=F;return s(),d("div",K,[r(G,{active:u(f),"onUpdate:active":t[0]||(t[0]=n=>W(f)?f.value=n:null),background:"#f3f3f3","line-width":"80px",color:"#ffab30",swipeable:""},{default:i(()=>[(s(!0),d(m,null,g(u(q),n=>(s(),X(C,{key:n,title:n},{default:i(()=>[(s(),d(m,null,g(20,p=>(s(),d(m,{key:p},[V("div",Q,"PV"+z(p),1),r(l,{"column-num":2,border:!1},{default:i(()=>[(s(),d(m,null,g(4,c=>r(v,{key:c},{default:i(()=>[r(b,{label:`DC${c}`,required:c==1,labelClass:"!w-[25%] !text-right"},{input:i(()=>[r(a,{"allow-empty":"",modelValue:u(o)[n][`pv${p}`][`dc${c}`],"onUpdate:modelValue":T=>u(o)[n][`pv${p}`][`dc${c}`]=T,step:"1",min:"0",integer:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label","required"])]),_:2},1024)),64))]),_:2},1024)],64))),64))]),_:2},1032,["title"]))),128))]),_:1},8,["active"]),V("div",Y,[r(P,{onClick:x,className:"bg-[#ffab30] text-white h-8 w-[50%] rounded-2xl van-haptics-feedback "},{default:i(()=>[J("保存")]),_:1})])])}}},yt=M(Z,[["__scopeId","data-v-1b9e5733"]]);export{yt as default};
