import{j as U,B as F,z as L,g as S,G as z,n as A,o as E}from"./vant-xiv0EFx3.js";import{_ as M,h as k}from"./index-Dd7uG9g0.js";import{q as O}from"./queryUrl-CUkA5NKU.js";import{l as w}from"./lodash-C1iNKp1x.js";import{r as B,c as N,e as R,aX as s,al as d,N as r,bA as i,u,i as W,am as V,F as m,b1 as g,aj as X,be as j,V as H}from"./@vue-BHA94vdH.js";import"./@vant-BMzV8Unt.js";import"./pinia-BOLtM30a.js";import"./vue-demi-Dq6ymT-8.js";import"./vue-router-BQWAt7JZ.js";import"./@vueuse-BYPNFz0v.js";import"./xe-utils-D22uZPtC.js";import"./dayjs-19KvoO9f.js";import"./axios-B6xwUs71.js";import"./@x-ui-vue3-DYFNhZJM.js";import"./pinia-plugin-persist-J3Q2VqHx.js";import"./vue3-menus--RpDJ8QK.js";import"./vue3-photo-preview-Byv7Qnko.js";import"./vxe-table-BpFaW3Xd.js";import"./dom-zindex-GlLoxNk1.js";const J={class:"h-full"},K={class:"text-center bg-[white] text-lg"},Q={class:"xCenter bg-opacity-100 pb-5"},Y={__name:"designGroup",props:{query:{table:{},id:{},designIdByPv:{},orderId:{}}},setup($,{expose:I}){const _=$,f=B(0),n=B({}),y=N(()=>_.query.id||_.query.designIdByPv),q=N(()=>_.query.table.split(" ").filter(t=>t).reduce((t,a)=>{const[b,v]=a.split("*");for(let l=1;l<=v;l++)t.push(`${b}kW-${l}`);return t},[]));async function h(){const{data:e}=await k.get(O("design/get-design-nbq-pv",{designId:y.value}));if(e.length){const t=w.groupBy(e,"nbqName");for(const a in n.value)t[a]&&(n.value[a]=t[a][0])}}async function x(){const e={designId:y.value,designNbqPvList:Object.values(n.value)};return await k.post("design/put-design-nbq-pv",e)}async function D(){for(const e of q.value)for(let t=1;t<=20;t++)for(let a=1;a<=4;a++)w.set(n.value,[e,`pv${t}`,`dc${a}`],0);for(const e in n.value)n.value[e].nbqName=e}return R(()=>{D(),h()}),I({saveData:x,getData:h}),(e,t)=>{const a=L,b=S,v=z,l=A,C=E,G=U,P=F;return s(),d("div",J,[r(G,{active:u(f),"onUpdate:active":t[0]||(t[0]=o=>W(f)?f.value=o:null),background:"#f3f3f3","line-width":"80px",color:"#ffab30",swipeable:""},{default:i(()=>[(s(!0),d(m,null,g(u(q),o=>(s(),X(C,{key:o,title:o},{default:i(()=>[(s(),d(m,null,g(20,p=>(s(),d(m,{key:p},[V("div",K,"PV"+j(p),1),r(l,{"column-num":2,border:!1},{default:i(()=>[(s(),d(m,null,g(4,c=>r(v,{key:c},{default:i(()=>[r(b,{label:`DC${c}`,required:c==1,labelClass:"!w-[25%] !text-right"},{input:i(()=>[r(a,{"allow-empty":"",modelValue:u(n)[o][`pv${p}`][`dc${c}`],"onUpdate:modelValue":T=>u(n)[o][`pv${p}`][`dc${c}`]=T,step:"1",min:"0",integer:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label","required"])]),_:2},1024)),64))]),_:2},1024)],64))),64))]),_:2},1032,["title"]))),128))]),_:1},8,["active"]),V("div",Q,[r(P,{onClick:x,className:"bg-[#ffab30] text-white h-8 w-[50%] rounded-2xl van-haptics-feedback "},{default:i(()=>[H("保存")]),_:1})])])}}},gt=M(Y,[["__scopeId","data-v-1b9e5733"]]);export{gt as default};
