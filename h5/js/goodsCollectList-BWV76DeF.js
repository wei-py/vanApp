import{u as Q,m as X,B as j,o as A,i as H,w as J,z as K,r as P}from"./vant-CJN7raQG.js";import{_ as W}from"./vButton-CXMhdDxx.js";import{p as Y}from"./plainButton-r4hUV7_7.js";import{r as d,e as Z,X as ee,aX as s,al as B,N as i,bA as l,u as t,i as h,F as S,am as te,V as x,b1 as O,Q as ae,aj as u,bD as oe,ak as se,be as le}from"./@vue-ts87NNlE.js";import{_ as ne,c as pe,b as re,h as ie,r as E}from"./index-r_oNj4vA.js";import{l as ue}from"./lodash-DhpMPSDc.js";import{q as ce}from"./queryUrl-BTYYWpY7.js";import"./@vant-NmgEisJw.js";import"./pinia-B_HOjTBS.js";import"./vue-router-Bw4qQE88.js";import"./@vueuse-QQdVrKV8.js";import"./xe-utils-DXe260hc.js";import"./@vue-office-GFDCm3nC.js";import"./vue-demi-BEcyFcst.js";import"./vue-RHKPHaPZ.js";import"./axios-B4uVmeYG.js";import"./@x-ui-vue3-CwLx_scX.js";import"./pinia-plugin-persist-J3Q2VqHx.js";import"./vue3-menus-CnNWMJEM.js";import"./vue3-photo-preview-CkWuweRQ.js";import"./vxe-table-QgdefRjh.js";import"./dom-zindex-GlLoxNk1.js";const de={class:"yCenter"},ve={__name:"goodsCollectList",setup(_e){const y=d(""),v=d(""),c=pe(),w=re(),T=d(!1),g=d(!1),_=d([]),p=d({pageNum:1,pageSize:10,total:0}),I=d({SITE:" 现场收一级/现场收二级",FIRST_TO_SECOND:"二级收一级",ORIGIN_TO_FIRST:"一级仓库入库供应商设备",FIRST_TO_SITE:"现场收一级",SECOND_TO_SITE:"现场收二级"}),C=ue.debounce(F,300);async function F(){const a={...c,queryStr:y.value,state:v.value},{data:o}=await ie.post(ce("sto/import-base/page",p.value),a),n=o.totalRow;p.value.total=n;const f=o.records.map((r,b)=>({...r,index:_.value.length+b+1}));_.value.push(...f),T.value=!1,g.value=p.value.pageNum*p.value.pageSize>n,p.value.pageNum++}function D(){p.value.pageNum=1,p.value.pageSize=10,_.value.length=0,C()}function V(){E.push}function G(){p.value.pageNum=1,p.value.pageSize=10,_.value.length=0,C()}function k(a,o){let n={};o==0?n={expId:c.deliveryType!=="ORIGIN_TO_FIRST"?a?.stoExportBase?.expId:a?.stoImportBase?.impId,deliveryType:a?.stoImportBase?.importType||a?.stoExportBase?.exportType,state:0,acceptType:1}:o==1?n={expId:a?.stoImportBase?.impId,deliveryType:a?.stoImportBase?.importType||a?.stoExportBase?.exportType,state:1,acceptType:1}:o==2&&(n={expId:a?.stoExportBase?.expId,deliveryType:a?.stoImportBase?.importType||a?.stoExportBase?.exportType,state:0,acceptType:0});const f={ORIGIN_TO_FIRST:"一级仓库入库",FIRST_TO_SECOND:"二级仓库收货"}[n.deliveryType]||"仓库收货";E.push({path:"/goodsCollectDetail",query:{title:f,...n}})}return Z(()=>{_.value.length=0,g.value=!1,C()}),(a,o)=>{const n=j,f=Q,r=A,b=Y,N=W,$=H,L=J,q=K,z=P,U=X,M=ee("skeleton");return s(),B(S,null,[i(f,{modelValue:t(y),"onUpdate:modelValue":o[0]||(o[0]=m=>h(y)?y.value=m:null),onBlur:D,shape:"round",background:"#f3f3f3",placeholder:"系统编号、进件编号、组织全称、姓名、手机号","show-action":""},{action:l(()=>[te("div",de,[i(n,{onClick:V,class:"!w-auto !h-[34px] shadow !px-[15px] !rounded-full !border-none !bg-[#ffab30] !text-white"},{default:l(()=>[x(" 新建 ")]),_:1})])]),_:1},8,["modelValue"]),i(U,{class:"flex-1 flex flex-col",active:t(v),"onUpdate:active":o[2]||(o[2]=m=>h(v)?v.value=m:null),background:"#f3f3f3","line-width":"80px",color:"#ffab30",onChange:G},{default:l(()=>[(s(),B(S,null,O(["待收货","已收货"],m=>i(z,{title:m,key:m},{default:l(()=>[i(L,{loading:t(T),"onUpdate:loading":o[1]||(o[1]=e=>h(T)?T.value=e:null),finished:t(g),"finished-text":"没有更多了",onLoad:t(C),class:"!pt-2"},{default:l(()=>[(s(!0),B(S,null,O(t(_),e=>ae((s(),u($,{key:e.index,inset:"",class:"px-2 py-4 !mb-2 shadowC !rounded-xl"},{default:l(()=>[t(c).deliveryType=="SITE"?(s(),u(r,{key:0,valueClass:"valueClass",titleClass:"titleClass",border:!1,title:"收货组织: ",value:e.stoExportBase.consigneeName},null,8,["value"])):(s(),u(r,{key:1,valueClass:"valueClass",titleClass:"titleClass",title:"收货组织: ",border:!1,value:e.impStoRoom&&e.impStoRoom.stoName?e.impStoRoom.stoName:"-"},null,8,["value"])),t(c).deliveryType=="ORIGIN_TO_FIRST"?(s(),u(r,{key:2,valueClass:"valueClass yellowText",titleClass:"titleClass",border:!1,title:"收货编号: ",value:e.stoImportBase.impId||"-"},{"right-icon":l(()=>[i(b,{class:"!h-[24px]",onClick:oe(R=>a.$copyText(a.$get(e,"stoImportBase.impId")||a.$get(e,"stoExportBase.expId")),["stop"])},{default:l(()=>[x(" 复制 ")]),_:2},1032,["onClick"])]),_:2},1032,["value"])):se("",!0),t(c).deliveryType=="ORIGIN_TO_FIRST"?(s(),u(r,{key:3,valueClass:"valueClass",titleClass:"titleClass",border:!1,title:"收货类型: ",value:e.stoImportBase.importType&&t(I)[e.stoImportBase.importType]?t(I)[e.stoImportBase.importType]:"-"},null,8,["value"])):(s(),u(r,{key:4,valueClass:"valueClass",titleClass:"titleClass",border:!1,title:"收货类型: ",value:e.stoExportBase.exportType&&t(I)[e.stoExportBase.exportType]?t(I)[e.stoExportBase.exportType]:"-"},null,8,["value"])),i(r,{valueClass:"valueClass",titleClass:"titleClass",border:!1,title:"备注: ",value:e.stoImportBase.remark||"-"},null,8,["value"]),i(r,{border:!1},{default:l(()=>[t(c).state==0&&t(c).deliveryType!="ORIGIN_TO_FIRST"?(s(),u(N,{key:0,onClick:R=>k(e,2)},{default:l(()=>[x(" 一键收货")]),_:2},1032,["onClick"])):(s(),u(N,{key:1,onClick:R=>k(e,t(v))},{default:l(()=>[x(le(t(v)?"收货详情":"扫码收货"),1)]),_:2},1032,["onClick"]))]),_:2},1024)]),_:2},1024)),[[M,t(w).overlayShow]])),128))]),_:1},8,["loading","finished","onLoad"]),i(q,{class:"!bg-[#fed38c]"})]),_:2},1032,["title"])),64))]),_:1},8,["active"])],64)}}},$e=ne(ve,[["__scopeId","data-v-75b3da75"]]);export{$e as default};
