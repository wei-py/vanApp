import{p as j,j as M,B as Q,l as X,C as A,r as H,o as J}from"./vant-xiv0EFx3.js";import{_ as K}from"./vButton-DxiVszE8.js";import{p as P}from"./plainButton-CQdWUwau.js";import{r as d,e as W,X as Y,aX as s,al as B,N as u,bA as l,u as t,i as b,F as S,am as Z,V as x,b1 as O,Q as ee,aj as i,bD as te,ak as ae,be as oe}from"./@vue-BHA94vdH.js";import{_ as se,c as le,b as ne,h as pe,r as E}from"./index-Dd7uG9g0.js";import{l as re}from"./lodash-C1iNKp1x.js";import{q as ue}from"./queryUrl-CUkA5NKU.js";import"./@vant-BMzV8Unt.js";import"./pinia-BOLtM30a.js";import"./vue-demi-Dq6ymT-8.js";import"./vue-router-BQWAt7JZ.js";import"./@vueuse-BYPNFz0v.js";import"./xe-utils-D22uZPtC.js";import"./dayjs-19KvoO9f.js";import"./axios-B6xwUs71.js";import"./@x-ui-vue3-DYFNhZJM.js";import"./pinia-plugin-persist-J3Q2VqHx.js";import"./vue3-menus--RpDJ8QK.js";import"./vue3-photo-preview-Byv7Qnko.js";import"./vxe-table-BpFaW3Xd.js";import"./dom-zindex-GlLoxNk1.js";const ie={class:"yCenter"},ce={__name:"goodsCollectList",setup(de){const y=d(""),v=d(""),c=le(),w=ne(),T=d(!1),g=d(!1),_=d([]),p=d({pageNum:1,pageSize:10,total:0}),I=d({SITE:" 现场收一级/现场收二级",FIRST_TO_SECOND:"二级收一级",ORIGIN_TO_FIRST:"一级仓库入库供应商设备",FIRST_TO_SITE:"现场收一级",SECOND_TO_SITE:"现场收二级"}),C=re.debounce(F,300);async function F(){const a={...c,queryStr:y.value,state:v.value},{data:o}=await pe.post(ue("sto/import-base/page",p.value),a),n=o.totalRow;p.value.total=n;const m=o.records.map((r,h)=>({...r,index:_.value.length+h+1}));_.value.push(...m),T.value=!1,g.value=p.value.pageNum*p.value.pageSize>n,p.value.pageNum++}function D(){p.value.pageNum=1,p.value.pageSize=10,_.value.length=0,C()}function V(){E.push}function G(){p.value.pageNum=1,p.value.pageSize=10,_.value.length=0,C()}function k(a,o){let n={};o==0?n={expId:c.deliveryType!=="ORIGIN_TO_FIRST"?a?.stoExportBase?.expId:a?.stoImportBase?.impId,deliveryType:a?.stoImportBase?.importType||a?.stoExportBase?.exportType,state:0,acceptType:1}:o==1?n={expId:a?.stoImportBase?.impId,deliveryType:a?.stoImportBase?.importType||a?.stoExportBase?.exportType,state:1,acceptType:1}:o==2&&(n={expId:a?.stoExportBase?.expId,deliveryType:a?.stoImportBase?.importType||a?.stoExportBase?.exportType,state:0,acceptType:0});const m={ORIGIN_TO_FIRST:"一级仓库入库",FIRST_TO_SECOND:"二级仓库收货"}[n.deliveryType]||"仓库收货";E.push({path:"/goodsCollectDetail",query:{title:m,...n}})}return W(()=>{_.value.length=0,g.value=!1,C()}),(a,o)=>{const n=Q,m=j,r=X,h=P,N=K,$=A,L=H,q=J,z=M,U=Y("skeleton");return s(),B(S,null,[u(m,{modelValue:t(y),"onUpdate:modelValue":o[0]||(o[0]=f=>b(y)?y.value=f:null),onBlur:D,shape:"round",background:"#f3f3f3",placeholder:"系统编号、进件编号、组织全称、姓名、手机号","show-action":""},{action:l(()=>[Z("div",ie,[u(n,{onClick:V,class:"!w-auto !h-[34px] shadow !px-[15px] !rounded-full !border-none !bg-[#ffab30] !text-white"},{default:l(()=>[x(" 新建 ")]),_:1})])]),_:1},8,["modelValue"]),u(z,{class:"flex-1 flex flex-col",active:t(v),"onUpdate:active":o[2]||(o[2]=f=>b(v)?v.value=f:null),background:"#f3f3f3","line-width":"80px",color:"#ffab30",onChange:G},{default:l(()=>[(s(),B(S,null,O(["待收货","已收货"],f=>u(q,{title:f,key:f},{default:l(()=>[u(L,{loading:t(T),"onUpdate:loading":o[1]||(o[1]=e=>b(T)?T.value=e:null),finished:t(g),"finished-text":"没有更多了",onLoad:t(C),class:"!pt-2"},{default:l(()=>[(s(!0),B(S,null,O(t(_),e=>ee((s(),i($,{key:e.index,inset:"",class:"px-2 py-4 !mb-2 shadowC !rounded-xl"},{default:l(()=>[t(c).deliveryType=="SITE"?(s(),i(r,{key:0,valueClass:"valueClass",titleClass:"titleClass",border:!1,title:"收货组织: ",value:e.stoExportBase.consigneeName},null,8,["value"])):(s(),i(r,{key:1,valueClass:"valueClass",titleClass:"titleClass",title:"收货组织: ",border:!1,value:e.impStoRoom&&e.impStoRoom.stoName?e.impStoRoom.stoName:"-"},null,8,["value"])),t(c).deliveryType=="ORIGIN_TO_FIRST"?(s(),i(r,{key:2,valueClass:"valueClass yellowText",titleClass:"titleClass",border:!1,title:"收货编号: ",value:e.stoImportBase.impId||"-"},{"right-icon":l(()=>[u(h,{class:"!h-[24px]",onClick:te(R=>a.$copyText(a.$get(e,"stoImportBase.impId")||a.$get(e,"stoExportBase.expId")),["stop"])},{default:l(()=>[x(" 复制 ")]),_:2},1032,["onClick"])]),_:2},1032,["value"])):ae("",!0),t(c).deliveryType=="ORIGIN_TO_FIRST"?(s(),i(r,{key:3,valueClass:"valueClass",titleClass:"titleClass",border:!1,title:"收货类型: ",value:e.stoImportBase.importType&&t(I)[e.stoImportBase.importType]?t(I)[e.stoImportBase.importType]:"-"},null,8,["value"])):(s(),i(r,{key:4,valueClass:"valueClass",titleClass:"titleClass",border:!1,title:"收货类型: ",value:e.stoExportBase.exportType&&t(I)[e.stoExportBase.exportType]?t(I)[e.stoExportBase.exportType]:"-"},null,8,["value"])),u(r,{valueClass:"valueClass",titleClass:"titleClass",border:!1,title:"备注: ",value:e.stoImportBase.remark||"-"},null,8,["value"]),u(r,{border:!1},{default:l(()=>[t(c).state==0&&t(c).deliveryType!="ORIGIN_TO_FIRST"?(s(),i(N,{key:0,onClick:R=>k(e,2)},{default:l(()=>[x(" 一键收货")]),_:2},1032,["onClick"])):(s(),i(N,{key:1,onClick:R=>k(e,t(v))},{default:l(()=>[x(oe(t(v)?"收货详情":"扫码收货"),1)]),_:2},1032,["onClick"]))]),_:2},1024)]),_:2},1024)),[[U,t(w).overlayShow]])),128))]),_:1},8,["loading","finished","onLoad"])]),_:2},1032,["title"])),64))]),_:1},8,["active"])],64)}}},De=se(ce,[["__scopeId","data-v-95f2ce2c"]]);export{De as default};
