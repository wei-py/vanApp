import{u as M,m as Q,B as X,o as j,i as A,w as H,r as J}from"./vant-PdAvEskO.js";import{_ as K}from"./vButton-lTvEi_nb.js";import{p as P}from"./plainButton-B7WOCgiF.js";import{r as d,e as W,X as Y,aX as s,al as B,N as i,bA as l,u as t,i as b,F as S,am as Z,V as x,b1 as O,Q as ee,aj as u,bD as te,ak as ae,be as oe}from"./@vue-ts87NNlE.js";import{_ as se,c as le,b as ne,h as re,r as E}from"./index-D0ldpvYI.js";import{l as pe}from"./lodash-D-SkTV7p.js";import{q as ie}from"./queryUrl-DaTGvNW7.js";import"./@vant-NmgEisJw.js";import"./pinia-B_HOjTBS.js";import"./vue-router-Bw4qQE88.js";import"./@vueuse-DLUPp4BS.js";import"./xe-utils-CfMIR_ol.js";import"./@vue-office-D7CPqAIZ.js";import"./vue-demi-BO4xsXkA.js";import"./vue-B7fnMq6U.js";import"./axios-B6xwUs71.js";import"./@x-ui-vue3-CwLx_scX.js";import"./pinia-plugin-persist-J3Q2VqHx.js";import"./vue3-menus-CnNWMJEM.js";import"./vue3-photo-preview-jb8ML41u.js";import"./vxe-table-CAWzlaHI.js";import"./dom-zindex-GlLoxNk1.js";const ue={class:"yCenter"},ce={__name:"goodsCollectList",setup(de){const y=d(""),v=d(""),c=le(),w=ne(),T=d(!1),g=d(!1),_=d([]),r=d({pageNum:1,pageSize:10,total:0}),I=d({SITE:" 现场收一级/现场收二级",FIRST_TO_SECOND:"二级收一级",ORIGIN_TO_FIRST:"一级仓库入库供应商设备",FIRST_TO_SITE:"现场收一级",SECOND_TO_SITE:"现场收二级"}),C=pe.debounce(F,300);async function F(){const a={...c,queryStr:y.value,state:v.value},{data:o}=await re.post(ie("sto/import-base/page",r.value),a),n=o.totalRow;r.value.total=n;const f=o.records.map((p,h)=>({...p,index:_.value.length+h+1}));_.value.push(...f),T.value=!1,g.value=r.value.pageNum*r.value.pageSize>n,r.value.pageNum++}function D(){r.value.pageNum=1,r.value.pageSize=10,_.value.length=0,C()}function V(){E.push}function G(){r.value.pageNum=1,r.value.pageSize=10,_.value.length=0,C()}function k(a,o){let n={};o==0?n={expId:c.deliveryType!=="ORIGIN_TO_FIRST"?a?.stoExportBase?.expId:a?.stoImportBase?.impId,deliveryType:a?.stoImportBase?.importType||a?.stoExportBase?.exportType,state:0,acceptType:1}:o==1?n={expId:a?.stoImportBase?.impId,deliveryType:a?.stoImportBase?.importType||a?.stoExportBase?.exportType,state:1,acceptType:1}:o==2&&(n={expId:a?.stoExportBase?.expId,deliveryType:a?.stoImportBase?.importType||a?.stoExportBase?.exportType,state:0,acceptType:0});const f={ORIGIN_TO_FIRST:"一级仓库入库",FIRST_TO_SECOND:"二级仓库收货"}[n.deliveryType]||"仓库收货";E.push({path:"/goodsCollectDetail",query:{title:f,...n}})}return W(()=>{_.value.length=0,g.value=!1,C()}),(a,o)=>{const n=X,f=M,p=j,h=P,N=K,$=A,L=H,q=J,z=Q,U=Y("skeleton");return s(),B(S,null,[i(f,{modelValue:t(y),"onUpdate:modelValue":o[0]||(o[0]=m=>b(y)?y.value=m:null),onBlur:D,shape:"round",background:"#f3f3f3",placeholder:"系统编号、进件编号、组织全称、姓名、手机号","show-action":""},{action:l(()=>[Z("div",ue,[i(n,{onClick:V,class:"!w-auto !h-[34px] shadow !px-[15px] !rounded-full !border-none !bg-[#ffab30] !text-white"},{default:l(()=>[x(" 新建 ")]),_:1})])]),_:1},8,["modelValue"]),i(z,{class:"flex-1 flex flex-col",active:t(v),"onUpdate:active":o[2]||(o[2]=m=>b(v)?v.value=m:null),background:"#f3f3f3","line-width":"80px",color:"#ffab30",onChange:G},{default:l(()=>[(s(),B(S,null,O(["待收货","已收货"],m=>i(q,{title:m,key:m},{default:l(()=>[i(L,{loading:t(T),"onUpdate:loading":o[1]||(o[1]=e=>b(T)?T.value=e:null),finished:t(g),"finished-text":"没有更多了",onLoad:t(C),class:"!pt-2"},{default:l(()=>[(s(!0),B(S,null,O(t(_),e=>ee((s(),u($,{key:e.index,inset:"",class:"px-2 py-4 !mb-2 shadowC !rounded-xl"},{default:l(()=>[t(c).deliveryType=="SITE"?(s(),u(p,{key:0,valueClass:"valueClass",titleClass:"titleClass",border:!1,title:"收货组织: ",value:e.stoExportBase.consigneeName},null,8,["value"])):(s(),u(p,{key:1,valueClass:"valueClass",titleClass:"titleClass",title:"收货组织: ",border:!1,value:e.impStoRoom&&e.impStoRoom.stoName?e.impStoRoom.stoName:"-"},null,8,["value"])),t(c).deliveryType=="ORIGIN_TO_FIRST"?(s(),u(p,{key:2,valueClass:"valueClass yellowText",titleClass:"titleClass",border:!1,title:"收货编号: ",value:e.stoImportBase.impId||"-"},{"right-icon":l(()=>[i(h,{class:"!h-[24px]",onClick:te(R=>a.$copyText(a.$get(e,"stoImportBase.impId")||a.$get(e,"stoExportBase.expId")),["stop"])},{default:l(()=>[x(" 复制 ")]),_:2},1032,["onClick"])]),_:2},1032,["value"])):ae("",!0),t(c).deliveryType=="ORIGIN_TO_FIRST"?(s(),u(p,{key:3,valueClass:"valueClass",titleClass:"titleClass",border:!1,title:"收货类型: ",value:e.stoImportBase.importType&&t(I)[e.stoImportBase.importType]?t(I)[e.stoImportBase.importType]:"-"},null,8,["value"])):(s(),u(p,{key:4,valueClass:"valueClass",titleClass:"titleClass",border:!1,title:"收货类型: ",value:e.stoExportBase.exportType&&t(I)[e.stoExportBase.exportType]?t(I)[e.stoExportBase.exportType]:"-"},null,8,["value"])),i(p,{valueClass:"valueClass",titleClass:"titleClass",border:!1,title:"备注: ",value:e.stoImportBase.remark||"-"},null,8,["value"]),i(p,{border:!1},{default:l(()=>[t(c).state==0&&t(c).deliveryType!="ORIGIN_TO_FIRST"?(s(),u(N,{key:0,onClick:R=>k(e,2)},{default:l(()=>[x(" 一键收货")]),_:2},1032,["onClick"])):(s(),u(N,{key:1,onClick:R=>k(e,t(v))},{default:l(()=>[x(oe(t(v)?"收货详情":"扫码收货"),1)]),_:2},1032,["onClick"]))]),_:2},1024)]),_:2},1024)),[[U,t(w).overlayShow]])),128))]),_:1},8,["loading","finished","onLoad"])]),_:2},1032,["title"])),64))]),_:1},8,["active"])],64)}}},Ve=se(ce,[["__scopeId","data-v-95f2ce2c"]]);export{Ve as default};
