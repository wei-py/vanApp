import{t as M,g as Q,B as X,h as A,k as G,v as H,y as J,m as K}from"./vant-BF4L1TGb.js";import{_ as P}from"./vButton-BgoZqamI.js";import{p as W}from"./plainButton-DQZH_kUz.js";import{r as n,e as Y,X as Z,aX as g,al as C,N as a,bA as t,u as s,i as T,F as y,am as aa,V as B,b1 as w,Q as ea,aj as ta,bD as oa}from"./@vue-ts87NNlE.js";import{_ as la,c as sa,b as na,h as ca,r as ua}from"./index-B7VWkQ_2.js";import{l as ra}from"./lodash-DhpMPSDc.js";import{q as ia}from"./queryUrl-BTYYWpY7.js";import"./@vant-NmgEisJw.js";import"./pinia-B_HOjTBS.js";import"./vue-router-Bw4qQE88.js";import"./@vueuse-QQdVrKV8.js";import"./xe-utils-DXe260hc.js";import"./@vue-office-GFDCm3nC.js";import"./vue-demi-BEcyFcst.js";import"./vue-RHKPHaPZ.js";import"./axios-B4uVmeYG.js";import"./@x-ui-vue3-CwLx_scX.js";import"./pinia-plugin-persist-J3Q2VqHx.js";import"./vue3-menus-CnNWMJEM.js";import"./vue3-photo-preview-CkWuweRQ.js";import"./vxe-table-QgdefRjh.js";import"./dom-zindex-GlLoxNk1.js";const pa={class:"yCenter"},da={__name:"goodsRejectList",setup(va){const v=n(""),x=sa(),p=n(x.state*1),S=na(),N=n(!1),f=n(!1),d=n(!1),c=n([]),o=n({pageNum:1,pageSize:10,total:0}),k=n({FIRST_TO_SECOND:"二级仓库退一级仓库",FIRST_TO_SITE:"现场退一级仓库",SECOND_TO_SITE:"现场退二级仓库",SITE:"现场退货"}),_=ra.debounce(I,300);async function I(){const u={...x,queryTag:v.value,state:p.value+2},{data:l}=await ca.post(ia("sto/stoBack/page",o.value),u),m=l.totalRow;o.value.total=m;const b=l.records.map((h,r)=>({...h,index:c.value.length+r+1}));c.value.push(...b),console.log(c.value),f.value=!1,d.value=o.value.pageNum*o.value.pageSize>m,o.value.pageNum++}function D(){o.value.pageNum=1,o.value.pageSize=10,c.value.length=0,d.value=!1,_()}function R(){N.value=!0}function V(){o.value.pageNum=1,o.value.pageSize=10,c.value.length=0,d.value=!1,_()}function E(u){ua.push({path:"/goodsRejectDetail",query:{title:k.value[u.stoBack.backType],backId:u.stoBack?.backId||"",state:p.value,backType:u.stoBack.backType}})}return Y(async()=>{c.value.length=0,d.value=!1,await _()}),(u,l)=>{const m=X,b=M,h=W,r=A,L=P,q=G,F=H,O=J,j=K,z=Q,U=Z("skeleton");return g(),C(y,null,[a(b,{modelValue:s(v),"onUpdate:modelValue":l[0]||(l[0]=i=>T(v)?v.value=i:null),onBlur:D,shape:"round",background:"#f3f3f3",placeholder:"系统编号、进件编号、组织全称、姓名、手机号","show-action":""},{action:t(()=>[aa("div",pa,[a(m,{onClick:R,class:"!w-auto !h-[34px] shadow !px-[15px] !rounded-full !border-none !bg-[#ffab30] !text-white"},{default:t(()=>[B(" 新建 ")]),_:1})])]),_:1},8,["modelValue"]),a(z,{class:"flex-1 flex flex-col",active:s(p),"onUpdate:active":l[2]||(l[2]=i=>T(p)?p.value=i:null),background:"#f3f3f3","line-width":"80px",color:"#ffab30",onChange:V,swipeable:""},{default:t(()=>[(g(),C(y,null,w(["待发货","已发货"],i=>a(j,{title:i,key:i},{default:t(()=>[a(F,{loading:s(f),"onUpdate:loading":l[1]||(l[1]=e=>T(f)?f.value=e:null),finished:s(d),"finished-text":"没有更多了",onLoad:s(_),class:"!pt-2"},{default:t(()=>[(g(!0),C(y,null,w(s(c),e=>ea((g(),ta(q,{key:e.index,inset:"",class:"px-2 py-4 !mb-2 shadowC !rounded-xl"},{default:t(()=>[a(r,{valueClass:"valueClass yellowText",titleClass:"titleClass",border:!1,title:"退货编号: ",value:e.stoBack.backId||"-"},{"right-icon":t(()=>[a(h,{class:"!h-[24px]",onClick:oa($=>u.$copyText(e.stoBack.backId),["stop"])},{default:t(()=>[B(" 复制 ")]),_:2},1032,["onClick"])]),_:2},1032,["value"]),a(r,{valueClass:"valueClass",titleClass:"titleClass",border:!1,title:"退货方: ",value:e.stoBack.backName||"-"},null,8,["value"]),a(r,{valueClass:"valueClass",titleClass:"titleClass",border:!1,title:"退货类型: ",value:e.stoBack.backType&&s(k)[e.stoBack.backType]?s(k)[e.stoBack.backType]:"-"},null,8,["value"]),a(r,{valueClass:"valueClass",titleClass:"titleClass",border:!1,title:"备注: ",value:e.stoBack.remark||"-"},null,8,["value"]),a(r,{border:!1,title:""},{default:t(()=>[a(L,{onClick:$=>E(e)},{default:t(()=>[B(" 退货详情 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)),[[U,s(S).overlayShow]])),128))]),_:1},8,["loading","finished","onLoad"]),a(O,{class:"!bg-[#fed38c]"})]),_:2},1032,["title"])),64))]),_:1},8,["active"])],64)}}},Fa=la(da,[["__scopeId","data-v-f619d6d7"]]);export{Fa as default};
