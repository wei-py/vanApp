import{_ as P}from"./vBtn-OZoOqbE9.js";import{m as F,_ as T}from"./makeForm-CZNh9NHd.js";import{m as d,a as C,b as S}from"./backfill-DhcBw5pe.js";import{m as b}from"./makeDate-CXmH8QRA.js";import{m as c,a as u}from"./makeUpload-D64lSZ7H.js";import{D as p,h as s,c as q,e as D,x as A}from"./index-r_oNj4vA.js";import{l as t}from"./lodash-DhpMPSDc.js";import{b as y,m as g}from"./makeSelect-Cjo5tNN-.js";import{r as O}from"./runTime-DAjLGjV1.js";import{q as h}from"./queryUrl-BTYYWpY7.js";import{e as I,aX as x,al as B,N as i,u as m,F as L}from"./@vue-ts87NNlE.js";import"./vant-CJN7raQG.js";import"./@vant-NmgEisJw.js";import"./wait-Dqho1LKt.js";import"./class-COLQ8iHP.js";import"./dayjs-DWD9bsSZ.js";import"./@vue-office-GFDCm3nC.js";import"./vue-demi-BEcyFcst.js";import"./vue-RHKPHaPZ.js";import"./axios-B4uVmeYG.js";import"./pinia-B_HOjTBS.js";import"./vue-router-Bw4qQE88.js";import"./@vueuse-QQdVrKV8.js";import"./xe-utils-DXe260hc.js";import"./@x-ui-vue3-CwLx_scX.js";import"./pinia-plugin-persist-J3Q2VqHx.js";import"./vue3-menus-CnNWMJEM.js";import"./vue3-photo-preview-CkWuweRQ.js";import"./vxe-table-QgdefRjh.js";import"./dom-zindex-GlLoxNk1.js";const N=[d("并网信息"),{...b({name:"startTime"}),label:"供电验收时间",required:!0},{...b({name:"checkAcceptTime"}),label:"并网合闸时间",required:!0},{formType:"input",label:"电厂交易编号",value:"",required:!0,name:"generatorNumber",placeholder:"请认真核对后输入"},{formType:"input",label:"并网备注(选填)",value:"",name:"annotation",placeholder:"请输入"}],U=[d("并网资料"),{label:"补充/整改施工影像件(选填)",name:"zlwOtherFile",...c(999,100),backfill(e){t.bind(u,this)(e)},getParam(e){e[this.name]=e[this.name].map(a=>p(a))}}],X=[d("并网资料"),{label:"电站发电量监控截图(发电三天)",name:"monitor",required:!0,...c(999,100),backfill(e){t.bind(u,this)(e)},getParam(e){e.monitor=e.monitor.map(a=>p(a)),console.log(e.monitor,33333)}}],M=[d("发电影响复核"),{label:"全方位阴影遮挡情况水印照",name:"omnibearingShadowOcclusion",required:!0,...c(999,100),backfill(e){t.bind(u,this)(e)},getParam(e){e.omnibearingShadowOcclusion=e.omnibearingShadowOcclusion.map(a=>p(a))}},{label:"四周遮挡复核环绕视频",name:"allAroundReviewSurroundVideo",required:!0,...c(999,100),backfill(e){t.bind(u,this)(e)},getParam(e){e.allAroundReviewSurroundVideo=e.allAroundReviewSurroundVideo.map(a=>p(a))}}],V=[d("财产险"),{...b({name:"startDate"}),label:"保险开始日期",name:"startDate",required:!0},{...b({name:"endDate"}),label:"保险结束日期",name:"endDate",required:!0},{formType:"input",label:"保险公司",name:"insuranceCompany",placeholder:"请选择",required:!0,...y(),...g("insuranceCompany",[],"dynamic"),async backfill(e){const{data:a}=await s.get("insurance/getInsuranceCompany"),o=a.map(r=>({text:r.insuranceCompany,value:r.insuranceCompany}));this.makeSelect(e[this.name],o)}},{formType:"input",label:"保险编号",required:!0,name:"insuranceNumber",value:"",placeholder:"请输入"},{formType:"input",label:"保险类型",name:"insuranceType",readonly:!0,...y(),...g("insuranceType",[{value:1,text:"财产险"}]),value:"财产险",realvalue:1},{formType:"input",label:"投保金额",value:"",name:"insuredAmount",type:"digit",placeholder:"等于每W单价乘以总容量(W)",...C("元")},{formType:"input",label:"第一受益人",name:"beneficiary",value:"",placeholder:"请选择",...y(),...g("beneficiary",[],"dynamic"),async backfill(e){const{data:a}=await s.get("insurance/getBeneficiaryCompany"),o=a.map(r=>({text:r.beneficiary,value:r.beneficiary}));this.makeSelect(e[this.name],o)}},{...c(999,100),label:"电站保险单(PDF文档)",name:"insurancePolicyP",required:!0,backfill(e){t.bind(u,this)(t.get(e,"insuranceList[0]",{}))},getParam(e){t.isArray(e.insuranceList)||(e.insuranceList=[{}]);const a=["startDate","endDate","insuranceCompany","insuranceNumber","insuranceType","insuredAmount","beneficiary","insurancePolicyP"],o=t.pick(e,[...a,"orderId"]);e.insurancePolicyP=e.insurancePolicyP.map(r=>p(r)),o.insurancePolicyP=JSON.stringify(e.insurancePolicyP),e.insuranceList=[o],a.forEach(r=>delete e[r])}}],ge={__name:"gridConnected",setup(e){let a=F({gridConnectedMessageForm:N,zlwOtherFile:U,monitorForm:X,omnibearingShadowOcclusionForm:M,propertyInsuranceForm:V});const o=q();I(()=>{O(r)});async function r(){const n="/order/get-grid",{data:f}=await s.get(h(n,o));S(a,{...f,...t.get(f,"insuranceList.0",{})})}async function k(){const n=A();return await s.post("order/put-grid",n)}async function v(n){n.taskId="TASK_BWXX",await s.post(h("approval/put-approval/bto/grid",n))}async function w(n){n.taskId="TASK_BWXX",await s.post("approval/do-approval/bto/grid",n)}return D({getData:r,saveData:k,submitData:v,approvalData:w}),(n,f)=>{const l=T,_=P;return x(),B(L,null,[i(l,{form:m(a).gridConnectedMessageForm,class:"pt-3","group-class":"shadowC"},null,8,["form"]),i(l,{form:m(a).zlwOtherFile,class:"pt-3","group-class":"shadowC"},null,8,["form"]),i(l,{form:m(a).monitorForm,class:"pt-3","group-class":"shadowC"},null,8,["form"]),i(l,{form:m(a).omnibearingShadowOcclusionForm,class:"pt-3","group-class":"shadowC"},null,8,["form"]),i(l,{form:m(a).propertyInsuranceForm,class:"pt-3","group-class":"shadowC"},null,8,["form"]),i(_)],64)}}};export{ge as default};
