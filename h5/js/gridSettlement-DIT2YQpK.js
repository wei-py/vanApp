import{_ as g}from"./vBtn-TO34BCEa.js";import{m as v,_ as b}from"./makeForm-B3HhMcgC.js";import{m as l,a as i,b as k}from"./backfill-xLooAZ69.js";import{b as T,m as h}from"./makeSelect-CelQ3_Nu.js";import{m as F,a as q}from"./makeUpload-BbIDm5Yp.js";import{D as w,c as x,h as a,e as D,x as P}from"./index-L-kxfX5L.js";import{l as S}from"./lodash-DhpMPSDc.js";import{q as s}from"./queryUrl-BTYYWpY7.js";import{e as U,aX as B,al as N,N as o,u as n,F as O}from"./@vue-ts87NNlE.js";import"./vant-BjNCsb4u.js";import"./@vant-NmgEisJw.js";import"./wait-Dqho1LKt.js";import"./class-COLQ8iHP.js";import"./axios-B4uVmeYG.js";import"./pinia-B_HOjTBS.js";import"./vue-router-Bw4qQE88.js";import"./@vueuse-QQdVrKV8.js";import"./xe-utils-DXe260hc.js";import"./@vue-office-GFDCm3nC.js";import"./vue-demi-BEcyFcst.js";import"./vue-RHKPHaPZ.js";import"./@x-ui-vue3-CwLx_scX.js";import"./pinia-plugin-persist-J3Q2VqHx.js";import"./vue3-menus-CnNWMJEM.js";import"./vue3-photo-preview-CkWuweRQ.js";import"./vxe-table-QgdefRjh.js";import"./dom-zindex-GlLoxNk1.js";const A=[l("资料结算信息"),{formType:"input",label:"结算类型",value:3,required:!0,placeholder:"请输入",readonly:!0,name:"settlementType",...T(),...h("settlementType",[{text:"资方结算",value:1},{text:"供应商并网结算",value:2},{text:"供应商资料结算",value:3}]),onMounted(){this.click=()=>{},this.isLink=!1}},{formType:"input",label:"供应商可结算金额",value:"",...i("元"),type:"digit",required:!0,placeholder:"请输入",name:"settlementAmount"},{formType:"input",label:"供应商质保金金额",value:"",required:!0,...i("元"),type:"digit",placeholder:"请输入",name:"recognizance"}],I=[l("资料结算发票"),{...F(999,100),formType:"input",label:"PDF或图片附件",required:!0,name:"receipt",backfill(t){t.receipt=JSON.parse(t.receipt),S.bind(q,this)(t)},getParam(t){t.receipt=t.receipt.map(r=>w(r)),t.receipt=JSON.stringify(t.receipt)}}],ne={__name:"gridSettlement",setup(t){const r=v({settlementForm:A,receiptForm:I}),c=x();U(()=>{p()});async function p(){let{data:e}=await a.get(s("order/get-grid-settlement",{orderId:c.orderId,type:3}));e={...e,settlementType:3,approvalType:"APPROVAL_BTO"},k(r,e)}async function u(){const e=P();return await a.post("order/put-grid-settlement",e)}async function d(e){e.setType=3,await a.post(s("approval/put-approval/bto/settle",e))}async function f(e){e.setType=3,await a.post("approval/do-approval/bto/settle",e)}return D({getData:p,saveData:u,submitData:d,approvalData:f}),(e,y)=>{const m=b,_=g;return B(),N(O,null,[o(m,{form:n(r).settlementForm,class:"pt-3","group-class":"shadowC"},null,8,["form"]),o(m,{form:n(r).receiptForm,class:"pt-3","group-class":"shadowC"},null,8,["form"]),o(_)],64)}}};export{ne as default};
