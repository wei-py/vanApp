import{a as x,l as W,m as B,n as X,o as D,p as F,G as H,q as Z,i as J,r as M}from"./vant-PdAvEskO.js";import{i as I,r as t,d as w,_ as U,c as $,b as z,h as Y}from"./index-D0ldpvYI.js";import{l as o}from"./lodash-D-SkTV7p.js";import{r as j,e as Q,X as R,aX as i,al as p,am as g,N as d,bA as r,Q as E,u as f,F as c,b1 as N,aj as k,G as tt,be as et,ak as v,a_ as at,aY as st}from"./@vue-ts87NNlE.js";import"./@vant-NmgEisJw.js";import"./pinia-B_HOjTBS.js";import"./vue-router-Bw4qQE88.js";import"./@vueuse-DLUPp4BS.js";import"./xe-utils-CfMIR_ol.js";import"./@vue-office-D7CPqAIZ.js";import"./vue-demi-BO4xsXkA.js";import"./vue-B7fnMq6U.js";import"./axios-B6xwUs71.js";import"./@x-ui-vue3-CwLx_scX.js";import"./pinia-plugin-persist-J3Q2VqHx.js";import"./vue3-menus-CnNWMJEM.js";import"./vue3-photo-preview-jb8ML41u.js";import"./vxe-table-CAWzlaHI.js";import"./dom-zindex-GlLoxNk1.js";const it="/orderh5/background/taskBackground.png",L=location.port==2222?"/orderh5":"",rt=[{text:"订单列表",icon:"orderList",path:"/realLease",query:{stageId:"",stateId:"",taskId:""}},{text:"设计变更",icon:"designChange",path:"/designChange",query:{id:1,name:"134"}},{text:"供应链",icon:"supplyChain",path:"/supplyChain",query:{id:1,name:"134"}},{text:"备案统计",realText:"备案证列表",icon:"recordStatistics",path:"/recordList",query:{id:1,name:"134"}},{text:"收益查询",icon:"incomeStatistics",path:"/income",onChange(){this.hidden=I()},query:{id:1,name:"134"}}].map(a=>({...a,from:"常用数据",icon:`./icons/realLeaseTop/${a.icon}.png`.replace("./icons",`.${L}/icons`),tap(){t.push({path:a.path,query:{...a.query,from:"cysj",title:a.realText||a.text}})}})),nt=[{text:"预审",icon:"inquiry",path:"/realLease",onChange(){this.hidden=I()},tap(){t.push({path:this.path,query:{...this.query,from:"rwdq",title:this.text}})},detailPath:"inquiry",query:{stageId:"PRE_APPROVAL",stateId:"",taskId:"TASK_YSXX",addButton:!0}},{text:"客户信息",icon:"customerInfo",detailPath:"customerInfo",path:"/realLease",tap(){t.push({path:this.path,query:{...this.query,from:"rwdq",title:this.text}})},query:{stageId:"CUSTOMER_INFO",stateId:null,taskId:null}},{text:"业务踏勘",icon:"reconnaissance",detailPath:"businessReconnaissance",path:"/realLease",tap(){t.push({path:this.path,query:{...this.query,from:"rwdq",title:this.text}})},query:{stageId:"KAN_CHA",stateId:null,taskId:"TASK_TA_KAN"}},{text:"技术勘察",icon:"technicalInvestigation",detailPath:"technicalLnvestigation",path:"/realLease",tap(){t.push({path:this.path,query:{...this.query,from:"rwdq",title:this.text}})},query:{stageId:"KAN_CHA",stateId:null,taskId:"TASK_JSKC"}},{text:"合同签约",icon:"contractSigning",detailPath:"contractAward",path:"/realLease",tap(){t.push({path:this.path,query:{...this.query,from:"rwdq",title:this.text}})},query:{stageId:"LEASE_SIGN",stateId:"WAITING_SIGN",taskId:"TASK_HTQY"}},{text:"备案证及权属证明",icon:"certificate",detailPath:"certificate",path:"/realLease",tap(){t.push({path:this.path,query:{...this.query,from:"rwdq",title:this.text}})},query:{stageId:"BAZING",stateId:null,taskId:"TASK_BAZXX"},onChange(){this.text=w()?"备案证":"备案证及权属证明"}},{text:"初设评审",icon:"initialReview",detailPath:"InitialReview",path:"/realLease",tap(){t.push({path:this.path,query:{...this.query,from:"rwdq",title:this.text}})},query:{stageId:"DESIGN",stateId:null,taskId:"TASK_CSPSXX"}},{text:"施工",icon:"build",detailPath:"build",path:"/realLease",tap(){t.push({path:this.path,query:{...this.query,from:"rwdq",title:this.text}})},query:{stageId:"CONSTRUCT",stateId:null,taskId:"CONSTRUCT"}},{text:"并网",icon:"gridConnected",detailPath:"gridConnected",path:"/realLease",tap(){t.push({path:this.path,query:{...this.query,from:"rwdq",title:this.text}})},query:{stageId:"GRID_CONNECTION",stateId:null,taskId:"TASK_BWXX"}},{text:"结算",icon:"settlement",detailPath:"gridConnectedAccount",path:"/realLease",tap(){t.push({path:this.path,query:{...this.query,from:"rwdq",title:this.text}})},query:{stageId:"SETTLEMENT",stateId:null,taskId:null}},{text:"购售电合同",icon:"purchaseContract",detailPath:"electricityContract",path:"/realLease",tap(){t.push({path:this.path,query:{...this.query,from:"rwdq",title:this.text}})},query:{stageId:"GS_CONTRACT",stateId:null,taskId:"TASK_GSDHTXX"}},{text:"完成",icon:"complete",path:"/realLease",tap(){t.push({path:this.path,query:{...this.query,from:"rwdq",title:this.text}})},query:{stageId:"FINISHED",stateId:"FINISHED",taskId:null,realTitle:"完成"}},{text:"终止",icon:"Termination",path:"/realLease",tap(){t.push({path:this.path,query:{...this.query,from:"rwdq",title:this.text}})},query:{stageId:"TERMINATE",stateId:"TERMINATE",taskId:null,realTitle:"终止"}},{text:"内审驳回",icon:"internalSummary",path:"/realLease",tap(){t.push({path:this.path,query:{...this.query,from:"rwdq",title:this.text}})},query:{stageId:null,stateId:"REJECT",taskId:null,excludeStateIds:"APPROVAL_REJECT_LEASE"}},{text:"资方驳回",icon:"capitalSummary",path:"/realLease",tap(){t.push({path:this.path,query:{...this.query,from:"rwdq",title:this.text}})},query:{stageId:null,stateId:"APPROVAL_REJECT_LEASE"}}].map(a=>({...a,from:"任务大全",icon:`./icons/realLeaseTop/${a.icon}.png`.replace("./icons",`.${L}/icons`)})),ot=[{text:"客户审核",icon:"businessAudit",path:"/realLease",tap(){t.push({path:this.path,query:{...this.query,from:"shdq",title:this.text}})},query:{stageId:"CUSTOMER_INFO",stateId:"WAITING_APPROVAL",taskId:null}},{text:"踏勘一审",icon:"reconnaissanceFirstAudit",path:"/realLease",tap(){t.push({path:this.path,query:{...this.query,from:"shdq",title:this.text}})},query:{stageId:"KAN_CHA",stateId:"WAITING_APPROVAL",taskId:"TASK_TA_KAN"}},{text:"勘察审核",icon:"multiAudit",path:"/realLease",tap(){t.push({path:this.path,query:{...this.query,from:"shdq",title:this.text}})},query:{stageId:"KAN_CHA",stateId:"WAITING_APPROVAL"}},{text:"风险审查",icon:"multiAudit",path:"/realLease",onChange(){this.hidden=!I()},tap(){x("功能开发中")},query:{stageId:"KAN_CHA",stateId:"WAITING_APPROVAL"}},{text:"备案权属审核",icon:"recordOwnership",path:"/realLease",tap(){t.push({path:this.path,query:{...this.query,from:"shdq",title:this.text}})},query:{stageId:"BAZING",stateId:"WAITING_APPROVAL",taskId:"TASK_BAZXX"},onChange(){this.text=w()?"备案审核":"备案权属审核"}},{text:"初设审核",icon:"changeAudit",path:"/realLease",tap(){t.push({path:this.path,query:{...this.query,from:"shdq",title:this.text}})},query:{stageId:"DESIGN",stateId:"WAITING_APPROVAL",realTitle:"初设审核"}},{text:"施工审核",icon:"buildAudit",path:"/realLease",tap(){t.push({path:this.path,query:{...this.query,from:"shdq",title:this.text}})},query:{stageId:"CONSTRUCT",stateId:"WAITING_APPROVAL"}},{text:"完工审核",icon:"multiAudit",path:"/realLease",onChange(){this.hidden=!I()},tap(){x("功能开发中")},query:{stageId:"KAN_CHA",stateId:"WAITING_APPROVAL"}},{text:"并网审核",icon:"gridConnectedAudit",path:"/realLease",tap(){t.push({path:this.path,query:{...this.query,from:"shdq",title:this.text}})},query:{stageId:"GRID_CONNECTION",stateId:"WAITING_APPROVAL"}},{text:"投放审查",icon:"multiAudit",path:"/realLease",onChange(){this.hidden=!I()},tap(){x("功能开发中")},query:{stageId:"KAN_CHA",stateId:"WAITING_APPROVAL"}},{text:"结算审核",icon:"completeAudit",path:"/realLease",tap(){t.push({path:this.path,query:{...this.query,from:"shdq",title:this.text}})},query:{stageId:"SETTLEMENT",stateId:"WAITING_APPROVAL"}},{text:"购售电审核",icon:"businessAudit",path:"/realLease",tap(){t.push({path:this.path,query:{...this.query,from:"shdq",title:this.text}})},query:{stageId:"GS_CONTRACT",stateId:"WAITING_APPROVAL",taskId:"TASK_GSDHTXX"}},{text:"资方购售电审核",icon:"multiAudit",path:"/realLease",onChange(){this.hidden=!I()},tap(){x("功能开发中")},query:{stageId:"KAN_CHA",stateId:"WAITING_APPROVAL"}}].map(a=>({...a,from:"审核大全",icon:`./icons/realLeaseTop/${a.icon}.png`.replace("./icons",`.${L}/icons`)})),ht=a=>(at("data-v-c0bbdf2e"),a=a(),st(),a),lt={class:"py-2 bg-[#f3f3f3]"},ut=ht(()=>g("img",{class:"!w-full h-full !object-cover rounded-2xl",src:it},null,-1)),pt={class:"bg-[#f3f3f3] pb-1 flex-1"},dt=["src"],ct={class:"text-center w-full text-[14px] h-[28px] leading-[14px]"},It={__name:"home",setup(a){$();const _=z(),G=["真租顶(自然人)","真租顶(法人)","真租顶(通用资方)"],n=j([{title:"常用数据",task:rt,hidden:!1},{title:"任务大全",task:nt,hidden:!1},{title:"审核大全",task:ot,hidden:!1}]);Q(()=>{P(_.active)});async function P(S){const y=["ZZD","ZZD_ORG",""][S];_.headers.Biztype=y;const{data:T}=await Y.get("order-state/all-task-state-count"),s=o.groupBy(T,"stateId");n.value[0].task=n.value[0].task.map(e=>(o.isFunction(e.onChange)&&e.onChange(),e)),n.value[1].task=n.value[1].task.map(e=>{o.isFunction(e.onChange)&&e.onChange();const A=o.find(s.WAITING_FILLED,l=>l.taskName.includes(e.text));let h={...e,count:o.get(A,"count",0)};return e.text=="内审驳回"&&(h.count=s.APPROVAL_REJECT[0].count+s.APPROVAL_REJECT_BTO[0].count),e.text=="资方驳回"&&(h.count=s.APPROVAL_REJECT_LEASE[0].count),e.text=="合同签约"&&(h.count=s.WAITING_SIGN[0].count+s.WAITING_SIGN_RE[0].count),h}),n.value[2].task=n.value[2].task.map(e=>{o.isFunction(e.onChange)&&e.onChange();const A=o.find(s.WAITING_APPROVAL,l=>{let C=e.text.includes(l.taskName.slice(0,2));return e.text=="踏勘一审"&&l.taskName=="业务踏勘"||e.text=="勘察审核"&&l.taskName=="勘察"?!0:C});return{...e,count:o.get(A,"count",0)}}),n.value[2].task[1].count=s.WAITING_APPROVAL_INNER[0].count}return(S,y)=>{const T=X,s=W,e=D,A=F,h=H,l=Z,C=J,O=M,b=B,V=R("skeleton-item"),K=R("skeleton");return i(),p(c,null,[g("div",lt,[d(s,{autoplay:3e3,"lazy-render":"",class:"mx-auto !w-[96vw] h-[23vh]"},{indicator:r(({active:m,total:q})=>[]),default:r(()=>[d(T,{class:"!w-full h-full mx-auto"},{default:r(()=>[ut]),_:1})]),_:1})]),E((i(),p("div",pt,[d(b,{active:f(_).active,"onUpdate:active":y[0]||(y[0]=m=>f(_).active=m),background:"#f3f3f3","line-width":"80px",onChange:P,swipeable:"","swipe-threshold":2},{default:r(()=>[(i(),p(c,null,N(G,m=>d(O,{title:m,key:m},{default:r(()=>[(i(!0),p(c,null,N(f(n),(q,_t)=>(i(),p(c,{key:q.title},[q.hidden?v("",!0):E((i(),k(C,{key:0,inset:"",class:"!mt-2 shadowC"},{default:r(()=>[d(e,{title:q.title,"title-class":"font-bold text-[20px] h-[30px]  leading-[30px]"},null,8,["title"]),d(l,{border:!1,"column-num":5,class:"mx-[5px] pb-[10px]"},{default:r(()=>[(i(!0),p(c,null,N(q.task,u=>(i(),p(c,{key:u.path},[u.hidden?v("",!0):(i(),k(h,{key:0,onClick:()=>u.tap(),class:"!py-0"},{default:r(()=>[d(A,{offset:[-9,9],class:"p-2","show-zero":!1,max:"99",content:u.count},{default:r(()=>[g("img",{src:u.icon,fit:"contain",class:tt([u.imgClass,"bg-[#ffcf48] rounded-xl shadowC van-haptics-feedback p-1"]),alt:""},null,10,dt)]),_:2},1032,["content"]),g("p",ct,et(u.text),1)]),_:2},1032,["onClick"]))],64))),128))]),_:2},1024)]),_:2},1024)),[[V]])],64))),128))]),_:2},1032,["title"])),64))]),_:1},8,["active"])])),[[K,f(_).overlayShow]])],64)}}},Ot=U(It,[["__scopeId","data-v-c0bbdf2e"]]);export{Ot as default};
