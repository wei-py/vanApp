import{h as T,W as N,o as W,f as G,g as L,X as A,Y as j,Z as z,B as O,U as X,d as q,y as K,R as Q,t as Y,_ as Z,$ as H,I as J,L as ee,i as ne,F as oe}from"./vant-BjNCsb4u.js";import{e as se,o as I,b3 as re,aX as p,al as k,b1 as D,F as x,b2 as E,aj as m,ar as V,u as l,bA as b,N as C,ak as _,V as ae,P as te,bD as R,b4 as le,i as ce,c as F,X as ie,Q as ue,G as fe,d as de,f as pe,aS as he}from"./@vue-ts87NNlE.js";import{L as ge,D as g,G as $,b as me,u as be,M as ve}from"./index-C9aRjUQ6.js";import{l as a,a as _e}from"./lodash-DhpMPSDc.js";const B={input:T,switch:N,cell:W,popup:G,popover:L,cascader:A,calendar:j,pick:z,button:O,upload:X,numberKeyboard:q,radioGroup:K,radio:Q,icon:Y,date:Z,text:H};function Ce(e){let o=a.get(e,"labelClass","");return o+=" !min-w-[30%]",o=a.uniq(o.split(" ")).join(" "),a.set(e,"labelClass",o),a.has(e,"inputAlign")||(e.inputAlign="right"),e.formType=="input"&&ye(e),B[e.formType]||e.formType}function ye(e){a.isUndefined(e.type)&&(e.type="textarea"),e.type=="digit"&&!a.isFunction(e.backfill)&&(e.backfill=function(o){this.value=o[this.name]}),a.merge(e,{autosize:!0,rows:"1"})}const we={__name:"recuDynComponent",props:{form:{},title:{},titleClass:{},fullPath:{}},setup(e){Date.now()+a.random(0,100);const o=location.port==2222?"/orderh5":"",r=e;function t(c){const u=[];return a.omit(c,["formType","inlineForm","realValue","ref",...u])}function d(c){let u=!1;return a.isBoolean(c.hidden)&&(u=c.hidden),a.isFunction(c.hidden)&&(u=c.hidden()),ce(c.hidden)&&(u=c.hidden),u}function U(c,u){}se(()=>{}),I(()=>{});function i(c,u,...v){return a.isFunction(c[u])?c[u](...v,c):()=>{}}return(c,u)=>{const v=re("recuDynComponent",!0),h=J,f=ee;return p(!0),k(x,null,D([r.form].flat(),(s,y)=>(p(),k(x,{key:y},[E(c.$slots,s.customSlot),d(s)?_("",!0):(p(),m(le(l(B)[s.formType]),te({key:0,ref_for:!0,ref:n=>void 0,modelValue:s.value,"onUpdate:modelValue":n=>s.value=n,show:s.show,"onUpdate:show":n=>s.show=n},t(s),{beforeRead:(...n)=>i(s,"beforeRead",...n),onClick:R((...n)=>i(s,"click",...n),["stop"]),onClose:(...n)=>i(s,"close",...n),onFinish:(...n)=>i(s,"finish",...n),onClickRightIcon:(...n)=>i(s,"clickRightIcon",...n),onClickLeftIcon:(...n)=>i(s,"clickLeftIcon",...n),onClickOverlay:R((...n)=>i(s,"clickOverlay",...n),["stop"]),onConfirm:(...n)=>i(s,"confirm",...n),onInput:(...n)=>i(s,"input",...n),onBlur:(...n)=>i(s,"blur",...n),onSelect:(...n)=>i(s,"select",...n),onClickPreview:(...n)=>i(s,"clickPreview",...n),onCancel:(...n)=>i(s,"cancel",...n),"onUpdate:modelValue":(...n)=>i(s,"updateValue",...n)}),V({"preview-cover":b(n=>[l(ge)(n)?(p(),m(h,{key:1,src:n.url||n.objectUrl,class:"w-[80px] h-[80px] bg-[#f7f8fa]",fit:"cover"},{error:b(()=>[ae("加载失败")]),loading:b(()=>[C(f,{type:"spinner",size:"20"})]),_:2},1032,["src"])):(p(),k(x,{key:0},[l(g)(n).endsWith(".pdf")?(p(),m(h,{key:0,src:`.${l(o)}/icons/office/pdf.svg`,class:"w-[80px] h-[80px] !rounded-[8px] bg-[#f7f8fa]",fit:"contain"},null,8,["src"])):_("",!0),l(g)(n).endsWith(".ppt")||l(g)(n).endsWith(".pptx")?(p(),m(h,{key:1,src:`.${l(o)}/icons/office/ppt.svg`,class:"w-[80px] h-[80px] !rounded-[8px] bg-[#f7f8fa]",fit:"contain"},null,8,["src"])):_("",!0),l(g)(n).endsWith(".docx")||l(g)(n).endsWith(".doc")?(p(),m(h,{key:2,src:`.${l(o)}/icons/office/word.svg`,class:"w-[80px] h-[80px] !rounded-[8px] bg-[#f7f8fa]",fit:"contain"},null,8,["src"])):_("",!0),l(g)(n).endsWith(".xlsx")||l(g)(n).endsWith(".xls")?(p(),m(h,{key:3,src:`.${l(o)}/icons/office/excel.svg`,class:"w-[80px] h-[80px] !rounded-[8px] bg-[#f7f8fa]",fit:"contain"},null,8,["src"])):_("",!0)],64))]),_:2},[D(l(_e.get)(s,"inlineForm",[]),n=>({name:n.slot,fn:b(()=>[C(v,{form:n},null,8,["form"])])}))]),1040,["modelValue","onUpdate:modelValue","show","onUpdate:show","beforeRead","onClick","onClose","onFinish","onClickRightIcon","onClickLeftIcon","onClickOverlay","onConfirm","onInput","onBlur","onSelect","onClickPreview","onCancel"]))],64))),128)}}},Ue={__name:"vantForm",props:{form:{},title:{},titleClass:{},groupClass:{},approvalName:{},readonly:{},disabled:{},showErrorMessage:{}},emits:["submit"],setup(e,{emit:o}){const r=e,t=$(),d=me(),U=F(()=>a.isUndefined(r.readonly)?!d.btns.canEdit:r.readonly),i=F(()=>a.isUndefined(r.disabled)?!d.btns.canEdit:r.disabled),c=F(()=>a.isUndefined(r.showErrorMessage)?d.btns.canEdit:r.showErrorMessage),u=[r.form].flat().filter(f=>f?.customSlot).map(f=>f.customSlot);function v(f){return a.find(r.form,s=>s.customSlot==f)}function h(f){f&&t.submitDoms.push(f),r.approvalName&&(t.approvalDoms[r.approvalName]=f)}return I(()=>{t.submitDoms.length=0,t.approvalDoms={}}),(f,s)=>{const y=ne,n=oe,P=ie("skeleton");return ue((p(),m(n,{ref:h,readonly:l(U),disabled:l(i),"show-error-message":l(c)},{default:b(()=>[C(y,{inset:"",class:fe([r.groupClass,""])},{default:b(()=>[C(we,{form:r.form},V({_:2},[D(l(u),w=>({name:w,fn:b(()=>[E(f.$slots,w,{slot:v(w)})])}))]),1032,["form"])]),_:3},8,["class"])]),_:3},8,["readonly","disabled","show-error-message"])),[[P,l(d).overlayShow]])}}};function ke(e){return e.map(o=>({validator(r){const t=o(r);return this.message=t,!a.get(t,"length")},message:"",trigger:"onSubmit"}))}function S(e){if(e.required){const r=e.label;e.rules=[...a.get(e,"rules",[]),t=>t.length||`${r}必填`]}a.forIn(e,async(r,t)=>{t=="formType"&&Ce(e),t=="inlineForm"&&M(e[t]),t=="rules"&&e.rules.length&&!e.rulesFlag&&(e.rulesFlag=!0,e.rules=[...ke(e[t])]),t=="onMounted"&&he(async()=>{await e.onMounted(e)})}),a.isArray(e.menuRight)||(e.menuRight=[]),e.class=a.get(e,"class","");const o=a.get(e,"name","");return e.class+=` ${o}`,e}function M(e){for(let o=0;o<e.length;o++)if(a.isFunction(e[o])){const r=e[o];e[o]=e[o](),e[o].forEach(t=>{S(t)}),pe(()=>{e[o]=r})}else e[o]=S(e[o]);return e}function Re(e,o=!0){e=a.mapValues(e,t=>M(t).flat());const r=de(e);return o&&(ve._=r),I(()=>{$().$reset();const d=be();d.approvalBackfill=()=>{},d.$reset()}),r}export{Ue as _,ke as c,Re as m};
