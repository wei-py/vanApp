import{b as u,s as n}from"./index-Dd7uG9g0.js";import{l as c}from"./lodash-C1iNKp1x.js";function f(e,s,o="static"){const t={formType:"input",readonly:!0,realValue:"",confirm:()=>{},isLink:!0,click(){const i=u();this.inlineForm[0].show=i.btns.canEdit},inlineForm:[{slot:"extra",name:e+"Pop",formType:"popup",show:!1,round:!0,position:"bottom",class:"h-[auto] !w-full",closeOnClickOverlay:!0,inlineForm:[{slot:"default",formType:"pick",columns:s,confirm(i){n(e,"value",i.selectedOptions[0].text),n(e,"realValue",i.selectedOptions[0].value),n(e,"inlineForm.0.show",!1),n(e,l=>{l.confirm(i.selectedOptions[0])})},cancel(){n(e,"inlineForm.0.show",!1)}}]}]};return o=="static"?(t.getParam=function(i){i[e]=this.realValue||""},t):(t.makeSelect=function(i,l){this.value=i,this.inlineForm[0].inlineForm[0].columns.length=0,this.inlineForm[0].inlineForm[0].columns.push(...l);const r=(l.value||l).find(a=>a.value==i)?.text;this.realValue=this.value,this.value=r,c.isFunction(this.getParam)?t.getParam=this.getParam:t.getParam=function(a){a[e]=this.realValue||""}},t)}function p(){return{backfill(e){const s=this.inlineForm[0].inlineForm[0].columns.find(t=>t.value==e[this.name]||t.value==this.realValue)?.text||this.value,o=this.inlineForm[0].inlineForm[0].columns.find(t=>t.value==e[this.name]||t.text==s)?.value;this.value=s,this.realValue=e[this.name]||o}}}export{p as b,f as m};
