import{w as x}from"./vant-PdAvEskO.js";import{b as y,c as D,m as b,h as q}from"./index-D0ldpvYI.js";import{q as L}from"./queryUrl-DaTGvNW7.js";import{r,aX as d,aj as k,bA as w,u as i,i as B,al as u,b1 as N,am as s,be as a,F as R}from"./@vue-ts87NNlE.js";import"./@vant-NmgEisJw.js";import"./pinia-B_HOjTBS.js";import"./lodash-D-SkTV7p.js";import"./@vue-office-D7CPqAIZ.js";import"./vue-demi-BO4xsXkA.js";import"./vue-B7fnMq6U.js";import"./vue-router-Bw4qQE88.js";import"./@vueuse-DLUPp4BS.js";import"./xe-utils-CfMIR_ol.js";import"./axios-B6xwUs71.js";import"./@x-ui-vue3-CwLx_scX.js";import"./pinia-plugin-persist-J3Q2VqHx.js";import"./vue3-menus-CnNWMJEM.js";import"./vue3-photo-preview-jb8ML41u.js";import"./vxe-table-CAWzlaHI.js";import"./dom-zindex-GlLoxNk1.js";const S=s("div",{class:"col-span-2 text-lg"},"记录:",-1),j={class:"col-span-1 text-lg"},F={class:"col-span-3 text-right !leading-lg text-sm text-[#6f6f6f]"},I=s("div",{class:"col-span-2 text-sm"},"操作者:",-1),z={class:"col-span-4 text-sm"},U={class:"col-span-2 text-sm"},$={class:"col-span-4 text-sm"},A=s("div",{class:"col-span-2 text-sm"},"审核结果:",-1),C={class:"col-span-4 text-sm"},it={__name:"operateLog",setup(E){y();const n=r(!1),m=r(!1),p=r([]),l=r({pageNum:1,pageSize:10,total:0}),g=D(),_=b(),v=f;async function f(){const{data:o}=await q.post(L("order-log/opt",l.value),{orderId:g.orderId});console.log(o);const e=o.total;l.value.total=e;const c=o.list.map((t,h)=>({...t,index:e-(p.value.length+h)}));p.value.push(...c),n.value=!1,m.value=l.value.pageNum*l.value.pageSize>e,l.value.pageNum++}return(o,e)=>{const c=x;return d(),k(c,{loading:i(n),"onUpdate:loading":e[0]||(e[0]=t=>B(n)?n.value=t:null),finished:i(m),"finished-text":"没有更多了",onLoad:i(v),class:"!pt-2"},{default:w(()=>[(d(!0),u(R,null,N(i(p),t=>(d(),u("div",{key:t.index,class:"grid grid-cols-6 m-2 p-3 gap-2 bg-white rounded-lg"},[S,s("div",j,a(t.index),1),s("div",F,a(t.time),1),I,s("div",z,a(t.operator||"-"),1),s("div",U,a(t.title.split(",").slice(0,1)[0])+":",1),s("div",$,a(t.title.split(",").slice(1).join(",")),1),A,s("div",C,a(i(_)[o.$get(t,"approvalReq.result")]||"-")+a(o.$get(t,"approvalReq.rejectReason")||"-"),1)]))),128))]),_:1},8,["loading","finished","onLoad"])}}};export{it as default};
