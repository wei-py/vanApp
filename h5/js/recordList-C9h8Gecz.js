import{p as q,j as F,B as j,l as M,C as E,r as G,o as Q}from"./vant-DL9g20lT.js";import{p as Z}from"./plainButton-Bx2E2oUm.js";import{r as n,e as A,Z as p,_ as g,N as t,a8 as a,u as l,i as h,F as b,a0 as m,V as x,a4 as N,a2 as T,a3 as w,a1 as H,Q as J,R as K}from"./@vue-BhOIXUCP.js";import{b as O,h as V}from"./index-NPFU1_kq.js";import{l as P}from"./lodash-C-AG1eJN.js";import{q as W}from"./queryUrl-ggRt1bhs.js";import"./@vant-D2Uub16A.js";import"./pinia-CQ-jtR3-.js";import"./vue-demi-Dq6ymT-8.js";import"./vue-router-XNYRUkAR.js";import"./@vueuse-BaMGbt4d.js";import"./axios-B6xwUs71.js";import"./@x-ui-vue3-bC99Tnvx.js";import"./pinia-plugin-persist-J3Q2VqHx.js";import"./vue3-menus-VHbn-zkx.js";import"./vue3-photo-preview-Dedu722r.js";import"./vxe-table-BBegQXiE.js";import"./xe-utils-BM3aD2L3.js";import"./dayjs-Bof1u0Bp.js";import"./dom-zindex-GlLoxNk1.js";const X={class:"center"},Y={class:"xCenter"},ee={class:"flex justify-between"},te={class:"flex-1"},ke={__name:"recordList",setup(ae){O();const r=n(0),_=n([{title:"大备案",count:"0"},{title:"精准备案",count:"0"}]),d=n(""),f=n(!1),y=n(!1),C=n([]),i=n({pageNum:1,pageSize:10});A(()=>{});function k(o){C.value.length=0,i.value.pageNum=1,i.value.pageSize=10,B()}const B=P.debounce(D,300);async function D(){const{data:o}=await V.post(W("record/get",i.value),{recordType:r.value+1,recordCertificateId:d.value});C.value.push(...o.list);const e=o.total;f.value=!1,y.value=i.value.pageNum*i.value.pageSize>e,i.value.pageNum++;{const{data:c}=await V.get("record/count");_.value[0].count=c.bigRecordCnt,_.value[1].count=c.perRecordCnt}}return(o,e)=>{const c=j,S=q,$=Z,v=M,z=E,L=G,I=Q,R=F;return p(),g(b,null,[t(S,{modelValue:l(d),"onUpdate:modelValue":e[1]||(e[1]=s=>h(d)?d.value=s:null),shape:"round",placeholder:"请输入搜索关键词","show-action":""},{action:a(()=>[m("div",X,[t(c,{size:"small",type:"warning",class:"!bg-[#ffab30] !px-3 !mr-1",round:"",onClick:k},{default:a(()=>[x("搜索")]),_:1}),t(c,{size:"small",type:"warning",class:"!bg-[#ffab30] !px-3",round:"",onClick:e[0]||(e[0]=s=>o.$router.push({path:"/recordDetail"}))},{default:a(()=>[x("新建")]),_:1})])]),_:1},8,["modelValue"]),t(R,{active:l(r),"onUpdate:active":e[3]||(e[3]=s=>h(r)?r.value=s:null),"line-width":"0",ellipsis:!1,"title-active-color":"#ffab30",onChange:k,swipeable:""},{default:a(()=>[(p(!0),g(b,null,N(l(_),s=>(p(),T(I,null,{title:a(()=>[m("div",Y,w(s.title)+"("+w(s.count)+")",1)]),default:a(()=>[t(L,{loading:l(f),"onUpdate:loading":e[2]||(e[2]=u=>h(f)?f.value=u:null),finished:l(y),"finished-text":"没有更多了",onLoad:l(B),class:"!pt-2"},{default:a(()=>[(p(!0),g(b,null,N(l(C),(u,U)=>(p(),T(z,{key:U,inset:"",class:"p-1 !mb-2 shadowC !rounded-xl van-haptics-feedback",border:!1,onClick:H(le=>o.$router.push({path:"/recordDetail",query:{recordCertificateId:u.recordCertificateId}}),["stop"])},{default:a(()=>[t(v,{title:"备案证编码",class:"!py-1",border:!1,valueClass:"!text-left !text-[#323232]",titleClass:"!w-[130px] !flex-none"},{value:a(()=>[m("div",ee,[m("div",te,w(u.recordCertificateId),1),t($,{class:"!h-[18.7px] !px-5"},{default:a(()=>[x("详情")]),_:1})])]),_:2},1024),t(v,{title:"备案证类型",value:l(r)==0?"大备案证":"精准备案",class:"!py-1",border:!1,valueClass:"!text-left !text-[#323232]",titleClass:"!w-[130px] !flex-none"},null,8,["value"]),t(v,{title:"备案证容量",value:o.$unitConver(u.recordCertificateCapacity).result,class:"!py-1",border:!1,valueClass:"!text-left !text-[#323232]",titleClass:"!w-[130px] !flex-none"},null,8,["value"]),J(t(v,{title:"备案证剩余容量",value:o.$unitConver(u.surplusCapacity).result,class:"!py-1",border:!1,valueClass:"!text-left !text-[#323232]",titleClass:"!w-[130px] !flex-none"},null,8,["value"]),[[K,l(r)==0]])]),_:2},1032,["onClick"]))),128))]),_:1},8,["loading","finished","onLoad"])]),_:2},1024))),256))]),_:1},8,["active"])],64)}}};export{ke as default};
