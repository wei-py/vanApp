import{u as F,m as j,B as M,o as A,i as E,w as G,z as Q,r as X}from"./vant-BjNCsb4u.js";import{p as H}from"./plainButton-dcywRiT7.js";import{r as n,e as J,aX as p,al as C,N as e,bA as a,u as o,i as g,F as h,am as m,V as x,b1 as N,aj as T,be as w,bD as K,Q as O,R as P}from"./@vue-ts87NNlE.js";import{b as W,h as D}from"./index-DoomjHTc.js";import{l as Y}from"./lodash-DhpMPSDc.js";import{q as Z}from"./queryUrl-BTYYWpY7.js";import"./@vant-NmgEisJw.js";import"./pinia-B_HOjTBS.js";import"./vue-router-Bw4qQE88.js";import"./@vueuse-QQdVrKV8.js";import"./xe-utils-DXe260hc.js";import"./@vue-office-GFDCm3nC.js";import"./vue-demi-BEcyFcst.js";import"./vue-RHKPHaPZ.js";import"./axios-B4uVmeYG.js";import"./@x-ui-vue3-CwLx_scX.js";import"./pinia-plugin-persist-J3Q2VqHx.js";import"./vue3-menus-CnNWMJEM.js";import"./vue3-photo-preview-CkWuweRQ.js";import"./vxe-table-QgdefRjh.js";import"./dom-zindex-GlLoxNk1.js";const ee={class:"center"},te={class:"xCenter"},ae={class:"flex justify-between"},oe={class:"flex-1"},Te={__name:"recordList",setup(le){W();const r=n(0),_=n([{title:"大备案",count:"0"},{title:"精准备案",count:"0"}]),d=n(""),f=n(!1),y=n(!1),b=n([]),i=n({pageNum:1,pageSize:10});J(()=>{});function k(l){b.value.length=0,i.value.pageNum=1,i.value.pageSize=10,B()}const B=Y.debounce(V,300);async function V(){const{data:l}=await D.post(Z("record/get",i.value),{recordType:r.value+1,recordCertificateId:d.value});b.value.push(...l.list);const t=l.total;f.value=!1,y.value=i.value.pageNum*i.value.pageSize>t,i.value.pageNum++;{const{data:c}=await D.get("record/count");_.value[0].count=c.bigRecordCnt,_.value[1].count=c.perRecordCnt}}return(l,t)=>{const c=M,z=F,S=H,v=A,$=E,L=G,I=Q,R=X,U=j;return p(),C(h,null,[e(z,{modelValue:o(d),"onUpdate:modelValue":t[1]||(t[1]=s=>g(d)?d.value=s:null),shape:"round",placeholder:"请输入搜索关键词","show-action":""},{action:a(()=>[m("div",ee,[e(c,{size:"small",type:"warning",class:"!bg-[#ffab30] !px-3 !mr-1",round:"",onClick:k},{default:a(()=>[x("搜索")]),_:1}),e(c,{size:"small",type:"warning",class:"!bg-[#ffab30] !px-3",round:"",onClick:t[0]||(t[0]=s=>l.$router.push({path:"/recordDetail"}))},{default:a(()=>[x("新建")]),_:1})])]),_:1},8,["modelValue"]),e(U,{active:o(r),"onUpdate:active":t[3]||(t[3]=s=>g(r)?r.value=s:null),"line-width":"0",ellipsis:!1,"title-active-color":"#ffab30",onChange:k,swipeable:""},{default:a(()=>[(p(!0),C(h,null,N(o(_),s=>(p(),T(R,null,{title:a(()=>[m("div",te,w(s.title)+"("+w(s.count)+")",1)]),default:a(()=>[e(L,{loading:o(f),"onUpdate:loading":t[2]||(t[2]=u=>g(f)?f.value=u:null),finished:o(y),"finished-text":"没有更多了",onLoad:o(B),class:"!pt-2"},{default:a(()=>[(p(!0),C(h,null,N(o(b),(u,q)=>(p(),T($,{key:q,inset:"",class:"p-1 !mb-2 shadowC !rounded-xl van-haptics-feedback",border:!1,onClick:K(se=>l.$router.push({path:"/recordDetail",query:{recordCertificateId:u.recordCertificateId}}),["stop"])},{default:a(()=>[e(v,{title:"备案证编码",class:"!py-1",border:!1,valueClass:"!text-left !text-[#323232]",titleClass:"!w-[130px] !flex-none"},{value:a(()=>[m("div",ae,[m("div",oe,w(u.recordCertificateId),1),e(S,{class:"!h-[18.7px] !px-5"},{default:a(()=>[x("详情")]),_:1})])]),_:2},1024),e(v,{title:"备案证类型",value:o(r)==0?"大备案证":"精准备案",class:"!py-1",border:!1,valueClass:"!text-left !text-[#323232]",titleClass:"!w-[130px] !flex-none"},null,8,["value"]),e(v,{title:"备案证容量",value:l.$unitConver(u.recordCertificateCapacity).result,class:"!py-1",border:!1,valueClass:"!text-left !text-[#323232]",titleClass:"!w-[130px] !flex-none"},null,8,["value"]),O(e(v,{title:"备案证剩余容量",value:l.$unitConver(u.surplusCapacity).result,class:"!py-1",border:!1,valueClass:"!text-left !text-[#323232]",titleClass:"!w-[130px] !flex-none"},null,8,["value"]),[[P,o(r)==0]])]),_:2},1032,["onClick"]))),128))]),_:1},8,["loading","finished","onLoad"]),e(I,{class:"!bg-[#fed38c]"})]),_:2},1024))),256))]),_:1},8,["active"])],64)}}};export{Te as default};
