import{u as A,m as H,V as J,B as K,o as P,i as W,w as Y,z as Z,r as ee}from"./vant-BjNCsb4u.js";import{_ as te}from"./vButton-wHtwW-5Z.js";import{p as ae}from"./plainButton-BoaXkwcE.js";import{r as u,e as oe,X as se,aX as f,al as k,N as t,bA as o,u as l,i as b,F as B,am as E,V as i,b1 as I,aj as N,Q as le,bD as ne}from"./@vue-ts87NNlE.js";import{_ as re,c as ue,b as pe,h as ie,r as de}from"./index-C9aRjUQ6.js";import{l as ce}from"./lodash-DhpMPSDc.js";import{q as ve}from"./queryUrl-BTYYWpY7.js";import"./@vant-NmgEisJw.js";import"./pinia-B_HOjTBS.js";import"./vue-router-Bw4qQE88.js";import"./@vueuse-QQdVrKV8.js";import"./xe-utils-DXe260hc.js";import"./@vue-office-GFDCm3nC.js";import"./vue-demi-BEcyFcst.js";import"./vue-RHKPHaPZ.js";import"./axios-B4uVmeYG.js";import"./@x-ui-vue3-CwLx_scX.js";import"./pinia-plugin-persist-J3Q2VqHx.js";import"./vue3-menus-CnNWMJEM.js";import"./vue3-photo-preview-CkWuweRQ.js";import"./vxe-table-QgdefRjh.js";import"./dom-zindex-GlLoxNk1.js";const fe={class:"yCenter"},_e={class:"grid grid-cols-1 gap-2 py-8 px-8"},me={__name:"sendOutGoodsList",setup(xe){const _=u(""),S=ue(),d=u(S.state*1),O=u(["待发货","已发货"]),D=pe(),c=u(!1),m=u(!1),x=u(!1),v=u([]),n=u({pageNum:1,pageSize:10,total:0}),h=u({FIRST_TO_SECOND:"一级仓库发二级仓库",FIRST_TO_SITE:"一级仓库发现场",SECOND_TO_SITE:"二级仓库发现场"}),y=ce.debounce($,300);async function $(){const r={...S,queryStr:_.value,state:d.value},{data:e}=await ie.post(ve("sto/export-base/page",n.value),r),g=e.totalRow;n.value.total=g;const T=e.records.map((w,p)=>({...w,index:v.value.length+p+1}));v.value.push(...T),m.value=!1,x.value=n.value.pageNum*n.value.pageSize>g,n.value.pageNum++}function V(){n.value.pageNum=1,n.value.pageSize=10,v.value.length=0,x.value=!1,y()}function q(){c.value=!0}function F(){n.value.pageNum=1,n.value.pageSize=10,v.value.length=0,x.value=!1,y()}function G(r){de.push({path:"/sendOutGoods",query:{title:h.value[r.stoExportBase.exportType],expId:r.stoExportBase.expId||"-",state:d.value,exportType:r.stoExportBase.exportType}})}return oe(async()=>{}),(r,e)=>{const g=K,T=A,w=ae,p=P,C=te,L=W,R=Y,z=Z,U=ee,M=H,Q=J,X=se("skeleton");return f(),k(B,null,[t(T,{modelValue:l(_),"onUpdate:modelValue":e[0]||(e[0]=s=>b(_)?_.value=s:null),onBlur:V,shape:"round",background:"#f3f3f3",placeholder:"系统编号、进件编号、组织全称、姓名、手机号","show-action":""},{action:o(()=>[E("div",fe,[t(g,{onClick:q,class:"!w-auto !h-[34px] shadow !px-[15px] !rounded-full !border-none !bg-[#ffab30] !text-white"},{default:o(()=>[i(" 新建 ")]),_:1})])]),_:1},8,["modelValue"]),t(M,{class:"flex-1 flex flex-col",active:l(d),"onUpdate:active":e[2]||(e[2]=s=>b(d)?d.value=s:null),background:"#f3f3f3","line-width":"80px",color:"#ffab30",onChange:F,swipeable:""},{default:o(()=>[(f(!0),k(B,null,I(l(O),s=>(f(),N(U,{title:s,key:s},{default:o(()=>[t(R,{loading:l(m),"onUpdate:loading":e[1]||(e[1]=a=>b(m)?m.value=a:null),finished:l(x),"finished-text":"没有更多了",onLoad:l(y),class:"!pt-2"},{default:o(()=>[(f(!0),k(B,null,I(l(v),a=>le((f(),N(L,{key:a.index,inset:"",class:"px-2 py-4 !mb-2 shadowC !rounded-xl"},{default:o(()=>[t(p,{valueClass:"valueClass yellowText",titleClass:"titleClass",border:!1,title:"发货编号: ",value:a.stoExportBase.expId||"-"},{"right-icon":o(()=>[t(w,{class:"!h-[24px]",onClick:ne(j=>r.$copyText(a.stoExportBase.expId),["stop"])},{default:o(()=>[i(" 复制 ")]),_:2},1032,["onClick"])]),_:2},1032,["value"]),t(p,{valueClass:"valueClass",titleClass:"titleClass",border:!1,title:"发货方: ",value:a.stoExportBase.shipperName||"-"},null,8,["value"]),t(p,{valueClass:"valueClass",titleClass:"titleClass",border:!1,title:"发货类型: ",value:a.stoExportBase.exportType&&l(h)[a.stoExportBase.exportType]?l(h)[a.stoExportBase.exportType]:"-"},null,8,["value"]),t(p,{valueClass:"valueClass",titleClass:"titleClass",border:!1,title:"收货组织: ",value:a.company&&a.company.name?a.company.name:"-"},null,8,["value"]),t(p,{valueClass:"valueClass",titleClass:"titleClass",border:!1,title:"备注: ",value:a.stoExportBase.remark||"-"},null,8,["value"]),t(p,{border:!1,title:""},{default:o(()=>[t(C,{onClick:j=>G(a)},{default:o(()=>[i(" 发货详情 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)),[[X,l(D).overlayShow]])),128))]),_:1},8,["loading","finished","onLoad"]),t(z,{class:"!bg-[#fed38c]"})]),_:2},1032,["title"]))),128))]),_:1},8,["active"]),t(Q,{show:l(c),"onUpdate:show":e[6]||(e[6]=s=>b(c)?c.value=s:null),title:"","show-confirm-button":!1,"close-on-click-overlay":""},{default:o(()=>[E("div",_e,[t(C,{onClick:e[3]||(e[3]=s=>r.$router.push({path:"sendOutGoods",query:{expId:"",exportType:"FIRST_TO_SITE",title:"一级仓库发现场"}}))},{default:o(()=>[i(" 发货至现场 ")]),_:1}),t(C,{onClick:e[4]||(e[4]=s=>r.$router.push({path:"sendOutGoods",query:{expId:"",exportType:"FIRST_TO_SECOND",title:"一级仓库发二级仓库"}}))},{default:o(()=>[i(" 发货至二级仓库 ")]),_:1}),t(C,{onClick:e[5]||(e[5]=s=>c.value=!1),class:"!bg-white !text-[#232323]"},{default:o(()=>[i(" 取消 ")]),_:1})])]),_:1},8,["show"])],64)}}},ze=re(me,[["__scopeId","data-v-930cbfc4"]]);export{ze as default};
