import{O as _,Z as y,_ as b,M as he,$ as C,a0 as S,C as K,a1 as re,G as le,a2 as Be,c as et,a3 as ne,N as V,F as se,a4 as tt,a5 as H,S as nt,p as ie,a6 as Fe,h as oe,r as g,w as ee,e as it,f as ot,o as Ve}from"./@vue-BhOIXUCP.js";var Ee=Symbol(),ze=Symbol(),Ne=Symbol();function at(e){var t=g([]),n=function(a,l){return l?Array.prototype.indexOf.call(a,l):-1},i=function(a){var l,s,h=(s=(l=a[0].originRef)===null||l===void 0?void 0:l.parentNode)===null||s===void 0?void 0:s.children;h&&h.length&&a.sort(function(u,d){return n(h,u.originRef)-n(h,d.originRef)})},o=function(a){var l=t.value.findIndex(function(s){var h=s.key;return a.key===h});l>-1?t.value.splice(l,1,a):(t.value.push(a),i(t.value))},r=function(a){var l=t.value.filter(function(h){return h.key!==a}),s=l.length-1;t.value=l,e.value=Math.max(Math.min(e.value,s),0)};return{items:t,updateItem:o,removeItem:r}}function rt(e,t,n){var i=g(!1),o=function(){i.value=!1,n()},r=function(a){var l=e.value.findIndex(function(s){return s.key===a});l>-1&&(t.value=l,i.value=!0,n())};return{visible:i,handleHide:o,handleShow:r}}function lt(e){var t=g(0),n=function(i){t.value=i,e()};return{index:t,updateIndex:n}}var de=_({});const st={class:"PhotoView__Spinner"},ht=S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",width:"36",height:"36",fill:"white"},[S("path",{opacity:".25",d:"M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4"}),S("path",{d:"M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z"})],-1),dt=[ht];function ut(e,t,n,i,o,r){return y(),b("div",st,dt)}de.render=ut;de.__file="src/PhotoView/Spinner.vue";function ct(e,t,n){var i,o=window.innerWidth,r=window.innerHeight,a=n%180!==0;a&&(i=[r,o],o=i[0],r=i[1]);var l,s,h=o/e,u=r/t;return e<o&&t<r?(l=e,s=t):h<u?(l=o,s=o*(t/e)):(l=r*(e/t),s=r),{width:l,height:s}}function vt(e){var t=g(0),n=g(0),i=g(0),o=g(0),r=g(!1);function a(s,h,u){var d=ct(s,h,u);i.value=d.width,o.value=d.height}var l=function(s){r.value=!1;var h=new Image;h.onload=function(){t.value=h.naturalWidth,n.value=h.naturalHeight,a(t.value,n.value,0),r.value=!0},h.src=s};return l(e.value),ee(e,function(){l(e.value)}),{width:i,height:o,loaded:r,naturalWidth:t,naturalHeight:n,setSuitableImageSize:a}}function Q(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var ft=typeof global=="object"&&global&&global.Object===Object&&global,pt=ft,gt=typeof self=="object"&&self&&self.Object===Object&&self,mt=pt||gt||Function("return this")(),He=mt,wt=function(){return He.Date.now()},ae=wt,yt=/\s/;function St(e){for(var t=e.length;t--&&yt.test(e.charAt(t)););return t}var $t=/^\s+/;function bt(e){return e&&e.slice(0,St(e)+1).replace($t,"")}var Tt=He.Symbol,D=Tt,We=Object.prototype,kt=We.hasOwnProperty,Mt=We.toString,U=D?D.toStringTag:void 0;function It(e){var t=kt.call(e,U),n=e[U];try{e[U]=void 0;var i=!0}catch{}var o=Mt.call(e);return i&&(t?e[U]=n:delete e[U]),o}var _t=Object.prototype,Rt=_t.toString;function Pt(e){return Rt.call(e)}var xt="[object Null]",Ct="[object Undefined]",Ie=D?D.toStringTag:void 0;function Ot(e){return e==null?e===void 0?Ct:xt:Ie&&Ie in Object(e)?It(e):Pt(e)}function Lt(e){return e!=null&&typeof e=="object"}var At="[object Symbol]";function Xe(e){return typeof e=="symbol"||Lt(e)&&Ot(e)==At}var _e=NaN,Bt=/^[-+]0x[0-9a-f]+$/i,Ft=/^0b[01]+$/i,Vt=/^0o[0-7]+$/i,Et=parseInt;function Re(e){if(typeof e=="number")return e;if(Xe(e))return _e;if(Q(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Q(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=bt(e);var n=Ft.test(e);return n||Vt.test(e)?Et(e.slice(2),n?2:8):Bt.test(e)?_e:+e}var zt="Expected a function",Nt=Math.max,Ht=Math.min;function Ye(e,t,n){var i,o,r,a,l,s,h=0,u=!1,d=!1,f=!0;if(typeof e!="function")throw new TypeError(zt);t=Re(t)||0,Q(n)&&(u=!!n.leading,d="maxWait"in n,r=d?Nt(Re(n.maxWait)||0,t):r,f="trailing"in n?!!n.trailing:f);function m(w){var R=i,L=o;return i=o=void 0,h=w,a=e.apply(L,R),a}function M(w){return h=w,l=setTimeout(k,t),u?m(w):a}function p(w){var R=w-s,L=w-h,X=t-R;return d?Ht(X,r-L):X}function T(w){var R=w-s,L=w-h;return s===void 0||R>=t||R<0||d&&L>=r}function k(){var w=ae();if(T(w))return O(w);l=setTimeout(k,p(w))}function O(w){return l=void 0,f&&i?m(w):(i=o=void 0,a)}function z(){l!==void 0&&clearTimeout(l),h=0,i=s=o=l=void 0}function W(){return l===void 0?a:O(ae())}function x(){var w=ae(),R=T(w);if(i=arguments,o=this,s=w,R){if(l===void 0)return M(s);if(d)return clearTimeout(l),l=setTimeout(k,t),m(s)}return l===void 0&&(l=setTimeout(k,t)),a}return x.cancel=z,x.flush=W,x}var Wt="Expected a function";function ue(e,t,n){var i=!0,o=!0;if(typeof e!="function")throw new TypeError(Wt);return Q(n)&&(i="leading"in n?!!n.leading:i,o="trailing"in n?!!n.trailing:o),Ye(e,t,{leading:i,maxWait:t,trailing:o})}function Xt(e,t,n,i){var o=ue(function(){i(e.value,t.value,n.value)},8);window.addEventListener("resize",o),Ve(function(){window.removeEventListener("resize",o)})}var E;(function(e){e[e.None=0]="None",e[e.In=1]="In",e[e.Out=2]="Out"})(E||(E={}));var $;(function(e){e[e.Normal=0]="Normal",e[e.X=1]="X",e[e.Y=2]="Y",e[e.Scale=3]="Scale"})($||($={}));var P;(function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Top=2]="Top",e[e.Bottom=3]="Bottom"})(P||(P={}));function Yt(e){if(e){var t=window.innerWidth,n=window.innerHeight,i=e.left+e.width/2-t/2,o=e.top+e.height/2-n/2;return"".concat(i,"px ").concat(o,"px")}return null}var Y=typeof document<"u"&&"ontouchstart"in document.documentElement,jt=20,Pe=10,J=40,xe=6;function Dt(e,t){var n=0,i=Ye(function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];n=0,e.apply(void 0,o)},300);return function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];n+=1,i.apply(void 0,r),n>=2&&(i.cancel(),n=0,t.apply(void 0,r))}}function Ce(e){var t=e.x,n=e.y,i=e.clientX,o=e.clientY,r=e.fromScale,a=e.toScale,l=window.innerWidth,s=window.innerHeight,h=l/2+t,u=s/2+n,d=a/r,f=-(i-h)*(d-1),m=-(o-u)*(d-1);return{x:f+t,y:m+n,scale:a}}function je(e){var t,n=e.width,i=e.height,o=e.scale,r=e.rotate,a=r%180!==0;a&&(t=[i,n],n=t[0],i=t[1]);var l=window.innerWidth,s=window.innerHeight,h=n*o,u=i*o,d,f,m,M;return h>l?(d=(h-l)/2,f=-(h-l)/2):(d=0,f=0),u>s?(m=(u-s)/2,M=-(u-s)/2):(m=0,M=0),{edgeLeft:d,edgeRight:f,edgeTop:m,edgeBottom:M}}function qt(e){var t=e.width,n=e.height,i=e.scale,o=e.rotate,r=e.x,a=e.y,l=je({width:t,height:n,scale:i,rotate:o}),s=[];return r===l.edgeLeft&&s.push(P.Left),r===l.edgeRight&&s.push(P.Right),a===l.edgeTop&&s.push(P.Top),a===l.edgeBottom&&s.push(P.Bottom),s}function Ut(e){var t=e.width,n=e.height,i=e.scale,o=e.rotate,r=e.x,a=e.y,l=je({width:t,height:n,scale:i,rotate:o}),s=l.edgeLeft,h=l.edgeRight,u=l.edgeTop,d=l.edgeBottom;return r>s&&(r=s),r<h&&(r=h),a>u&&(a=u),a<d&&(a=d),{x:r,y:a,scale:i}}function Oe(e){var t=e.touches[0],n=t.clientX,i=t.clientY;if(e.touches.length>=2){var o=e.touches[1],r=o.clientX,a=o.clientY;return{clientX:(n+r)/2,clientY:(i+a)/2,touchLength:Math.sqrt(Math.pow(r-n,2)+Math.pow(a-i,2))}}return{clientX:n,clientY:i,touchLength:0}}function Kt(e,t,n,i,o,r,a,l,s){var h=g(0),u=g(0),d=g(1),f=g(0),m=g(!1),M=g(0),p=g(0),T=g($.Normal),k=g(0),O=g(0),z=g(0),W=g(1),x=[],w=function(c){Y||(L(c.clientX,c.clientY,0),window.addEventListener("mousemove",X),window.addEventListener("mouseup",N))},R=function(c){if(Y){var v=Oe(c);L(v.clientX,v.clientY,v.touchLength),window.addEventListener("touchmove",A),window.addEventListener("touchend",j)}},L=function(c,v,I){m.value=!0,M.value=c,p.value=v,z.value=I,W.value=d.value,x=qt({width:e.value,height:t.value,scale:d.value,rotate:f.value,x:k.value,y:O.value}),r(c,v)},X=function(c){Y||!m.value||B(c.clientX,c.clientY,0)},A=function(c){if(!(!Y||!m.value)){var v=Oe(c);B(v.clientX,v.clientY,v.touchLength)}},B=ue(function(c,v,I){if(T.value===$.Normal)if(d.value!==1||I)T.value=$.Scale;else{var F=Math.abs(c-M.value)>Pe,Ze=Math.abs(v-p.value)>Pe;if(!F&&!Ze)return;T.value=F?$.X:$.Y}a(T.value,c,v,W.value,x);var Z=c-M.value,Me=v-p.value;if(T.value===$.Y&&(h.value=Z+k.value,u.value=Me+O.value),T.value===$.Scale)if(I){var Je=d.value+(I-z.value)/100/2*d.value,Qe=Math.max(Math.min(Je,Math.max(xe,n.value/e.value)),1);ke(Qe,c,v),z.value=I}else!(Z>0&&x.includes(P.Left))&&!(Z<0&&x.includes(P.Right))&&(h.value=Z+k.value),u.value=Me+O.value},8,{trailing:!1}),N=function(c){Y||(Te(c.clientX,c.clientY,c),window.removeEventListener("mousemove",X),window.removeEventListener("mouseup",N))},j=function(c){if(Y){var v=c.changedTouches[0];Te(v.clientX,v.clientY,c),window.removeEventListener("touchmove",A),window.removeEventListener("touchend",j)}},q=function(c,v){if(T.value===$.Normal)if(d.value===1){var I=Math.max(2,n.value/e.value),F=Ce({x:h.value,y:u.value,clientX:c,clientY:v,fromScale:d.value,toScale:I});h.value=F.x,u.value=F.y,d.value=F.scale}else h.value=0,u.value=0,d.value=1},qe=Dt(s,q),Te=function(c,v,I){M.value===c&&p.value===v&&qe(c,v,I),l(T.value,c,v,W.value,x),T.value===$.Y&&(h.value=0,u.value=0),T.value===$.Scale&&G({width:e.value,height:t.value,scale:d.value,rotate:f.value,x:h.value,y:u.value}),m.value=!1,T.value=$.Normal,M.value=0,p.value=0,k.value=h.value,O.value=u.value},Ue=function(c){var v=d.value-c.deltaY/100/2,I=Math.max(Math.min(v,Math.max(xe,n.value/e.value)),1);ke(I,c.clientX,c.clientY)},ke=function(c,v,I){var F=Ce({x:h.value,y:u.value,clientX:v,clientY:I,fromScale:d.value,toScale:c});G({width:e.value,height:t.value,scale:F.scale,rotate:f.value,x:F.x,y:F.y})},G=function(c){var v=Ut(c);h.value=v.x,u.value=v.y,k.value=v.x,O.value=v.y,d.value=v.scale},Ke=function(){f.value=f.value-90,o(n.value,i.value,f.value),G({width:e.value,height:t.value,scale:d.value,rotate:f.value,x:h.value,y:u.value})},Ge=function(){f.value=f.value+90,o(n.value,i.value,f.value),G({width:e.value,height:t.value,scale:d.value,rotate:f.value,x:h.value,y:u.value})};return{x:h,y:u,scale:d,touched:m,handleMouseDown:w,handleTouchStart:R,handleWheel:Ue,rotate:f,handleRotateLeft:Ke,handleRotateRight:Ge}}var ce=_({name:"PhotoView",components:{Spinner:de},props:{src:{type:String,required:!0},originRect:{type:Object,default:null},showAnimateType:{type:Number,default:null}},emits:["touchStart","touchMove","touchEnd","singleTap"],setup:function(e,t){var n=t.emit,i=he(e).src,o=vt(i),r=o.width,a=o.height,l=o.loaded,s=o.naturalWidth,h=o.naturalHeight,u=o.setSuitableImageSize,d=function(A,B){n("touchStart",A,B)},f=function(A,B,N,j,q){n("touchMove",A,B,N,j,q)},m=function(A,B,N,j,q){n("touchEnd",A,B,N,j,q)},M=function(A,B,N){n("singleTap",A,B,N)},p=Kt(r,a,s,h,u,d,f,m,M),T=p.x,k=p.y,O=p.scale,z=p.rotate,W=p.touched,x=p.handleMouseDown,w=p.handleTouchStart,R=p.handleWheel,L=p.handleRotateLeft,X=p.handleRotateRight;return Xt(s,h,z,u),{width:r,height:a,loaded:l,x:T,y:k,scale:O,touched:W,handleMouseDown:x,handleTouchStart:w,handleWheel:R,rotate:z,handleRotateLeft:L,handleRotateRight:X}},data:function(){return{ShowAnimateEnum:E,isFlipHorizontal:!1,isFlipVertical:!1}},methods:{getAnimateOrigin:Yt,toggleFlipHorizontal:function(){this.isFlipHorizontal=!this.isFlipHorizontal},toggleFlipVertical:function(){this.isFlipVertical=!this.isFlipVertical},getTransform:function(){var e="".concat(this.isFlipHorizontal?"-":"").concat(this.scale),t="".concat(this.isFlipVertical?"-":"").concat(this.scale),n={matrix:"".concat(e,", 0, 0, ").concat(t,", ").concat(this.x,", ").concat(this.y)};this.rotate&&(n.rotate="".concat(this.rotate,"deg"));var i="";return Object.keys(n).forEach(function(o){i+="".concat(o,"(").concat(n[o],")")}),i}}});const Gt=["src"];function Zt(e,t,n,i,o,r){const a=C("spinner");return e.loaded?(y(),b("div",{key:0,class:"PhotoView__PhotoWrap",style:K({width:`${e.width}px`,height:`${e.height}px`})},[S("div",{class:le(["PhotoView__PhotoBox",{PhotoView__animateIn:e.showAnimateType===e.ShowAnimateEnum.In,PhotoView__animateOut:e.showAnimateType===e.ShowAnimateEnum.Out}]),style:K({transformOrigin:e.getAnimateOrigin(e.originRect),width:e.showAnimateType===e.ShowAnimateEnum.In||e.showAnimateType===e.ShowAnimateEnum.Out?"0":"100%"})},[S("img",{class:"PhotoView__Photo",src:e.src,style:K({width:`${e.width}px`,height:`${e.height}px`,transform:e.getTransform(),transition:e.touched?void 0:"transform 0.5s cubic-bezier(0.25, 0.8, 0.25, 1)"}),onMousedown:t[0]||(t[0]=re((...l)=>e.handleMouseDown&&e.handleMouseDown(...l),["prevent"])),onTouchstart:t[1]||(t[1]=re((...l)=>e.handleTouchStart&&e.handleTouchStart(...l),["prevent"])),onWheel:t[2]||(t[2]=(...l)=>e.handleWheel&&e.handleWheel(...l))},null,44,Gt)],6)],4)):(y(),Be(a,{key:1}))}ce.render=Zt;ce.__file="src/PhotoView/index.vue";function Jt(e){var t=document.body.style,n=t.overflow;ee(e,function(){e.value?t.overflow="hidden":t.overflow=n})}function Qt(){var e=g(window.innerWidth),t=ue(function(){e.value=window.innerWidth},8);return window.addEventListener("resize",t),Ve(function(){window.removeEventListener("resize",t)}),{innerWidth:e}}var ve=_({});const en={version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"44",height:"44",viewBox:"0 0 768 768"},tn=S("path",{fill:"#FFF",d:"M607.5 205.5l-178.5 178.5 178.5 178.5-45 45-178.5-178.5-178.5 178.5-45-45 178.5-178.5-178.5-178.5 45-45 178.5 178.5 178.5-178.5z"},null,-1),nn=[tn];function on(e,t,n,i,o,r){return y(),b("svg",en,nn)}ve.render=on;ve.__file="src/PhotoSlider/Close.vue";var fe=_({});const an={version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"44",height:"44",viewBox:"0 0 768 768"},rn=S("path",{d:"M640.5 352.5v63h-390l178.5 180-45 45-256.5-256.5 256.5-256.5 45 45-178.5 180h390z"},null,-1),ln=[rn];function sn(e,t,n,i,o,r){return y(),b("svg",an,ln)}fe.render=sn;fe.__file="src/PhotoSlider/ArrowLeft.vue";var pe=_({});const hn={version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"44",height:"44",viewBox:"0 0 768 768"},dn=S("path",{d:"M384 127.5l256.5 256.5-256.5 256.5-45-45 178.5-180h-390v-63h390l-178.5-180z"},null,-1),un=[dn];function cn(e,t,n,i,o,r){return y(),b("svg",hn,un)}pe.render=cn;pe.__file="src/PhotoSlider/ArrowRight.vue";var ge=_({});const vn={viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"44",height:"44"},fn=S("path",{fill:"#FFF",d:"M744.81 959.5c99.37-180.1 116.14-454.76-274.34-445.6v221.85L134.82 400.12 470.46 64.5v217.1c467.59-12.2 519.68 412.74 274.35 677.9z"},null,-1),pn=[fn];function gn(e,t,n,i,o,r){return y(),b("svg",vn,pn)}ge.render=gn;ge.__file="src/PhotoSlider/RotateLeft.vue";var me=_({});const mn={viewBox:"0 0 1000 1000",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"44",height:"44"},wn=S("path",{fill:"#FFF",d:"M555.668 258.9754V47.24496791175579l327.3385 327.3241L555.668 701.8941V485.52881146582615c-380.8294-8.9369-364.4728 258.9334-267.5596 434.5814C48.8389 661.5105 99.6385 247.0815 555.668 258.9754z"},null,-1),yn=[wn];function Sn(e,t,n,i,o,r){return y(),b("svg",mn,yn)}me.render=Sn;me.__file="src/PhotoSlider/RotateRight.vue";var we=_({});const $n={viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"44",height:"44"},bn=S("path",{fill:"#FFF",d:"M978.432 492.832l-153.696-116.896c-17.504-13.312-31.968-6.208-32.096 15.776L792.032 480H231.968l-0.608-88.288c-0.16-22.016-14.592-29.088-32.096-15.776l-153.696 116.896c-17.504 13.312-17.12 34.592 0.864 47.264l154.144 108.608c17.984 12.672 32.576 5.056 32.416-16.96L232.384 544h559.2l-0.576 87.712c-0.16 22.016 14.432 29.632 32.416 16.96l154.144-108.608c17.984-12.672 18.4-33.92 0.864-47.232z"},null,-1),Tn=[bn];function kn(e,t,n,i,o,r){return y(),b("svg",$n,Tn)}we.render=kn;we.__file="src/PhotoSlider/FlipHorizontal.vue";var ye=_({});const Mn={viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"44",height:"44"},In=S("path",{fill:"#FFF",d:"M494.03 74.72l-109.59 144.09c-12.48 16.41-5.82 29.97 14.79000001 30.09L482 249.47 482 774.53l-82.77 0.54c-20.64 0.15-27.27 13.68-14.79 30.09l109.59 144.09c12.48 16.41 32.43 16.05 44.31000001-0.81l101.81999999-144.51c11.88-16.86 4.74-30.54-15.9-30.39L542.00000001 774.14l-1e-8-524.25 82.23 0.54c20.64 0.15 27.78-13.53 15.9-30.39l-101.82-144.51c-11.88-16.86-31.8-17.25-44.28-0.81z"},null,-1),_n=[In];function Rn(e,t,n,i,o,r){return y(),b("svg",Mn,_n)}ye.render=Rn;ye.__file="src/PhotoSlider/FlipVertical.vue";var Se=_({});const Pn={viewBox:"0 0 1068 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2740",width:"44",height:"44"},xn=S("path",{d:"M252.622237 809.004596a252.614304 252.614304 0 0 1-31.486765-503.2587v-4.352863a301.406611 301.406611 0 0 1 594.880633-68.660847 288.877568 288.877568 0 0 1-36.146765 575.488683 31.529129 31.529129 0 0 1 0-63.047667 225.819311 225.819311 0 0 0 8.472726-451.479758l-26.244267-0.974363-3.812726-25.990085a238.358944 238.358944 0 0 0-474.176071 34.664037 243.040125 243.040125 0 0 0 1.874591 30.035812l4.501135 35.786673-37.163491-0.3495h-0.730773c-104.521657 0-189.577228 85.034389-189.577228 189.577228s85.034389 189.577228 189.577228 189.577228a31.529129 31.529129 0 0 1 0 63.047667z",fill:"#FFF"},null,-1),Cn=S("path",{d:"M500.417679 442.421546m10.590906 0l46.599989 0q10.590907 0 10.590907 10.590906l0 528.878103q0 10.590907-10.590907 10.590907l-46.599989 0q-10.590907 0-10.590906-10.590907l0-528.878103q0-10.590907 10.590906-10.590906Z",fill:"#FFF"},null,-1),On=S("path",{d:"M487.406543 980.472843m7.488902-7.488902l171.982631-171.982631q7.488902-7.488902 14.977804 0l32.951168 32.951168q7.488902 7.488902 0 14.977804l-171.982631 171.982631q-7.488902 7.488902-14.977804 0l-32.951168-32.951168q-7.488902-7.488902 0-14.977804Z",fill:"#FFF"},null,-1),Ln=S("path",{d:"M344.966294 837.223674m7.488902-7.488902l32.951168-32.951168q7.488902-7.488902 14.977804 0l176.198883 176.198883q7.488902 7.488902 0 14.977804l-32.951168 32.951168q-7.488902 7.488902-14.977804 0l-176.198883-176.198883q-7.488902-7.488902 0-14.977804Z",fill:"#FFF"},null,-1),An=[xn,Cn,On,Ln];function Bn(e,t,n,i,o,r){return y(),b("svg",Pn,An)}Se.render=Bn;Se.__file="src/PhotoSlider/Download.vue";function Fn(e,t){var n=g(e.value),i=g(E.None),o=g(null);ee(e,function(){var a=t.value.originRef;if(a&&a.nodeType===1&&a.children.length>0){var l=a.getBoundingClientRect(),s=l.top,h=l.left,u=l.width,d=l.height;o.value={left:h,top:s,width:u,height:d}}else o.value=null;e.value?(i.value=E.In,n.value=!0):i.value=E.Out});var r=function(){i.value===E.Out&&(n.value=!1),i.value=E.None};return{photoVisible:n,showAnimateType:i,originRect:o,onShowAnimateEnd:r}}var te=_({name:"PhotoSlider",components:{PhotoView:ce,Close:ve,ArrowLeft:fe,ArrowRight:pe,RotateLeft:ge,RotateRight:me,FlipHorizontal:we,FlipVertical:ye,Download:Se},props:{items:{type:Array,required:!0},index:{type:Number,required:!0},visible:{type:Boolean,required:!0},shouldTransition:{type:Boolean,default:!1},toggleOverlay:{type:Boolean,default:!0},defaultBackdropOpacity:{type:Number,default:1},loop:{type:Boolean,default:!1},downloadMethod:{type:Function,default:null}},emits:["clickPhoto","clickMask","changeIndex","closeModal"],setup:function(e){var t=he(e),n=t.items,i=t.index,o=t.visible,r=et(function(){return n.value[i.value]||{}});Jt(o);var a=Fn(o,r),l=a.photoVisible,s=a.showAnimateType,h=a.originRect,u=a.onShowAnimateEnd,d=Qt().innerWidth;return{innerWidth:d,currentItem:r,photoVisible:l,showAnimateType:s,originRect:h,onShowAnimateEnd:u}},data:function(){return{horizontalOffset:jt,ShowAnimateEnum:E,isTouchDevice:Y,touched:!1,hasMove:!1,needTransition:!1,clientX:0,clientY:0,touchMoveX:0,backdropOpacity:this.defaultBackdropOpacity,overlayVisible:!0,virtualIndex:0,photoViewRefs:{}}},computed:{showItems:function(){var e=this.items.length;if(this.loop){var t=this.items.concat(this.items).concat(this.items);return t.slice(e+this.index-1,e+this.index+2)}return this.items.slice(Math.max(this.index-1,0),Math.min(this.index+2,e))}},created:function(){window.addEventListener("keydown",this.handleKeyDown)},beforeUnmount:function(){window.removeEventListener("keydown",this.handleKeyDown)},beforeUpdate:function(){this.photoViewRefs={}},methods:{defaultDownloadMethod:function(e){var t=e.src.split("/"),n=t[t.length-1],i=new Image;i.setAttribute("crossOrigin","Anonymous"),i.onload=function(){var o=document.createElement("canvas"),r=o.getContext("2d");o.width=i.width,o.height=i.height,r?.drawImage(i,0,0,i.width,i.height),o.toBlob(function(a){if(a){var l=URL.createObjectURL(a),s=document.createElement("a");s.download=e.downloadName||n,s.href=l,s.dispatchEvent(new MouseEvent("click")),URL.revokeObjectURL(l)}})},i.src=e.src+"?v="+Date.now()},handleDownload:function(){var e=this.items[this.index];typeof this.downloadMethod=="function"?this.downloadMethod(e):this.defaultDownloadMethod(e)},toggleFlipHorizontal:function(){var e;(e=this.photoViewRefs[this.currentItem.key])===null||e===void 0||e.toggleFlipHorizontal()},toggleFlipVertical:function(){var e;(e=this.photoViewRefs[this.currentItem.key])===null||e===void 0||e.toggleFlipVertical()},handleRotateLeft:function(){var e;(e=this.photoViewRefs[this.currentItem.key])===null||e===void 0||e.handleRotateLeft()},handleRotateRight:function(){var e;(e=this.photoViewRefs[this.currentItem.key])===null||e===void 0||e.handleRotateRight()},setPhotoViewRef:function(e,t){this.photoViewRefs[e]=t},handleKeyDown:function(e){if(this.visible)switch(e.code){case"ArrowLeft":this.handlePrevious();break;case"ArrowRight":this.handleNext();break;case"Escape":this.handleClickClose();break}},handleSingleTap:function(e,t,n){this.toggleOverlay&&(this.overlayVisible=!this.overlayVisible),this.$emit("clickPhoto",n)},handleTouchStart:function(e,t){this.touched=!0,this.needTransition=!1,this.clientX=e,this.clientY=t},handleTouchMove:function(e,t,n,i,o){e===$.Scale&&i!==1&&this.handleTouchScaleMove(t,o),e===$.X&&this.handleTouchHorizontalMove(t),e===$.Y&&this.handleTouchVerticalMove(t,n)},handleTouchScaleMove:function(e,t){var n=e-this.clientX;(n>0&&t.includes(P.Left)||n<0&&t.includes(P.Right))&&this.handleTouchHorizontalMove(e)},handleTouchHorizontalMove:function(e){var t=e-this.clientX;!this.loop&&(this.index===0&&t>0||this.index===this.items.length-1&&t<0)&&(t=t/2),this.hasMove=e!==this.clientX,this.touchMoveX=t},handleTouchVerticalMove:function(e,t){var n=Math.abs(t-this.clientY),i=Math.max(Math.min(this.defaultBackdropOpacity,this.defaultBackdropOpacity-n/100/4),0);this.hasMove=e!==this.clientX||t!==this.clientY,this.backdropOpacity=i},handleTouchEnd:function(e,t,n,i,o){e===$.Scale&&i!==1&&this.handleTouchScaleEnd(t,o),e===$.X&&this.handleTouchHorizontalEnd(t),e===$.Y&&this.handleTouchVerticalEnd(n),this.hasMove&&(this.needTransition=!0),this.touched=!1,this.hasMove=!1,this.clientX=0,this.clientY=0,this.touchMoveX=0},handleTouchScaleEnd:function(e,t){var n=e-this.clientX;n<-J&&t.includes(P.Right)&&this.handleNext(),n>J&&t.includes(P.Left)&&this.handlePrevious()},handleTouchHorizontalEnd:function(e){var t=e-this.clientX;t<-J&&this.handleNext(),t>J&&this.handlePrevious()},handleTouchVerticalEnd:function(e){var t=e-this.clientY;Math.abs(t)>window.innerHeight*.14?this.$emit("closeModal"):this.resetBackdropOpacity()},resetBackdropOpacity:function(){this.backdropOpacity=this.defaultBackdropOpacity},resetNeedTransition:function(){this.needTransition=!1},handlePrevious:function(){var e=this.items.length;!this.loop&&this.index===0||(this.$emit("changeIndex",(this.index+e-1)%e),this.virtualIndex-=1)},handleNext:function(){var e=this.items.length;!this.loop&&this.index===e-1||(this.$emit("changeIndex",(this.index+1)%e),this.virtualIndex+=1)},handleClickMask:function(e){this.$emit("clickMask",e)},handleClickClose:function(){this.$emit("closeModal")},getItemLeft:function(e){var t=this.virtualIndex+e;return(this.loop||this.index!==0)&&(t-=1),"".concat((this.innerWidth+this.horizontalOffset)*t,"px")},getItemTransition:function(){var e="transform 0.6s cubic-bezier(0.25, 0.8, 0.25, 1)";if(this.needTransition)return e;if(!this.hasMove)return this.shouldTransition?e:void 0},getItemTransform:function(){return"translate3d(".concat(-(this.innerWidth+this.horizontalOffset)*this.virtualIndex+this.touchMoveX,"px, 0px, 0px)")}}});const Vn={class:"PhotoSlider__BannerWrap"},En={class:"PhotoSlider__Counter"},zn={class:"PhotoSlider__BannerRight"},Nn={key:1,class:"PhotoSlider__FooterWrap"};function Hn(e,t,n,i,o,r){const a=C("download"),l=C("rotate-left"),s=C("rotate-right"),h=C("flip-horizontal"),u=C("flip-vertical"),d=C("close"),f=C("photo-view"),m=C("arrow-left"),M=C("arrow-right");return y(),Be(nt,{to:"body"},[e.photoVisible?(y(),b("div",{key:0,class:le(["PhotoSlider__Wrapper",{PhotoSlider__Clean:e.showAnimateType!==e.ShowAnimateEnum.None,PhotoSlider__Hide:!e.overlayVisible}])},[S("div",{class:le(["PhotoSlider__Backdrop",{PhotoSlider__fadeIn:e.showAnimateType===e.ShowAnimateEnum.In,PhotoSlider__fadeOut:e.showAnimateType===e.ShowAnimateEnum.Out}]),style:K({background:`rgba(0, 0, 0, ${e.backdropOpacity})`}),onAnimationend:t[0]||(t[0]=p=>(e.onShowAnimateEnd(),e.resetBackdropOpacity()))},null,38),S("div",Vn,[S("div",En,ne(e.index+1)+" / "+ne(e.items.length),1),S("div",zn,[V(a,{class:"PhotoSlider__BannerIcon",onClick:e.handleDownload},null,8,["onClick"]),V(l,{class:"PhotoSlider__BannerIcon",onClick:e.handleRotateLeft},null,8,["onClick"]),V(s,{class:"PhotoSlider__BannerIcon",onClick:e.handleRotateRight},null,8,["onClick"]),V(h,{class:"PhotoSlider__BannerIcon",onClick:e.toggleFlipHorizontal},null,8,["onClick"]),V(u,{class:"PhotoSlider__BannerIcon",onClick:e.toggleFlipVertical},null,8,["onClick"]),V(d,{class:"PhotoSlider__BannerIcon",onClick:e.handleClickClose},null,8,["onClick"])])]),(y(!0),b(se,null,tt(e.showItems,(p,T)=>(y(),b("div",{key:p.key,class:"PhotoSlider__PhotoBox",style:K({left:e.getItemLeft(T),transition:e.getItemTransition(),transform:e.getItemTransform()}),onTransitionend:t[2]||(t[2]=(...k)=>e.resetNeedTransition&&e.resetNeedTransition(...k)),onClick:t[3]||(t[3]=(...k)=>e.handleClickMask&&e.handleClickMask(...k))},[V(f,{ref_for:!0,ref:k=>e.setPhotoViewRef(p.key,k),"origin-rect":e.originRect,"show-animate-type":e.showAnimateType,src:p.src,onClick:t[1]||(t[1]=re(()=>{},["stop"])),onTouchStart:e.handleTouchStart,onTouchMove:e.handleTouchMove,onTouchEnd:e.handleTouchEnd,onSingleTap:e.handleSingleTap},null,8,["origin-rect","show-animate-type","src","onTouchStart","onTouchMove","onTouchEnd","onSingleTap"])],36))),128)),e.isTouchDevice?H("v-if",!0):(y(),b(se,{key:0},[e.loop||e.index>0?(y(),b("div",{key:0,class:"PhotoSlider__ArrowLeft",onClick:t[4]||(t[4]=(...p)=>e.handlePrevious&&e.handlePrevious(...p))},[V(m)])):H("v-if",!0),e.loop||e.index<e.items.length-1?(y(),b("div",{key:1,class:"PhotoSlider__ArrowRight",onClick:t[5]||(t[5]=(...p)=>e.handleNext&&e.handleNext(...p))},[V(M)])):H("v-if",!0)],64)),e.currentItem.intro?(y(),b("div",Nn,ne(e.currentItem.intro),1)):H("v-if",!0)],2)):H("v-if",!0)])}te.render=Hn;te.__file="src/PhotoSlider/index.vue";var $e=_({name:"PhotoProvider",components:{PhotoSlider:te},props:{photoClosable:{type:Boolean,default:!1},maskClosable:{type:Boolean,default:!0},shouldTransition:{type:Boolean,default:!1},defaultBackdropOpacity:{type:Number,default:1},loop:{type:Boolean,default:!1},downloadMethod:{type:Function,default:null}},emits:["indexChange","visibleChange"],setup:function(e,t){var n=t.emit,i=function(){n("indexChange",{index:a,items:h,visible:m})},o=function(){n("visibleChange",{index:a,items:h,visible:m})},r=lt(i),a=r.index,l=r.updateIndex,s=at(a),h=s.items,u=s.updateItem,d=s.removeItem,f=rt(h,a,o),m=f.visible,M=f.handleHide,p=f.handleShow;return ie(Ee,u),ie(ze,d),ie(Ne,p),{items:h,updateItem:u,removeItem:d,visible:m,handleHide:M,handleShow:p,index:a,updateIndex:l}},methods:{handleClickPhoto:function(){this.photoClosable&&this.handleHide()},handleClickMask:function(){this.maskClosable&&this.handleHide()}}});function Wn(e,t,n,i,o,r){const a=C("photo-slider");return y(),b(se,null,[H(" @slot 默认插槽 "),Fe(e.$slots,"default"),V(a,{visible:e.visible,index:e.index,"should-transition":e.shouldTransition,"toggle-overlay":!e.photoClosable,"default-backdrop-opacity":e.defaultBackdropOpacity,items:e.items,loop:e.loop,"download-method":e.downloadMethod,onClickPhoto:e.handleClickPhoto,onClickMask:e.handleClickMask,onChangeIndex:e.updateIndex,onCloseModal:e.handleHide},null,8,["visible","index","should-transition","toggle-overlay","default-backdrop-opacity","items","loop","download-method","onClickPhoto","onClickMask","onChangeIndex","onCloseModal"])],64)}$e.render=Wn;$e.__file="src/PhotoProvider/index.vue";function Xn(e,t){for(var n=-1,i=e==null?0:e.length,o=Array(i);++n<i;)o[n]=t(e[n],n,e);return o}var Yn=Array.isArray,jn=Yn,Dn=1/0,Le=D?D.prototype:void 0,Ae=Le?Le.toString:void 0;function De(e){if(typeof e=="string")return e;if(jn(e))return Xn(e,De)+"";if(Xe(e))return Ae?Ae.call(e):"";var t=e+"";return t=="0"&&1/e==-Dn?"-0":t}function qn(e){return e==null?"":De(e)}var Un=0;function Kn(e){var t=++Un;return qn(e)+t}var be=_({name:"PhotoConsumer",props:{src:{type:String,required:!0},intro:{type:String,default:null},downloadName:{type:String,default:null}},setup:function(e){var t=oe(Ee),n=oe(ze),i=oe(Ne),o=g(null),r=Kn(),a=he(e),l=a.src,s=a.intro,h=a.downloadName,u=function(){i?.(r)},d=function(){return{key:r,src:l.value,originRef:o.value,intro:s.value,downloadName:h.value}};return ee([l,s,h],function(){t?.(d())}),it(function(){t?.(d())}),ot(function(){n?.(r)}),{root:o,handleClick:u}}});function Gn(e,t,n,i,o,r){return e.$slots.default()?(y(),b("span",{key:0,ref:"root",style:{display:"inline-block"},class:"PhotoConsumer",onClick:t[0]||(t[0]=(...a)=>e.handleClick&&e.handleClick(...a))},[H(" @slot 默认插槽 "),Fe(e.$slots,"default")],512)):H("v-if",!0)}be.render=Gn;be.__file="src/PhotoConsumer/index.vue";var Zn=[$e,be,te],Jn=function(e){Zn.forEach(function(t){e.component(t.name,t)})},ei={install:Jn};export{ei as i};
